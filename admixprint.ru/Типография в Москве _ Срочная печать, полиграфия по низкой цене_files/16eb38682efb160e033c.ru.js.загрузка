(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-widget-app"],[,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return o})),n.d(t,"add",(function(){return i})),n.d(t,"sub",(function(){return a})),n.d(t,"muln",(function(){return s})),n.d(t,"divn",(function(){return l})),n.d(t,"mulv",(function(){return c})),n.d(t,"divv",(function(){return u})),n.d(t,"applyFunction",(function(){return d})),n.d(t,"areEqual",(function(){return f})),n.d(t,"areFuzzyEqual",(function(){return p})),n.d(t,"normalize",(function(){return v})),n.d(t,"length",(function(){return m})),n.d(t,"length2",(function(){return h})),n.d(t,"dot",(function(){return g})),n.d(t,"avg",(function(){return b})),n.d(t,"rotate",(function(){return E})),n.d(t,"ORIGIN",(function(){return r}));var r=o(0,0);function o(e,t){return{x:e,y:t}}function i(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x+t.x,n.y=e.y+t.y,n}function a(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x-t.x,n.y=e.y-t.y,n}function s(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x*t,n.y=e.y*t,n}function c(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x*t.x,n.y=e.y*t.y,n}function u(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x/t.x,n.y=e.y/t.y,n}function l(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x/t,n.y=e.y/t,n}function d(e,t,n){return void 0===n&&(n=o(0,0)),n.x=t(e.x,1),n.y=t(e.y,2),n}function p(e,t,n){void 0===n&&(n=1e-6);var r=a(e,t);return-n<r.x&&r.x<n&&-n<r.y&&r.y<n}function f(e,t){return e.x===t.x&&e.y===t.y}function v(e,t){return void 0===t&&(t=o(0,0)),l(e,m(e),t)}function m(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function h(e){return Math.pow(e.x,2)+Math.pow(e.y,2)}function g(e,t){return e.x*t.x+e.y*t.y}function b(e,t){return void 0===t&&(t=o(0,0)),t.x=e.reduce((function(e,t){return e+t.x}),0)/e.length,t.y=e.reduce((function(e,t){return e+t.y}),0)/e.length,t}var y=Math.cos,_=Math.sin;function E(e,t,n){void 0===n&&(n=o(0,0));var r=e.x,i=e.y,a=y(t),s=_(t);return n.x=a*r-s*i,n.y=s*r+a*i,n}},function(e,t,n){"use strict";var r;function o(e){r||(r=e({project:"ymaps3",unhandledRejection:!1,uncaughtException:!1}))}function i(e){e&&"object"==typeof e||(e=new Error(e||"empty")),function(e){var t=e.logged,n="AbortError"===e.name,r=/fetch|network/i.test(e.message);return!(t||n||r)}(e)&&(r?(r({additional:e.additionalInfo},e),e.logged=!0):window.console.error("There is no error logger to log the error:",e))}function a(e){throw i(e),e}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}))},,function(e,t,n){"use strict";var r=n(6),o=n(4),i=n(2),a=n(5),s=n(47),c=n(31),u=n(62),l={},d={},p=Object(a.a)("inline-image"),f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadAction=void 0,n._load=function(){c.a.cancel(n._loadAction);var e=n.props.url;d[e]||(d[e]=Object(s.a)({url:e,parser:"string"}),d[e].then((function(t){return l[e]=t}),(function(){return delete d[e]}))),n._loadAction=c.a.create(d[e],{success:function(){return n.setState({loaded:!0})}})},n.state={loaded:Boolean(l[n.props.url])},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.loaded||this._load()},n.componentDidUpdate=function(e){if(this.props.url!==e.url){c.a.cancel(this._loadAction);var t=Boolean(l[this.props.url]);this.setState({loaded:t}),t||this._load()}},n.componentWillUnmount=function(){c.a.cancel(this._loadAction)},n.render=function(){var e=this.props;return e.children?e.children(l[e.url]||""):i.createElement("span",{key:this.state.loaded?0:1,style:Object(r.a)(Object(r.a)({},e.style),{},{fontSize:0,lineHeight:0}),className:p({loaded:this.state.loaded})+(e.className?" "+e.className:""),onClick:e.onClick,dangerouslySetInnerHTML:{__html:l[e.url]||""},ref:e.forwardedRef})},t}(i.PureComponent);t.a=Object(u.a)(f)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(19),o=n(2),i=o.createContext({});i.displayName="mapContext";var a=i.Provider;t.b=function(e){return void 0===e&&(e={}),function(t){var n=function(n){return o.createElement(i.Consumer,null,(function(i){var a=i.map,s=i.ymaps3;return e.shouldWait&&!a?null:o.createElement(t,Object(r.a)({},n,{map:a,ymaps3:s}))}))};return n.displayName="mapContext("+t.displayName+")",n}}},,function(e,t,n){"use strict";var r=n(6),o=n(497),i=n(498),a=(n(500),n(292));n(32);var s=n(48),c=n(0),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function l(e){for(var t=function(e){var t=[],n=(e=e.replace(/[^A-Za-z0-9\-\+_\=]/g,"")).length,r=0;for(;r<n;){var o=u.indexOf(e.charAt(r++)),i=u.indexOf(e.charAt(r++)),a=u.indexOf(e.charAt(r++)),s=u.indexOf(e.charAt(r++)),c=o<<2|i>>4,l=(15&i)<<4|a>>2,d=(3&a)<<6|s;t.push(String.fromCharCode(c)),64!==a&&t.push(String.fromCharCode(l)),64!==s&&t.push(String.fromCharCode(d))}return t.join("")}(e),n=t.length,r=0,o=[0,0],i=[];r<n;){for(var a=0,s=0,c=0,l=t.substr(r,8);c<4;)a|=l.charCodeAt(c)<<8*c,s|=l.charCodeAt(c+4)<<8*c,c++;var d=[a/1e6,s/1e6],p=[d[0]+o[0],d[1]+o[1]];o=p,i.push(p),r+=8}return i}var d=n(29);n(68),n(116);var p=n(69),f=n(44),v=n.n(f);n.d(t,"c",(function(){return h})),n.d(t,"s",(function(){return C})),n.d(t,"n",(function(){return R})),n.d(t,"h",(function(){return Z})),n.d(t,"m",(function(){return k})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return x})),n.d(t,"p",(function(){return N})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return L})),n.d(t,"o",(function(){return O})),n.d(t,"l",(function(){return j})),n.d(t,"r",(function(){return q})),n.d(t,"q",(function(){return F})),n.d(t,"g",(function(){return B})),n.d(t,"f",(function(){return H})),n.d(t,"i",(function(){return G})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return S}));var m=["bus","tramway","trolleybus","underground","minibus","railway"],h={auto:"auto",masstransit:"mt",pedestrian:"pd",bicycle:"bc",scooter:"sc",taxi:"taxi",comparison:"comparison"},g={19:{main:8,underlay:12},18:{main:6,underlay:10},12:{main:4,underlay:8}},b={default:{underlay:8,main:4,border:void 0},colorize:{underlay:10,main:4,border:6}},y="#fff",_="#6d6d6d",E="#6000ff",w={CLOSED:{color:"#333",border:"#000"},UNKNOWN:{color:"#b3b3b3",border:"#8e8e8e"},FREE:{color:"#47ca0b",border:"#2f8109"},LIGHT:{color:"#faff00",border:"#999c03"},HARD:{color:"#ff0003",border:"#9c0304"},VERY_HARD:{color:"#98201f",border:"#791918"}},S="#b3b3b3";function O(e){return e.find((function(e){return Boolean(e.isRecommended)}))||e[0]}function C(e,t){var n=e.routePoints,a=e.viaIndexes,c=e.travelMode,u=e.activeRouteIndex,l=e.detailedIndex,d=e.settings,p=e.routerResponse,f=e.ignoreTravelModes,v=e.startNavigationInApp,g=n[0],b=n.reduce((function(e,r,a){var c=r.coords,u=r.searchResult,l=u&&u.uri&&c&&("toponym"!==u.type||Object(o.a)(u.coordinates,u.displayCoordinates)||u.uri&&s.h(u.uri))&&(a<t.routes.maxCount-1||a===n.length-1)?u.uri:"";l=s.j(l)&&a>0&&a<n.length-1?"":l;var d=c&&Object(i.a)(c,{reverse:!0});return d?{pointCoords:e.pointCoords.concat([d]),pointUris:e.pointUris.concat([s.e(l)?l:""])}:e}),{pointCoords:[],pointUris:[]}),y=b.pointCoords,_=b.pointUris;1!==y.length||!g||g.coords||g.value||(y.unshift(""),_.unshift(""));var E=d&&P(c,d),w=p&&p.routes[u],S="masstransit"===c&&d&&d.masstransit.avoidTypes.length!==m.length?d.masstransit.avoidTypes.join():void 0;return{rtext:y.join("~"),ruri:_.length>0?_.join("~"):void 0,via:a.length>0?a.join("~"):void 0,rtt:h[c],rtn:u>0?u:void 0,rtm:["auto","taxi"].includes(c)&&(null==d?void 0:d.auto.ignoreTrafficJams)?"atm":void 0,rtd:l>-1?l:void 0,routes:Object(r.a)(Object(r.a)({},E),{},{avoidTypes:S,cargo:void 0,activeComparisonMode:"comparison"===c&&w&&"taxi"!==w.type?w.type:void 0,timeDependent:E&&E.timeDependent&&("departure"!==E.timeDependent.type||E.timeDependent.time)?E.timeDependent:void 0,ignoreTravelModes:"comparison"===c?f:void 0}),start_navigation:v?"true":void 0}}function j(e,t,n){var r=Math.floor(e/86400),o=Math.floor(e/3600%24),i=Math.round(e/60%60);return 60===i&&(i=0,o++),24===o&&(o=0,r++),[r>0?(function(params){return params.day+" дн.";})({day:Math.abs(r)}):"",o>0?(function(params){return params.hour+" ч";})({hour:Math.abs(o)}):"",i>0&&(!n||0===r)?(function(params){return params.minutes+" мин";})({minutes:Math.abs(i)}):""].filter(Boolean).join(" ")||(function(params){return params.minutes+" мин";})({minutes:1})}function R(e,t){return 0===e?"start":t&&e!==t.length-1?"middle":"finish"}function k(){return{input:"",value:"",coords:null}}function I(){return[{input:"",value:"",coords:null},{input:"",value:"",coords:null}]}function x(e){var t=e.config,n=e.routes,r=p.a.get("maps_routes_travel_mode",t),o=Object.keys(h).includes(r)?r:void 0;return{uuid:v.a.v4(),travelMode:o||"auto",activeField:0,isFocused:!0,isLoading:!1,optimizingStatus:void 0,activeRouteIndex:0,skipApplyBounds:!1,showMapForm:!1,detailedIndex:-1,moreSnippetsShown:!1,activePoint:null,routePoints:[{input:"",value:"",coords:null},{input:"",value:"",coords:null}],viaIndexes:[],routerResponse:null,mrcFeatures:null,activeMrcIndex:null,geolocationError:null,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"},cargo:null==n?void 0:n.temporaryStackData.cargo},masstransit:{avoidTypes:m,timeDependent:{type:"departure"}}}}}function M(e){var t=e.map(T);return t.filter(Boolean).length>0?t.join("~"):void 0}function T(e){var t=e.searchResult,n=e.ignorePctx;if(t&&!n)return"routePoint"in t?t.routePoint&&t.routePoint.context:void 0}function P(e,t){switch(e){case"auto":var n=t[e].timeDependent,o=t[e].cargo;return{avoid:0!==t[e].avoid.length?t[e].avoid.join():void 0,timeDependent:{time:n.time?W(new Date(n.time)):void 0},cargo:o&&0!==Object.keys(o).length?o:void 0};case"masstransit":var i=t[e].timeDependent,a=t[e].avoidTypes;return{avoidTypes:0===a.length||a.length===m.length?void 0:a.join(),timeDependent:Object(r.a)(Object(r.a)({},i),{},{time:i.time?W(new Date(i.time)):void 0})};default:return}}function N(e){return{type:"LineString",coordinates:e.coordinates||[]}}function D(e){return e.routes.forEach((function(e){e.coordinates=e.encodedCoordinates?l(e.encodedCoordinates):[]})),e}function L(e,t){return e.waypoints=e.waypoints.map((function(e){var n=t.find((function(t){return Boolean(t.coords&&e.coordinates&&Object(o.a)(t.coords,e.coordinates))}));return Object(r.a)(Object(r.a)({},e),{},{name:n?n.value:""})})),e}function z(e,t){if("comparison"===t){for(var n=0,r=1;r<e.length;r++)n+=Object(a.a)(e[r],e[r-1]);return n<=5e4}return!0}var A=z;function U(e,t){return"auto"===e&&function(e){return e.enableRoutesB2B}(t)&&c.a.get("routes_b2b_agreement")||!1}function F(e,t){return e&&U(e,t)?t.routes.maxB2BCount:t.routes.maxCount}function B(e,t){var n=e.route,r=e.isActive,o=e.isDefaultColor;if(!r)return{stroke:[{width:b.default.main,color:_},{width:b.default.underlay,color:y}],cursor:"pointer"};var i=H({route:n,isDefaultColor:o},t);return{zIndex:10,stroke:[i.mainStyle,i.borderStyle,i.underlayStyle],cursor:"default"}}function H(e,t){var n=e.route,r=e.isDefaultColor,o=r?b.default:b.colorize;return{mainStyle:function(e,t,n){return n?{width:t.main,color:E}:{width:t.main,palette:e.map((function(e){return{count:e.count,color:w[e.type].color}}))}}(n.colorizeInfo||[],o,r),borderStyle:function(e,t,n){return n?{}:{width:t.border,palette:e.map((function(e){return{count:e.count,color:w[e.type].border}}))}}(n.colorizeInfo||[],o,r),underlayStyle:function(e){return{width:e.underlay,color:y}}(o)}}function q(e){return g[e<=12?12:e<=18?18:19]}function W(e){var t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":00";return e.getFullYear()+"-"+t+"-"+n+"T"+r}function G(e,t){var n=d.c(e).getTime()+60*d.e(t).getTimezoneOffset()*1e3;return new Date(n)}function V(e){return 2===e.length&&Object(a.a)(e[0],e[1])>1e5}function Y(e){var t=e.ignoreTrafficJams,n=e.travelMode,r=e.isRough;if(["auto","taxi","comparison"].includes(n))return r?"approx":t?"nojams":"best"}function Z(e,t,n){var o=n.regionId,i=n.isRough,a=t.travelMode,s=t.routerResponse,c=t.routePoints,u=t.activeRouteIndex,l=t.viaIndexes,d=c.filter((function(e){return Boolean(e.coords)})),p=d.map((function(e){return e.coords})),f=s?s.routes[u]:null,v=t.activeComparisonMode?t.activeComparisonMode:f&&"taxi"!==f.type&&f.type||void 0,m=P(a,t.settings),h=[];return z(p,a)||h.push("bicycle"),A(p,a)||h.push("scooter"),Object(r.a)(Object(r.a)({rll:p.map((function(e){return e.join(",")})).join("~"),type:a,activeComparisonMode:v,via:l.length>0?l.join("~"):void 0,mode:Y({ignoreTrafficJams:t.settings.auto.ignoreTrafficJams||Boolean(m&&m.timeDependent&&m.timeDependent.time&&"comparison"!==a),travelMode:a,isRough:i}),pctx:M(d),ignoreTravelModes:h.length>0?h.join(","):void 0,regionId:o,enableRoutesB2B:U(a,e)||void 0},m),{},{isIntercityRoute:V(p),"no-taxi-route-hidden":e.query["no-taxi-route-hidden"]})}},,function(e,t,n){"use strict";var r=n(19),o=n(4),i=(n(151),n(153),n(155),n(157),n(2)),a=n(62),s=n(5),c=n(15),u=n(159),l=n.n(u),d=n(160),p=n.n(d),f={angle:l.a,triangle:p.a},v=Object(s.a)("button"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._onMouseEnter=function(e){n.props.title&&!n.state.hideTitle&&n.setState({hideTitle:!0}),n.props.onMouseEnter&&n.props.onMouseEnter(e)},n._onMouseDown=function(e){n.props.disabled||(n.setState({pressed:!0}),n.props.onMouseDown&&n.props.onMouseDown(e))},n._onMouseUp=function(){n.setState({pressed:!1})},n._onMouseOut=function(){n.setState({pressed:!1})},n._onFocus=function(){var e=n.props.forwardedRef,t=void 0===e?n._ref:e;if(n.state.pressed){var r=t.current;r&&r.blur()}},n._renderLink=function(e,t){var o=n.props,a=o.disabled,s=o.url,c=o.rel,u=o.target,l=o.forwardedRef,d=void 0===l?n._ref:l;return i.createElement("a",Object(r.a)({href:a?void 0:s,role:"button",target:u||"_parent","aria-disabled":!!a||void 0,ref:d,rel:c},e),t)},n._renderButton=function(e,t){var o=n.props,a=o.disabled,s=o.type,c=void 0===s?"button":s,u=o.forwardedRef,l=void 0===u?n._ref:u;return i.createElement("button",Object(r.a)({disabled:a,type:c,ref:l},e),t)},n._renderIcon=function(e){var t=n.props;return i.createElement("span",{key:"icon",className:e("icon"),style:{width:t.iconWidth}},t.icon)},n._renderTick=function(e){var t=f[n.props.tick];return i.createElement(c.a,{key:"tick",className:e("tick"),url:t})},n.state={pressed:!1,hideTitle:!1},n}return Object(o.a)(t,e),t.prototype.render=function(){var e,t=this.props,n=[t.icon?this._renderIcon(v):null,t.children?i.createElement("span",{key:"text",className:v("text")},t.children):null,t.tick?this._renderTick(v):null],r={className:v({view:t.view,ui:(e=t.view,!["air","air-alt","search"].includes(e)),size:t.size,link:Boolean(t.url),disabled:t.disabled,checked:t.checked,"pin-left":t.pinLeft,"pin-right":t.pinRight,"pin-top":t.pinTop,"pin-bottom":t.pinBottom,pressed:this.state.pressed||t.pressed,tick:t.tick,stretched:t.isStretched,"text-align-left":t.isTextAlignLeft,"flipped-tick":t.flippedTick,hovered:t.hovered,focused:t.focused,"no-shadow":t.noShadow,truncated:t.truncated}),tabIndex:t.tabIndex,title:this.state.hideTitle?void 0:t.title,"aria-label":t.ariaLabel,itemProp:t.itemProp,onMouseEnter:this._onMouseEnter,onMouseLeave:t.onMouseLeave,onClick:t.onClick,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseOut:this._onMouseOut,onFocus:this._onFocus};return t.url?this._renderLink(r,n):this._renderButton(r,n)},t}(i.Component);t.a=Object(a.a)(m)},,,function(e,t,n){"use strict";n.d(t,"h",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"k",(function(){return R})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"j",(function(){return x})),n.d(t,"c",(function(){return E})),n.d(t,"e",(function(){return P})),n.d(t,"g",(function(){return T})),n.d(t,"i",(function(){return D})),n.d(t,"f",(function(){return O}));var r=n(6),o=n(26),i=n.n(o),a=(n(79),n(125)),s=n(247),c=n(227),u={DEFAULT_MARKERS:"defaultMarkers",DEFAULT_GRAPHICS:"defaultGraphics",DEFAULT_GRAPHICS_UNDER_BUILDINGS:"defaultGraphicsUnderBuildings",EDITOR_MARKERS:"editorMarkers",EDITOR_GRAPHICS:"editorGraphics"},l=":customDomLayer(eventBlocker)",d=["map","sat","skl"],p=["map","sat"],f=["map","trf","trfe","trfa","stv","indoor","carparks","mrc","mrcpe","personalizedPoi"],v=f.concat(u.DEFAULT_GRAPHICS,u.DEFAULT_GRAPHICS_UNDER_BUILDINGS),m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",h={map:function(e){var t=e.mapTiles,n=e.mapjTiles;return{url:j(t),hotspotsUrl:j(n)}},sat:function(e){return{url:j(e.satTiles)}},skl:function(e){var t=e.sklTiles,n=e.skljTiles;return{url:j(t),hotspotsUrl:j(n)}},stv:function(e){return{url:e.stvTiles.replace("l=stv","l=stv,sta")}},sta:function(e){return{hotspotsUrl:e.staHotspotTiles}},pht:function(e){return{url:e.phtTiles,hotspotsUrl:e.phtHotspotTiles+"&format=json"}},mrc:function(e){return{url:e.mrcTiles+"&camera-direction=front",hotspotsUrl:e.mrcHotspotTiles+"&camera-direction=front"}},mrcpe:function(e){return{url:e.mrcpeTiles+"&camera-direction=front",hotspotsUrl:e.mrcpeHotspotTiles+"&camera-direction=front"}},carparks:function(e){return{url:e.carparksTiles}},personalizedPoi:function(){return{}}},g=["map:ground","sat:ground","skl:ground","personalizedPoi:ground","trf:ground","trfe:ground","trfa:ground","carparks:ground","mrc:ground","mrcpe:ground","stv:ground","indoor:ground","map:buildings","map:icons","map:labels","personalizedPoi:icons","personalizedPoi:labels","trfe:icons","trfe:labels","carparks:icons","indoor:icons","indoor:labels","stv:icons","sta:ground","pht:ground",u.DEFAULT_GRAPHICS_UNDER_BUILDINGS,u.DEFAULT_GRAPHICS,u.DEFAULT_MARKERS,l,u.EDITOR_GRAPHICS,u.EDITOR_MARKERS],b=[].concat(g);L(b,u.DEFAULT_GRAPHICS_UNDER_BUILDINGS,b.indexOf("map:buildings")),L(b,u.DEFAULT_GRAPHICS,b.indexOf("map:buildings")+1);var y={vector:{transformLayers:{"map:buildings":{opacity:.7}}}};function _(e){var t={vector:{iconsInteractiveArea:e&&function(e){var t=e.uatraits.isMobile,n=e.experiments.ui.vectorExtendTaps;return t&&n?{field:10,minSize:40}:void 0}(e)}};return{"map:buildings":{vector:{objectsInteractivity:!0,modelsAppearingAnimation:{transitionZoom:17,duration:250,limitByZoom:.5}}},"map:icons":t,"indoor:icons":t,"trfe:icons":t,"stv:icons":t,"carparks:icons":t,"personalizedPoi:icons":t,"stv:ground":y,"mrc:ground":y,"mrcpe:ground":y}}var E=["map","sat","pht"];function w(e){var t=Object.keys(h).reduce((function(t,n){var r=e.layers["sta"===n?"stv":n],o=r&&r.zoomRange;return t[n]={type:"tile",raster:C(n,r,e),vector:I(n,r,e),clampMapZoom:d.includes(n),zoomRange:o?{min:o[0],max:o[1]}:void 0},t}),{}),n=e.hosts,r=e.locale,o=e.uatraits.isMobile;return t.indoor={type:"tile",vector:T({collisionPriority:"low",priority:"low",requestTileSize:o?"X1":"X4",glyphRangeUrl:n.vectorIndoorGlyphs.replace("{{lang}}",r),imageUrl:n.vectorIndoorImages,meshUrl:n.vectorIndoorMeshes,tileUrl:N(n.vectorIndoorTiles.replace("{{lang}}",r),e),indoorPlanUrl:n.vectorIndoorPlans,mapMode:D(e)},e),zoomRange:{min:16.5,max:21}},Object.keys(u).forEach((function(e){t[u[e]]=e.endsWith("MARKERS")?{type:"markers"}:{type:"geojson"}})),t}function S(e,t,n){return e.replace("%l","lang="+t).replace("%v",n).replace(/%d\|\d+/,(function(e){return"{{"+e+"}}"})).replace(/%d/,"{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}")}function O(e,t){var n;return e+((null===(n=t.mocks)||void 0===n?void 0:n.version)?"&mocks%5Bversion%5D="+t.mocks.version:"")}function C(e,t,n){var r=h[e];if(!t||!r)return{tileUrl:m};var o=r(n.hosts),i=function(e){return S(e,n.locale,t.version)},c=["map","skl","carparks","stv","sta","mrc","mrcpe"].includes(e)?M(n):"",u=["map","stv","sta","pht","mrc","mrcpe","carparks"].includes(e)&&"dark"===Object(s.a)(n)?"&theme=dark":"",l=o.url?i(o.url)+c+u:m;return{tileUrl:"map"===e?N(l,n):l,fetchHotspots:o.hotspotsUrl?Object(a.a)(i(o.hotspotsUrl)+c):void 0,transparent:!p.includes(e),hotspotPadding:n.uatraits.isMobile?12:0}}function j(e){return e.replace("%c","v=%v&%c")}function R(e,t,n){for(var r=function(e){return(null==e?void 0:e.experiments.ui.vectorGraphics)?b:g}(n),o=function(e){return(null==e?void 0:e.experiments.ui.vectorGraphics)?v:f}(n),i=e.filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(t,n){var o=r.indexOf(t)-r.indexOf(n);return 0===o?e.indexOf(t)-e.indexOf(n):o})).reverse(),a=[],s=i.length-1;s>=0;s--){var c=i[s],u=c.split(":")[0];if(!o.includes(u))break;a.push(c),i.splice(s,1)}return i.reverse(),{topRasterLayers:k(i,n).map((function(e){return e===l?{id:l,type:"customDomLayer",options:{raster:{implementation:t}}}:e})),mainLayers:k(a,n)}}function k(e,t){var n=_(t);return e.map((function(e){return e in n?Object(c.c)(e,n[e]):e}))}function I(e,t,n){if(t){var r=n.locale,o=n.hosts;if("personalizedPoi"===e)return T({priority:"medium",tileUrl:N(S(o.tilesApi+"personalized_poi/tiles?l=personalized_poi&%l&v=%v&x={{x}}&y={{y}}&z={{z}}&zmin={{zmin}}&zmax={{zmax}}",n.lang,t.version),n),requestTileSize:"X4",imageUrl:o.tilesApi+"personalized_poi/icons?id={{id}}&scale={{scale}}",glyphRangeUrl:o.tilesApi+"personalized_poi/glyphs?font_id={{fontId}}&range={{range}}",mapMode:D(n),tileRequestWithCredentials:!0,imageRequestWithCredentials:!0,glyphRequestWithCredentials:!0},n);if("carparks"===e){var i,s=(null===(i=n.mocks)||void 0===i?void 0:i.version)?"":"&v=%v";return T({priority:"medium",tileUrl:O(S(o.carparksTileRenderer+"tiles?version=2&l=carparks&%l"+s+"&x={{x}}&y={{y}}&z={{z}}",n.lang,t.version),n),imageUrl:o.carparksTileRenderer+"icons?id={{id}}&scale={{scale}}",mapMode:D(n)},n)}if("stv"===e)return T({priority:"medium",tileUrl:S(o.stvTileRenderer+"tiles?l=sta,stv&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",n.lang,t.version),imageUrl:o.stvTileRenderer+"icons?id={{id}}&scale={{scale}}",mapMode:D(n)},n);if("mrc"===e||"mrcpe"===e){var c="mrc"===e?o.mrcTiles:o.mrcpeTiles,u="mrc"===e?o.mrcHotspotTiles:o.mrcpeHotspotTiles;return T({priority:"medium",tileUrl:c.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front&format=protobuf",hotspots:{ground:Object(a.a)(u.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front")},mapMode:D(n)},n)}if("map"===e){var l=n.uatraits.isMobile,d=o.vectorTiles.replace("{{lang}}",r).replace("{{version}}",t.version);return T({collisionPriority:"low",priority:"high",tileBeltSize:1,requestTileSize:l?"X1":"X4",imageUrl:o.vectorImages,tileUrl:O(N(d,n),n),meshUrl:o.vectorMeshes,glyphRangeUrl:o.vectorGlyphs.replace("{{lang}}",r),hotspots:{buildings:{minZoom:16.5}},mapMode:D(n)},n)}}}function x(e){return g.filter((function(t){return t.startsWith(e+":")}))}function M(e){var t=Object(r.a)({},e.experiments.rendererParams||{});return Object.keys(e.query).forEach((function(n){n.startsWith("renderer_")&&(t[n.replace(/^renderer_/,"")]=e.query[n])})),Object.keys(t).length>0?"&"+i.a.stringify(t,{indices:!1}):""}function T(e,t){return Object(r.a)(Object(r.a)({},e),{},{imageUrl:P(e.imageUrl,t),tileUrl:P(e.tileUrl,t),meshUrl:P(e.meshUrl,t),indoorPlanUrl:P(e.indoorPlanUrl,t),glyphRangeUrl:P(e.glyphRangeUrl,t)})}function P(e,t){return e?e+M(t):e}function N(e,t){return e.includes(";base64")?e:e+(t.bunker.disableAdsMapTiles?"":"&ads=enabled")}function D(e){return"dark"===Object(s.a)(e)?"night":void 0}function L(e,t,n){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),e.splice(n,0,t)),e}},function(e,t,n){"use strict";var r=n(6),o=n(2),i=n(7),a=n(15);t.a=Object(i.b)((function(e){var t,n,i,s,c,u=(t={name:e.name,size:e.size,theme:e.theme},n=e.config,i="number"==typeof t.size?t.size:t.size.width+"x"+t.size.height,s="dark"===t.theme?"_night":"",c=t.name+"-"+i+s+".svg",n.staticHost+"static/v21/icons/core/"+c);if(e.inline)return o.createElement(a.a,{url:u,className:e.className,onClick:e.onClick,style:e.style},"function"==typeof e.inline?e.inline:void 0);var l="number"==typeof e.size?{width:e.size,height:e.size}:e.size,d=Object(r.a)(Object(r.a)({},e.style),l);return o.createElement("img",{src:u,className:e.className,onClick:e.onClick,style:d})}))},,,function(e,t,n){"use strict";t.a={create:function(e,t){var n=t.success,r=t.fail,o=t.always,i=!1;return e.then((function(e){i||(n&&n(e),o&&o(null,e))}),(function(e){i||(r&&r(e),o&&o(e))})),{cancel:function(){return i=!0}}},cancel:function(e){e&&e.cancel()}}},function(e,t,n){"use strict";var r=n(132),o=["orgpage","discovery","search","search-result","routes","usermaps","masstransit","traffic","home","post-editor","bookmarks","panoramas","photos","mrc","feedback","post-editor","mobile-app-share","catalog","covid","metro","actual","stories-player","share","reviews","user-profile","event","stories-editor","ugc-profile","booking","booking-panel"],i=n(135);n(22),n(70);n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return g}));var a={search:["orgpage","search-result","bookmarks","traffic","masstransit","user-profile"],"search-result":["user-profile","booking"],discovery:["orgpage","search","traffic","masstransit","user-profile"],bookmarks:["search","routes","traffic","masstransit","user-profile"],routes:["search","search-result","bookmarks","traffic","feedback","user-profile","masstransit"],usermaps:["search","bookmarks","discovery","orgpage","search-result","feedback","masstransit","routes","traffic","user-profile"],photos:["booking"]},s=["photos","panoramas","mrc","mobile-app-share","reviews","share","stories-player","stories-editor","booking"],c=["orgpage","discovery"];function u(e){return null===e||"string"==typeof e&&o.includes(e)}function l(e){return s.includes(e)}function d(e){var t,n,r,o,a=f(e,"search-result"),s=f(e,"masstransit"),u="stop"===(null==s?void 0:s.masstransitMode)&&(null==s||null===(t=s.stops)||void 0===t?void 0:t.tab),l="business"===(null==a||null===(n=a.response)||void 0===n||null===(r=n.items[0])||void 0===r?void 0:r.type)?Object(i.a)(a.tab):void 0,d=u?Object(i.h)(u)?Object(i.g)(u):Object(i.f)(u):l?Object(i.f)(l):void 0;return Boolean((o=p(e),Boolean(o&&c.includes(o))||d))&&!0}function p(e,t){void 0===t&&(t=!0);var n=e.stack,r=t?n.filter((function(e){return!l(e.mode)})):n,o=r[r.length-1],i=function(e){var t=e.traffic,n=e.masstransit,r=e.homePanel;e.config;if(!r.isOpen)return"home";if(t.isLayerEnabled)return"traffic";if(n.isLayerShown)return"masstransit";return"home"}(e);return o&&o.mode||i}function f(e,t){var n=e.stack,r=l(t)?n:n.filter((function(e){return!l(e.mode)})),o=r[r.length-1];if(o&&o.mode===t)return o}function v(e,t){var n=e.stack,o=a[t];l(t)||(o=o?o.concat(s):s);for(var i,c=[],u=Object(r.a)(n.slice().reverse());!(i=u()).done;){var d=i.value;if(!o||!o.includes(d.mode)){if(d.mode!==t)break;c.unshift(d)}}return c}function m(e){var t=f(e,p(e));return t?t.mobileViewState||"expanded":e.defaultMobileViewState}function h(e){return e.collapsedSidebar}function g(e){return function(e){return e.baseUrl.endsWith("/profile")}(e)||Boolean(e.query["profile-mode"])}},function(e,t,n){"use strict";n(6),n(492),n(32);var r=n(48);n(42),n(67),n(122);n.d(t,"k",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"a",(function(){return d})),n.d(t,"m",(function(){return h}));var o=["one","two","three","four","five"];function i(e){try{JSON.parse(e)}catch(t){return e.startsWith("provider:")}return!0}function a(e){return o.indexOf(e)+1||0}function s(e){return"business"===e.type?e.direct?"geodirect":e.advert?"yabs":"bizfinder":"toponym"===e.type?"geocoder":"direct"===e.type?"geodirect":"collection"===e.type?"collection":void 0}function c(e){return Boolean(e&&"results"in e&&e.results)}function u(e){return"similar"===e.type?e.isAdvert:Boolean("business"===e.type&&e.advert&&e.advert.highlighted)}function l(e){var t;if(e)return"categories"in e&&e.categories?null===(t=e.categories[0])||void 0===t?void 0:t.class:"toponym"===e.type?g(e.hotspotProperties)?"car park":"country"===e.kind?"country_fallback":e.kind:void 0}function d(e){return"MultiLineString"===(null==e?void 0:e.type)?{type:"MultiLineString",coordinates:e.coordinates}:"GeometryCollection"===(null==e?void 0:e.type)?{type:"Polygon",coordinates:e.geometries.reduce((function(e,t){return[].concat(e,t.coordinates)}),[])}:void 0}function p(e){if(c(e)){var t=1===e.results.items.length?e.results.items[0].uri:void 0;return r.c(t)}}function f(e){if(c(e)){var t=e.results.items[0];return"transit-route"===(null==t?void 0:t.type)?t.transitRouteInfo.routeId:void 0}}function v(e){return"business"===e.type}function m(e){var t;return Boolean(null===(t=e.onlineProperties)||void 0===t?void 0:t.hideAddress)}function h(e,t){return{items:[e],requestCorrectedQuery:null==t?void 0:t.requestCorrectedQuery,requestId:e.requestId,requestQuery:null==t?void 0:t.requestQuery,requestResults:1,totalResultCount:1}}function g(e){return!!(null==e?void 0:e.vectorMetadata)&&"carparks"===e.vectorMetadata.get("_vector_layerName")}},function(e,t,n){"use strict";var r=n(124),o=n(4),i=(n(303),n(2)),a=n(3),s=n(5),c=n(20),u=n(40),l=n(27),d=Object(s.a)("map-placemark"),p=function(){},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._marker=void 0,n._container=document.createElement("div"),n._mapEventHandlers=void 0,n._clickTimer=void 0,n._isDragged=!1,n._initCursor=function(){n._updateCursor(),n._marker.group().on("dragStart",(function(){n._isDragged=!0,n._container.style.cursor="grabbing",n.props.map.container.style.cursor="grabbing"})).on("dragEnd",(function(){n._isDragged=!1,n._updateCursor(),n.props.map.container.style.cursor="default"}))},n._updateCursor=function(){n._container.style.cursor=n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default"},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach((function(e){t[e]&&n._mapEventHandlers.on(e,(function(){t[e]({coordinates:n._marker.coordinates})}))}))},n._onClick=function(e){e.stopPropagation();var t=n.props,r=t.onClick||p,o=t.onFastClick||p,i=t.onDoubleClick||p;n._clickTimer?(i(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout((function(){r(),n._clickTimer=void 0}),300))},n._container.className=d(),n._marker=t.map.createMarker({coordinates:t.coordinates,element:n._container,options:{draggable:t.draggable,zIndex:t.zIndex||u.a.default,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents}}),n._mapEventHandlers=n._marker.group(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._initCursor(),this._addMapEventHandlers(e),e.map.addMarker(this._dataSourceId,this._marker)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeMarker(this._dataSourceId,this._marker),this._marker.destroy(),this._isDragged&&(this.props.map.container.style.cursor="default")),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e){var t=e.dataSourceId?e.dataSourceId:l.d.DEFAULT_MARKERS;t!==this._dataSourceId&&(this.props.map.removeMarker(t,this._marker),this.props.map.addMarker(this._dataSourceId,this._marker));var n=this.props;n.coordinates!==e.coordinates&&this._marker.setCoordinates(n.coordinates),e.draggable!==n.draggable&&this._marker.toggleDrag(n.draggable||!1),e.zIndex!==n.zIndex&&this._marker.setZIndex(n.zIndex||u.a.default),e.disableRoundCoordinates!==n.disableRoundCoordinates&&this._marker.toggleRoundCoordinates(n.disableRoundCoordinates||!1),n.onDragStart===e.onDragStart&&n.onDragMove===e.onDragMove&&n.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(n)),e.draggable===n.draggable&&e.onClick===n.onClick||this._updateCursor()},n.render=function(){var e=this.props,t=i.createElement("div",{className:d("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children);return a.createPortal(t,this._container)},Object(r.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||l.d.DEFAULT_MARKERS}}]),t}(i.PureComponent);t.a=Object(c.b)({shouldWait:!0})(f)},,function(e,t,n){"use strict";var r=n(6),o=n(47),i=n(137),a=n(26);var s,c=function(e){var t=a.stringify(e,{sort:function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}});return t?String(function(e){for(var t=e.length,n=5381,r=0;r<t;r++)n=33*n^e.charCodeAt(r);return n>>>0}(t)):""};t.a=function e(t,n,a,u){var l={csrfToken:s||a.csrfToken,sessionId:a.counters.analytics.sessionId,host_config:a.hostConfig,ajax:"1"};a.query["no-mail"]&&(l["no-mail"]=!0),a.query["no-cache"]&&(l["no-cache"]=!0),a.query.debug&&(l.debug=a.query.debug),a.mocks&&(l.mocks=0!==Object.keys(a.mocks).length?a.mocks:"1");var d={url:(n.baseUrl||a.baseUrl)+"/api/"+t,method:n.body?"POST":"GET",headers:Object(r.a)({"X-Retpath-Y":window.location.href},n.headers)};if(n.body)d.body=JSON.stringify(Object(r.a)(Object(r.a)({},l),n.body)),d.headers=Object(r.a)(Object(r.a)({},d.headers),{},{"Content-Type":"application/json; charset=utf-8"});else{var p=Object(r.a)(Object(r.a)({},l),n.query),f=c(p);d.query=Object(r.a)(Object(r.a)({},p),{},{s:f})}return Object(o.a)(d).then((function(r){if(function(e){return"type"in e&&"captcha"===e.type}(r))throw window.location.href=r.captcha["captcha-page"],new Error("Response is captcha");if("csrfToken"in r){if(!1!==u)return s=r.csrfToken,e(t,n,a,!1);throw new Error("Invalid csrf token")}if(r.debug&&Object(i.a)(r.debug),"error"in r)throw r.error;return r.data}))}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={screenshotDialog:99999,clipboard:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),o=n(2),i=n(20),a={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onFastClick:"fastclick",onTouchCancel:"touchcancel",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onClick:"click",onDoubleClick:"dblclick",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove"},s={onUpdate:"update",onCopyrightsChange:"copyrightsChange",onResize:"resize",onZoomRangeChange:"zoomRangeChange",onReady:"ready",onIndoorPlansChanged:"indoorPlansChanged",onVectorError:"vectorError",onVectorStart:"vectorStart",onZoomRoundingChanged:"zoomRoundingChanged",onMainEngineChanged:"mainEngineChanged"},c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._applyMapHandlers=function(e,t,n){Object.keys(s).forEach((function(r){n&&t&&n[r]===t[r]||(n&&n[r]&&e.offSingle(s[r],n[r]),t&&t[r]&&e.on(s[r],t[r]))}))},t._applyDomHandlers=function(e,t,n){Object.keys(a).forEach((function(r){n&&t&&n[r]===t[r]&&n.layer===t.layer||(n&&n[r]&&e.events.off(a[r],n.layer||"none",n[r]),t&&t[r]&&e.events.on(a[r],t.layer||"none",t[r]))}))},t._onInertiaStart=function(e){t.props.onInertiaStart&&t.props.onInertiaStart(t.props.map.calculateCenter(e.targetPositionWcs))},t._onDragStart=function(){t.props.onDragStart&&t.props.onDragStart()},t._onDragEnd=function(){t.props.onDragEnd&&t.props.onDragEnd()},t._onContainerTouchMove=function(e){t.props.onContainerTouchMove&&t.props.onContainerTouchMove(u(e))},t._onContainerPointerMove=function(e){t.props.onContainerPointerMove&&t.props.onContainerPointerMove(u(e))},t._onActionStart=function(){t.props.onActionStart&&t.props.onActionStart()},t._onActionEnd=function(){t.props.onActionEnd&&t.props.onActionEnd()},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.map;this._applyMapHandlers(e,this.props),this._applyDomHandlers(e,this.props),e.behaviors.on("actionStart",this._onActionStart),e.behaviors.on("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.on("inertiaStart",this._onInertiaStart),e.behaviors.drag.on("dragStart",this._onDragStart),e.behaviors.drag.on("dragEnd",this._onDragEnd)),e.container.addEventListener("touchmove",this._onContainerTouchMove),e.container.addEventListener("pointermove",this._onContainerPointerMove)},n.componentDidUpdate=function(e){this._applyMapHandlers(this.props.map,this.props,e),this._applyDomHandlers(this.props.map,this.props,e)},n.componentWillUnmount=function(){var e=this.props.map;this._applyMapHandlers(e,void 0,this.props),this._applyDomHandlers(e,void 0,this.props),e.behaviors.offSingle("actionStart",this._onActionStart),e.behaviors.offSingle("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.offSingle("inertiaStart",this._onInertiaStart),e.behaviors.drag.offSingle("dragStart",this._onDragStart),e.behaviors.drag.offSingle("dragEnd",this._onDragEnd)),e.container.removeEventListener("touchmove",this._onContainerTouchMove),e.container.removeEventListener("pointermove",this._onContainerPointerMove)},n.render=function(){return null},t}(o.PureComponent);function u(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return[t.clientX,t.clientY]}return[e.clientX,e.clientY]}t.b=Object(i.b)({shouldWait:!0})(c)},function(e,t,n){"use strict";var r=n(6),o=Object(r.a)(Object(r.a)({},{airport:"airports",area:"district",country_fallback:"fallback-toponym",house:"building",metro_station:"fallback-toponym",railway_station:"railway-station",other:"fallback-toponym",region:"fallback-toponym",station:"bus-station",vegetation:"park",unknown:"fallback-toponym"}),{barbershop:"hairdressers",gasoline:"gas-station",hotel:"hotels","phone-shop":"mobile-phones",restaurant:"restaurants",shop:"supermarket","shopping-mall":"malls",pharmacy:"medicine"}),i={medicine:"medicine-tr",drugstores:"drugstores-tr","emergency-point":"emergency-point-tr","currency-exchange":"currency-exchange-tr"},a={banks:"banks-ru","currency-exchange":"currency-exchange-ru"},s=n(172),c=n.n(s),u=n(173),l=n.n(u),d=n(174),p=n.n(d),f=n(175),v=n.n(f),m=n(176),h=n.n(m),g=n(177),b=n.n(g),y=n(178),_=n.n(y),E=n(179),w=n.n(E),S=n(180),O=n.n(S),C=n(181),j=n.n(C),R=n(182),k=n.n(R),I=n(183),x=n.n(I),M=n(184),T=n.n(M),P=n(185),N=n.n(P),D=n(186),L=n.n(D),z=n(187),A=n.n(z),U=n(188),F=n.n(U),B=n(189),H=n.n(B),q=n(190),W=n.n(q),G=n(191),V=n.n(G),Y=n(192),Z=n.n(Y),K=n(193),$=n.n(K),X=n(194),J=n.n(X),Q=n(195),ee=n.n(Q),te=n(196),ne=n.n(te),re=n(197),oe=n.n(re),ie=n(198),ae=n.n(ie),se=n(199),ce=n.n(se),ue=n(200),le=n.n(ue),de=n(201),pe=n.n(de),fe=n(202),ve=n.n(fe),me=n(203),he=n.n(me),ge=n(204),be=n.n(ge),ye=n(205),_e=n.n(ye),Ee=n(206),we=n.n(Ee),Se=n(207),Oe=n.n(Se),Ce=n(208),je=n.n(Ce),Re=n(209),ke=n.n(Re),Ie=n(210),xe=n.n(Ie),Me=n(211),Te=n.n(Me),Pe=n(212),Ne=n.n(Pe),De=n(213),Le=n.n(De),ze=n(214),Ae=n.n(ze),Ue=n(215),Fe=n.n(Ue),Be=n(216),He=n.n(Be),qe=n(217),We=n.n(qe),Ge=n(218),Ve=n.n(Ge),Ye=n(219),Ze=n.n(Ye),Ke=n(220),$e=n.n(Ke),Xe=n(221),Je=n.n(Xe),Qe=n(222),et=n.n(Qe);n.d(t,"b",(function(){return ot})),n.d(t,"a",(function(){return rt})),n.d(t,"c",(function(){return it}));var tt={"apteki-favicon":["favicon.svg"],favicon:["favicon.svg"],masstransit:["aero-24.svg","aeroexpress-24.svg","aeroexpress-stop-14.svg","aeroexpress-stop-24.svg","aeroexpress-stop-38.svg","bus-24.svg","bus-frame-14.svg","bus-frame-24.svg","bus-frame-38.svg","bus-placemark-24.svg","bus-placemark-38.svg","bus-stop-14.svg","bus-stop-24.svg","bus-stop-38.svg","cable-24.svg","cable-stop-14.svg","cable-stop-24.svg","cable-stop-38.svg","funicular-24.svg","funicular-stop-14.svg","funicular-stop-24.svg","funicular-stop-38.svg","minibus-24.svg","minibus-frame-14.svg","minibus-frame-24.svg","minibus-frame-38.svg","minibus-placemark-24.svg","minibus-placemark-38.svg","minibus-stop-14.svg","minibus-stop-24.svg","minibus-stop-38.svg","railway-24.svg","railway-frame-14.svg","railway-frame-24.svg","railway-frame-38.svg","railway-placemark-24.svg","railway-placemark-38.svg","railway-station-24.svg","railway-stop-14.svg","railway-stop-24.svg","railway-stop-38.svg","suburban-24.svg","suburban-stop-14.svg","suburban-stop-24.svg","suburban-stop-38.svg","train-24.svg","tramway-24.svg","tramway-frame-14.svg","tramway-frame-24.svg","tramway-frame-38.svg","tramway-placemark-24.svg","tramway-placemark-38.svg","tramway-stop-14.svg","tramway-stop-24.svg","tramway-stop-38.svg","trolleybus-24.svg","trolleybus-frame-14.svg","trolleybus-frame-24.svg","trolleybus-frame-38.svg","trolleybus-placemark-24.svg","trolleybus-placemark-38.svg","trolleybus-stop-14.svg","trolleybus-stop-24.svg","trolleybus-stop-38.svg","underground-14.svg","underground-24.svg","underground-adana-14.svg","underground-adana-24.svg","underground-almaty-14.svg","underground-almaty-24.svg","underground-ankara-14.svg","underground-ankara-24.svg","underground-athens-14.svg","underground-athens-24.svg","underground-baku-14.svg","underground-baku-24.svg","underground-barcelona-14.svg","underground-barcelona-24.svg","underground-berlin-14.svg","underground-berlin-24.svg","underground-bucharest-14.svg","underground-budapest-14.svg","underground-budapest-24.svg","underground-bursa-14.svg","underground-bursa-24.svg","underground-dnipro-14.svg","underground-dnipro-24.svg","underground-dubai-14.svg","underground-ekaterinburg-14.svg","underground-ekaterinburg-24.svg","underground-helsinki-14.svg","underground-helsinki-24.svg","underground-istanbul-14.svg","underground-istanbul-24.svg","underground-izmir-14.svg","underground-izmir-24.svg","underground-kazan-14.svg","underground-kazan-24.svg","underground-kharkiv-14.svg","underground-kharkiv-24.svg","underground-kiev-14.svg","underground-kiev-24.svg","underground-kyiv-14.svg","underground-kyiv-24.svg","underground-lisbon-14.svg","underground-lisbon-24.svg","underground-london-14.svg","underground-london-24.svg","underground-madrid-14.svg","underground-madrid-24.svg","underground-milan-14.svg","underground-minsk-14.svg","underground-minsk-24.svg","underground-moscow-14.svg","underground-moscow-24.svg","underground-moscow-mcd-14.svg","underground-nizhny-novgorod-14.svg","underground-nizhny-novgorod-24.svg","underground-novosibirsk-14.svg","underground-novosibirsk-24.svg","underground-omsk-14.svg","underground-oslo-14.svg","underground-oslo-24.svg","underground-paris-14.svg","underground-paris-24.svg","underground-praga-14.svg","underground-praga-24.svg","underground-rome-14.svg","underground-rome-24.svg","underground-saint-petersburg-14.svg","underground-saint-petersburg-24.svg","underground-samara-14.svg","underground-samara-24.svg","underground-san-francisco-14.svg","underground-santiago-14.svg","underground-santiago-24.svg","underground-sofia-14.svg","underground-stockholm-14.svg","underground-stockholm-24.svg","underground-tashkent-14.svg","underground-tashkent-24.svg","underground-tbilisi-14.svg","underground-tbilisi-24.svg","underground-tokyo-14.svg","underground-vienna-14.svg","underground-vienna-24.svg","underground-volgograd-14.svg","underground-volgograd-24.svg","underground-warsaw-14.svg","underground-warsaw-24.svg","underground-yekaterinburg-14.svg","underground-yekaterinburg-24.svg","underground-yerevan-14.svg","underground-yerevan-24.svg","underground.svg","walk-24.svg","water-24.svg","water-stop-14.svg","water-stop-24.svg","water-stop-38.svg"],"metro-favicon":["favicon.svg"],rubrics:["administration-14.svg","administration-24.svg","aeroexpress-14.svg","aeroexpress-24.svg","airfield-14.svg","airfield-24.svg","airports-14.svg","airports-24.svg","animation-14.svg","animation-24.svg","aquarium-14.svg","aquarium-24.svg","architect-bureau-14.svg","architect-bureau-24.svg","art-14.svg","art-24.svg","atm-14.svg","atm-24.svg","attraction-14.svg","attraction-24.svg","auto-14.svg","auto-24.svg","auto-parts-14.svg","auto-parts-24.svg","auto-repair-14.svg","auto-repair-24.svg","baby-shop-14.svg","baby-shop-24.svg","bakery-24.svg","banks-14.svg","banks-24.svg","banks-ru-14.svg","banks-ru-24.svg","bars-14.svg","bars-24.svg","baths-14.svg","baths-24.svg","beach-14.svg","beach-24.svg","beauty-14.svg","beauty-24.svg","beauty-shops-14.svg","beauty-shops-24.svg","beer-market-14.svg","beer-market-24.svg","bike-14.svg","bike-24.svg","bike-rent-14.svg","bike-rent-24.svg","boat-station-14.svg","boat-station-24.svg","bookstore-14.svg","bookstore-24.svg","bowling-14.svg","bowling-24.svg","buddhism-14.svg","buddhism-24.svg","building-14.svg","building-24.svg","bus-medium-14.svg","bus-medium-24.svg","bus-station-14.svg","bus-station-24.svg","bus-stop-14.svg","bus-stop-24.svg","butcher-shop-14.svg","butcher-shop-24.svg","cableway-14.svg","cableway-24.svg","cafe-14.svg","cafe-24.svg","canteen-14.svg","canteen-24.svg","car-14.svg","car-24.svg","car-park-14.svg","car-park-24.svg","car-wash-14.svg","car-wash-24.svg","catholic-church-14.svg","catholic-church-24.svg","cemetery-14.svg","cemetery-24.svg","checkpoint-14.svg","checkpoint-24.svg","childrens-camp-14.svg","childrens-camp-24.svg","childrens-playground-14.svg","childrens-playground-24.svg","christmas-bazaars-24.svg","cinemas-14.svg","cinemas-24.svg","circus-14.svg","circus-24.svg","clothes-shop-14.svg","clothes-shop-24.svg","college-14.svg","college-24.svg","concert-hall-14.svg","concert-hall-24.svg","confectionary-14.svg","confectionary-24.svg","construction-hypermarket-14.svg","construction-hypermarket-24.svg","construction-tool-14.svg","construction-tool-24.svg","country-14.svg","country-24.svg","currency-exchange-14.svg","currency-exchange-24.svg","currency-exchange-ru-14.svg","currency-exchange-ru-24.svg","currency-exchange-tr-14.svg","currency-exchange-tr-24.svg","dairy-14.svg","dairy-24.svg","dancehall-14.svg","dancehall-24.svg","dental-14.svg","dental-24.svg","district-14.svg","district-24.svg","dolmus-14.svg","dolmus-24.svg","driving-school-14.svg","driving-school-24.svg","drugstores-14.svg","drugstores-24.svg","drugstores-tr-14.svg","drugstores-tr-24.svg","dry-cleaning-14.svg","dry-cleaning-24.svg","electronics-14.svg","electronics-24.svg","emergency-14.svg","emergency-24.svg","emergency-point-tr-14.svg","emergency-point-tr-24.svg","entertainments-14.svg","entertainments-24.svg","entrance-14.svg","entrance-24.svg","equestrian-14.svg","equestrian-24.svg","exhibition-center-14.svg","exhibition-center-24.svg","factory-14.svg","factory-24.svg","fallback-14.svg","fallback-24.svg","fallback-beauty-14.svg","fallback-beauty-24.svg","fallback-civil-services-14.svg","fallback-civil-services-24.svg","fallback-common-14.svg","fallback-common-24.svg","fallback-drugstores-14.svg","fallback-drugstores-24.svg","fallback-entertainment-14.svg","fallback-entertainment-24.svg","fallback-food-drink-14.svg","fallback-food-drink-24.svg","fallback-fun-14.svg","fallback-fun-24.svg","fallback-health-14.svg","fallback-health-24.svg","fallback-hydro-14.svg","fallback-hydro-24.svg","fallback-medicine-14.svg","fallback-medicine-24.svg","fallback-outdoor-14.svg","fallback-outdoor-24.svg","fallback-services-14.svg","fallback-services-24.svg","fallback-shopping-14.svg","fallback-shopping-24.svg","fallback-toponym-14.svg","fallback-toponym-24.svg","fallback-transport-14.svg","fallback-transport-24.svg","fast-food-14.svg","fast-food-24.svg","favorite-24.svg","festival-14.svg","festival-24.svg","film-studio-14.svg","film-studio-24.svg","fire-station-14.svg","fire-station-24.svg","fireworks-24.svg","fish-store-14.svg","fish-store-24.svg","fitness-14.svg","fitness-24.svg","flower-shop-14.svg","flower-shop-24.svg","food-market-14.svg","food-market-24.svg","forest-14.svg","forest-24.svg","fountain-14.svg","fountain-24.svg","funicular-14.svg","funicular-24.svg","furniture-store-14.svg","furniture-store-24.svg","gallery-14.svg","gallery-24.svg","garage-cooperative-14.svg","garage-cooperative-24.svg","garden-14.svg","garden-24.svg","gasstation-14.svg","gasstation-24.svg","gastro-market-14.svg","gastro-market-24.svg","geyser-14.svg","geyser-24.svg","giftshop-14.svg","giftshop-24.svg","golf-14.svg","golf-24.svg","government-14.svg","government-24.svg","grass-14.svg","grass-24.svg","greengrocery-14.svg","greengrocery-24.svg","hairdressers-14.svg","hairdressers-24.svg","haulier-14.svg","haulier-24.svg","heart-14.svg","heart-24.svg","highspeed-tram-stop-14.svg","highspeed-tram-stop-24.svg","home-14.svg","home-24.svg","home-appliances-14.svg","home-appliances-24.svg","hospital-14.svg","hospital-24.svg","hostels-14.svg","hostels-24.svg","hotels-14.svg","hotels-24.svg","household-supplies-14.svg","household-supplies-24.svg","hydro-14.svg","hydro-24.svg","hypermarket-14.svg","hypermarket-24.svg","indoor-infra-elevator-disabled-14.svg","indoor-infra-elevator-disabled-24.svg","indoor-service-charging-socket-14.svg","indoor-service-charging-socket-24.svg","indoor-service-luggage-14.svg","indoor-service-luggage-24.svg","industrial-enterprise-14.svg","industrial-enterprise-24.svg","information-14.svg","information-24.svg","it-14.svg","it-24.svg","jewelry-store-14.svg","jewelry-store-24.svg","justice-14.svg","justice-24.svg","kindergarten-14.svg","kindergarten-24.svg","landmark-14.svg","landmark-24.svg","laundry-14.svg","laundry-24.svg","library-14.svg","library-24.svg","liquor-store-14.svg","liquor-store-24.svg","locality-14.svg","locality-24.svg","locker-14.svg","locker-24.svg","malls-14.svg","malls-24.svg","market-14.svg","market-24.svg","marketplace-14.svg","marketplace-24.svg","medical-14.svg","medical-24.svg","medicine-14.svg","medicine-24.svg","medicine-il-14.svg","medicine-il-24.svg","medicine-tr-14.svg","medicine-tr-24.svg","memorable-event-14.svg","memorable-event-24.svg","mobile-phones-14.svg","mobile-phones-24.svg","monument-14.svg","monument-24.svg","mosque-14.svg","mosque-24.svg","mountain-14.svg","mountain-24.svg","museum-14.svg","museum-24.svg","music-store-14.svg","music-store-24.svg","musicclub-14.svg","musicclub-24.svg","nail-studio-14.svg","nail-studio-24.svg","news-14.svg","news-24.svg","night-club-14.svg","night-club-24.svg","office-14.svg","office-24.svg","office-service-14.svg","office-service-24.svg","offline-14.svg","offline-24.svg","online-store-14.svg","online-store-24.svg","opticial-store-14.svg","opticial-store-24.svg","orthodox-church-14.svg","orthodox-church-24.svg","park-14.svg","park-24.svg","pawnshop-14.svg","pawnshop-24.svg","pedestrian-14.svg","pedestrian-24.svg","perfume-shop-14.svg","perfume-shop-24.svg","pet-playground-14.svg","pet-playground-24.svg","petshop-14.svg","petshop-24.svg","photo-14.svg","photo-24.svg","picnic-14.svg","picnic-24.svg","pier-14.svg","pier-24.svg","pizzeria-14.svg","pizzeria-24.svg","planetarium-14.svg","planetarium-24.svg","playground-14.svg","playground-24.svg","police-14.svg","police-24.svg","police-post-14.svg","police-post-24.svg","pool-hall-14.svg","pool-hall-24.svg","port-14.svg","port-24.svg","post-office-14.svg","post-office-24.svg","printing-services-14.svg","printing-services-24.svg","protestant-church-14.svg","protestant-church-24.svg","province-14.svg","province-24.svg","pub-14.svg","pub-24.svg","racing-14.svg","racing-24.svg","railway-station-14.svg","railway-station-24.svg","railway-terminal-14.svg","railway-terminal-24.svg","restaurants-14.svg","restaurants-24.svg","rezervation-14.svg","rezervation-24.svg","route-14.svg","route-24.svg","sanatorium-14.svg","sanatorium-24.svg","school-14.svg","school-24.svg","science-14.svg","science-24.svg","shoe-store-14.svg","shoe-store-24.svg","shooting-14.svg","shooting-24.svg","skating-rink-14.svg","skating-rink-24.svg","ski-resort-14.svg","ski-resort-24.svg","smile-24.svg","software-14.svg","software-24.svg","spa-14.svg","spa-24.svg","sport-14.svg","sport-24.svg","sport-school-14.svg","sport-school-24.svg","sportcenter-14.svg","sportcenter-24.svg","sports-bar-14.svg","sports-bar-24.svg","spring-14.svg","spring-24.svg","stadium-14.svg","stadium-24.svg","stage-14.svg","stage-24.svg","standpipe-14.svg","standpipe-24.svg","stationery-store-14.svg","stationery-store-24.svg","stenograffia-14.svg","stenograffia-24.svg","street-14.svg","street-24.svg","subway-fallback-14.svg","subway-fallback-24.svg","supermarket-14.svg","supermarket-24.svg","sushi-14.svg","sushi-24.svg","swimming-pool-14.svg","swimming-pool-24.svg","synagogue-14.svg","synagogue-24.svg","tableware-14.svg","tableware-24.svg","tailor-14.svg","tailor-24.svg","taxi-14.svg","taxi-24.svg","tennis-14.svg","tennis-24.svg","theatre-14.svg","theatre-24.svg","ticket-office-14.svg","ticket-office-24.svg","tire-fitting-14.svg","tire-fitting-24.svg","tram-stop-14.svg","tram-stop-24.svg","trash-14.svg","trash-24.svg","travel-agency-14.svg","travel-agency-24.svg","university-14.svg","university-24.svg","urban-leisure-house-of-culture-14.svg","urban-leisure-house-of-culture-24.svg","urban-service-nursing-room-14.svg","urban-service-nursing-room-24.svg","vet-clinic-14.svg","vet-clinic-24.svg","veterinary-14.svg","veterinary-24.svg","viewpoint-14.svg","viewpoint-24.svg","waterfall-14.svg","waterfall-24.svg","waterpark-14.svg","waterpark-24.svg","wc-14.svg","wc-24.svg","wedding-14.svg","wedding-24.svg","well-14.svg","well-24.svg","wine-14.svg","wine-24.svg","work-14.svg","work-24.svg","ya-gas-station-14.svg","ya-gas-station-24.svg","yoga-14.svg","yoga-24.svg","zoo-14.svg","zoo-24.svg"],service:["bookmark-14.svg","bookmark-list-14.svg","geolocation-14.svg","home-14.svg","home-24.svg","like-14.svg","like-24.svg","lock-24.svg","message-24.svg","my-location-14.svg","personal-14.svg","poll-24.svg","search-14.svg","search-24.svg","show-map-14.svg","web-24.svg","work-14.svg","work-24.svg"]},nt={small:14,normal:24,large:38};Ne.a,Le.a,Ae.a,Fe.a,He.a,We.a,$e.a,Je.a,et.a,Ve.a,Ze.a,T.a,N.a,L.a,A.a,F.a,H.a,ne.a,oe.a,ae.a,ce.a,le.a,pe.a,c.a,l.a,p.a,v.a,h.a,b.a,ke.a,je.a,je.a,ke.a,je.a,ke.a,W.a,V.a,Z.a,$.a,J.a,ee.a,ve.a,he.a,be.a,_e.a,we.a,Oe.a,_.a,w.a,O.a,j.a,k.a,x.a,Te.a,xe.a,xe.a,Te.a,xe.a,Te.a;function rt(e,t){var n=e.type,r=e.name,s=e.size,c=function(e,t){var n=e.toLowerCase().replace(/\s+/g,"-");return"ru"===t.lang&&a[n]?a[n]:"tr"===t.lang&&i[n]?i[n]:o[n]||n}(r,t);if(!c)return null;var u=c+"-"+nt[s]+".svg";return tt[n]&&tt[n].includes(u)?t.staticHost+"static/v21/icons/"+n+"/"+u:null}function ot(e){return"//yastatic.net/s3/front-maps-static/constructor-icons/"+e+".svg"}function it(e){var t=e.lang;return["ru","uk","kk"].includes(t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(6),o=n(26),i=n.n(o),a=n(498),s=n(23),c=n(22);function u(e){var t=e.split("?"),n=t[0],o=t[1],a=void 0===o?"":o;return n+"?"+i.a.stringify(Object(r.a)(Object(r.a)({},i.a.parse(a)),{},{from:"mapframe"}))}function l(e,t,n){var o,i=c.s({routePoints:e,viaIndexes:[],travelMode:t.travelMode||"auto",activeRouteIndex:0,routerResponse:null,detailedIndex:0,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}},startNavigationInApp:!0},n),l=e.some((function(e){return!e.coords}))?null===(o=e.find((function(e){return e.coords})))||void 0===o?void 0:o.coords:void 0;return u(s.a(s.k("/",Object(r.a)({ll:l?Object(a.a)(l):void 0,z:l?14:void 0},i)),n))}},function(e,t,n){var r=n(144),o=n(145),i=o;i.v1=r,i.v4=o,e.exports=i},function(e,t,n){"use strict";var r=n(124),o=n(4),i=n(2),a=n(44),s=n.n(a),c=n(20),u=n(499),l=n(27),d=n(259),p=n(72),f={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"},v=Object(p.a)(d.b,Object(c.b)({shouldWait:!0})),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=void 0,n._handlers={},n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,o){e&&"feature"===e.type&&e.feature.id===n._id&&r(o,t)},n.props.map.events.on(f[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(f[e],t,n._handlers[e]),delete n._handlers[e]},n._id=t.id||s.a.v4(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(f).forEach((function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])}))},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:l.d.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((!Object(u.a)(e.drawingStyle,n.drawingStyle)||!Object(u.a)(e.geometry,n.geometry))&&n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId));Object.keys(f).forEach((function(o){n[o]===e[o]&&r===t._dataSourceId||(e[o]&&t._removeHandler(o,r),n[o]&&t._addHandler(o,t._dataSourceId,n[o]))}))},n.componentWillUnmount=function(){var e=this;Object.keys(this._handlers).forEach((function(t){return e._removeHandler(t,e._dataSourceId)})),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},Object(r.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||l.d.DEFAULT_GRAPHICS}}]),t}(i.PureComponent);t.a=v(m)},,,function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"i",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return i})),n.d(t,"k",(function(){return g}));var r=n(26),o=(n(500),/ymapsbm1:\/\/route\/(\w+)/);function i(e){return!!e&&e.startsWith("ymapsbm1://org?")}function a(e){return e&&i(e)?v(e).oid:void 0}function s(e){return e.startsWith("ymapsbm1://pin?")}function c(e){return!!e&&e.startsWith("ymapsbm1://transit/stop?")}function u(e){return e&&c(e)?v(e).id:void 0}function l(e){return!!e&&e.startsWith("ymapsbm1://transit/line?")}function d(e){return i(e)||s(e)||c(e)}function p(e){return e.startsWith("ymapsbm1://geo?")}function f(e){return i(e)||s(e)||c(e)||p(e)}function v(e){return r.parse(e.split("?")[1])}function m(e){return"ymapsbm1://transit/stop?"+r.stringify({id:e})}function h(e){return"direct"===e.type?"direct-"+(e.direct.url||e.coordinates):"collection"===e.type?"collection-"+e.alias+"-"+e.analyticsId:e.uri}function g(e){return function(e){if(e){return{pedestrian:"pedestrian",transit:"masstransit",bicycle:"bicycle",driving:"auto"}[(e.match(o)||[])[1]]}}(e)?e:void 0}},function(e,t,n){"use strict";var r=n(95);t.a=function(e){return null==e?"":Object(r.a)(e)}},function(e,t,n){"use strict";var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.a=function(e){return r.test(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(8),o=n(13);function i(e,t){return Object(r.a)(Object(r.a)({},e),{geometry:e.geometry&&a(e.geometry,t)})}function a(e,t){switch(e.type){case"Point":return Object(r.a)(Object(r.a)({},e),{coordinates:t(e.coordinates)});case"LineString":return Object(r.a)(Object(r.a)({},e),{coordinates:e.coordinates.map(t)});case"MultiLineString":return Object(r.a)(Object(r.a)({},e),{coordinates:e.coordinates.map((function(e){return e.map(t)}))});case"Polygon":return Object(r.a)(Object(r.a)({},e),{coordinates:e.coordinates.map((function(e){return e.map(t)}))});case"MultiPolygon":return Object(r.a)(Object(r.a)({},e),{coordinates:e.coordinates.map((function(e){return e.map((function(e){return e.map(t)}))}))});default:Object(o.c)(new Error("Unexpected geometry type: ".concat(e.type)))}}function s(e){var t;return"FeatureCollection"===e.type?(t=[]).concat.apply(t,e.features.map((function(e){return s(e)}))):[e]}function c(e){"string"!=typeof e.id&&Object(o.c)(new Error("Feature or collection id must be a string"))}},function(e,t,n){"use strict";var r=n(4),o=(n(161),n(2)),i=n(3),a=n(5),s=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){return this.props.children},t}(o.PureComponent),c=n(102),u=n(7),l=Object(a.a)("hover-hint"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._target=null,n._showTimerId=0,n._hide=function(){window.clearTimeout(n._showTimerId),n._showTimerId=0,n.setState({isShown:!1})},n._onPopupClose=function(){n._hide()},n._onMouseEnter=function(){n._showTimerId||n.props.isDisabled||(n._showTimerId=window.setTimeout((function(){return n.setState({isShown:!0})}),n.props.delay||200))},n._onMouseLeave=function(){n._hide()},n._onClick=function(){(void 0===n.props.hideOnClick||n.props.hideOnClick)&&n._hide()},n._renderPopup=function(){var e=n.props,t=e.isAir?"air":"help",r=Boolean(!e.isDisabled&&(n.state.isShown||e.force));return o.createElement(c.a,{isShown:r,position:e.position,offset:e.offset,type:t,onScroll:e.onScroll||"reposition",getTarget:function(){return n._target||null},onClose:n._onPopupClose,className:e.className,showArrow:e.showArrow,arrowOffset:e.arrowOffset},o.createElement("div",{className:l({type:t,size:e.size||"m"})},e.text))},n.state={isShown:Boolean(t.isInitialShown)},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._target&&(this._target.addEventListener("mouseenter",this._onMouseEnter),this._target.addEventListener("mouseleave",this._onMouseLeave),this._target.addEventListener("click",this._onClick))},n.componentWillUnmount=function(){this._target&&(this._target.removeEventListener("mouseenter",this._onMouseEnter),this._target.removeEventListener("mouseleave",this._onMouseLeave),this._target.removeEventListener("click",this._onClick)),window.clearTimeout(this._showTimerId),this._showTimerId=0},n.componentDidUpdate=function(e){!e.isDisabled&&this.props.isDisabled&&this.state.isShown&&(window.clearTimeout(this._showTimerId),this._showTimerId=0,this.setState({isShown:!1}))},n.render=function(){var e=this,t=this.props;return o.createElement(o.Fragment,null,o.createElement(s,{ref:function(t){return e._target=t?i.findDOMNode(t):null}},t.children),this._renderPopup())},t}(o.Component);t.a=Object(u.b)(d)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(74),o=n(115),i={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function a(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},i=null==n.additionalDigits?2:Object(r.a)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a=s(e),p=c(a.date,i),f=p.year,v=p.restDateString,m=u(v,f);if(isNaN(m))return new Date(NaN);if(m){var h,g=m.getTime(),b=0;if(a.time&&(b=l(a.time),isNaN(b)))return new Date(NaN);if(a.timezone){if(h=d(a.timezone),isNaN(h))return new Date(NaN)}else h=Object(o.a)(new Date(g+b)),h=Object(o.a)(new Date(g+b+h));return new Date(g+b+h)}return new Date(NaN)}function s(e){var t,n={},r=e.split(i.dateTimeDelimeter);if(i.plainTime.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],i.timeZoneDelimeter.test(n.date)&&(n.date=e.split(i.timeZoneDelimeter)[0],t=e.substr(n.date.length,e.length))),t){var o=i.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function c(e,t){var n,r=i.YYY[t],o=i.YYYYY[t];if(n=i.YYYY.exec(e)||o.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=i.YY.exec(e)||r.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}function u(e,t){if(null===t)return null;var n,r,o,a;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=i.MM.exec(e))return r=new Date(0),h(t,o=parseInt(n[1],10)-1)?(r.setUTCFullYear(t,o),r):new Date(NaN);if(n=i.DDD.exec(e)){r=new Date(0);var s=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=m(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(n=i.MMDD.exec(e)){r=new Date(0),o=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return h(t,o,c)?(r.setUTCFullYear(t,o,c),r):new Date(NaN)}if(n=i.Www.exec(e))return g(t,a=parseInt(n[1],10)-1)?p(t,a):new Date(NaN);if(n=i.WwwD.exec(e)){a=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return g(t,a,u)?p(t,a,u):new Date(NaN)}return null}function l(e){var t,n,r;if(t=i.HH.exec(e))return b(n=parseFloat(t[1].replace(",",".")))?n%24*36e5:NaN;if(t=i.HHMM.exec(e))return b(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*36e5+6e4*r:NaN;if(t=i.HHMMSS.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var o=parseFloat(t[3].replace(",","."));return b(n,r,o)?n%24*36e5+6e4*r+1e3*o:NaN}return null}function d(e){var t,n,r;if(t=i.timezoneZ.exec(e))return 0;if(t=i.timezoneHH.exec(e))return y(r=parseInt(t[2],10))?(n=36e5*r,"+"===t[1]?-n:n):NaN;if(t=i.timezoneHHMM.exec(e)){r=parseInt(t[2],10);var o=parseInt(t[3],10);return y(r,o)?(n=36e5*r+6e4*o,"+"===t[1]?-n:n):NaN}return 0}function p(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}var f=[31,28,31,30,31,30,31,31,30,31,30,31],v=[31,29,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}function h(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=m(e);if(r&&n>v[t])return!1;if(!r&&n>f[t])return!1}return!0}function g(e,t,n){return!(t<0||t>52)&&(null==n||!(n<0||n>6))}function b(e,t,n){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}function y(e,t){return null==t||!(t<0||t>59)}},function(e,t,n){"use strict";function r(e){return Math.PI/180*e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(4),o=(n(167),n(2)),i=n(5),a=Object(i.a)("resize-listener"),s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._measurer=null,t._onResize=function(e){t.props.onResize(e)},t._onIframeLoad=function(){t._measurer.contentWindow.addEventListener("resize",t._onResize)},t._iframeRef=function(e){t._measurer=e},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this._measurer;e.contentWindow?this._onIframeLoad():e.addEventListener("load",this._onIframeLoad)},n.componentWillUnmount=function(){var e=this._measurer;e&&(e.removeEventListener("load",this._onIframeLoad),e.contentWindow&&e.contentWindow.removeEventListener("resize",this._onResize))},n.render=function(){return o.createElement("iframe",{className:a(),tabIndex:-1,ref:this._iframeRef})},t}(o.Component);t.a=s},function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(12),o=n(63),i=0,a=50*o.a,s=10*o.a,c=i-s,u=a+s;function l(e,t){return r.areFuzzyEqual(e.worldCenter,t.worldCenter)&&e.zoom===t.zoom&&e.azimuth===t.azimuth&&e.tilt===t.tilt}},,,,function(e,t,n){"use strict";var r=n(19),o=n(2);t.a=function(e){var t=function(t,n){return o.createElement(e,Object(r.a)({},t,{forwardedRef:n||void 0}),t.children)};return o.forwardRef(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=Math.PI/180,o=180/Math.PI},,,,,function(e,t,n){"use strict";var r=n(29);n(55);n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var o=["january","february","march","april","may","june","july","august","september","october","november","december"];function i(e,t){return{april:"апреля",august:"августа",december:"декабря",february:"февраля",january:"января",july:"июля",june:"июня",march:"марта",may:"мая",november:"ноября",october:"октября",september:"сентября"}[o[e]]}function a(e,t,n){void 0===n&&(n={});var a,s=r.e(r.d(t)),c={day:e.getDate(),month:n.isShortMonth?(a=e.getMonth(),{april:"апр",august:"авг",december:"дек",february:"февр",january:"янв",july:"июля",june:"июня",march:"марта",may:"мая",november:"нояб",october:"окт",september:"сент"}[o[a]]):i(e.getMonth()),year:e.getFullYear()};return(void 0!==n.isShortDate?n.isShortDate:e.getFullYear()===s.getFullYear())?(function(params){return params.day+" "+params.month;})(c):(function(params){return params.day+" "+params.month+" "+params.year;})(c)}function s(e,t){return a(e,t)+", "+function(e){var t=e.toTimeString().split(" ")[0],n=r.g(t);if(!n)return"";return""+r.h(n)}(e)}},,,,,,function(e,t,n){"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return 180/Math.PI*e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(4),o=n(2),i=n(3),a=n(499),s=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getContainer=function(){var e=n.props;return e.containerRef?e.containerRef.current||void 0:e.selector?window.document.querySelector(e.selector)||void 0:window.document.body},n._updateContainer=function(){var e=n._getContainer();e!==n.state.container&&n.setState({container:e})},n.state={},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateContainer()},n.componentDidUpdate=function(e){Object(a.a)(e,this.props)||this._updateContainer()},n.render=function(){var e=this.state;return e.container?i.createPortal(this.props.children,e.container):null},t}(o.Component);t.a=s},function(e,t,n){"use strict";var r=n(4),o=n(2),i=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;window.addEventListener(e.type,e.listener,e.options)},n.componentWillUnmount=function(){var e=this.props;window.removeEventListener(e.type,e.listener,e.options)},n.render=function(){return null},t}(o.Component);t.a=i},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s}));var r=n(8),o=256,i=130,a=32,s=function(e){if("tile"===e.type){var t=Object(r.a)({},e),n=e;return n.raster&&(t.raster=Object(r.a)({},e.raster)),n.vector&&(t.vector=Object(r.a)({},e.vector)),t}return Object(r.a)({},e)}},,,,,,,,,,function(e,t){var n,r=Object({}).crypto||Object({}).msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}},function(e,t,n){"use strict";function r(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(4),o=n(2),i=n(293),a=n(93),s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t._listener=void 0,t._attachListener=function(){var e;t._listener=Object(i.a)(t.props.eventHandler,null!==(e=t.props.throttleWait)&&void 0!==e?e:512),t._unsubscribe=t.props.addListener(t._listener)},t._unattachListener=function(){var e;t._unsubscribe(),null===(e=t._listener)||void 0===e||e.cancel()},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._attachListener()},n.componentDidUpdate=function(e){e.eventHandler!==this.props.eventHandler&&(this._unattachListener(),this._attachListener())},n.componentWillUnmount=function(){this._unattachListener()},n.render=function(){return null},t}(o.PureComponent);t.a=Object(a.b)(s)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(2);var r=n(53);function o(){return o}var i=Object(r.a)("scroll",{addListener:o,getScrollableNode:function(){return null},getCacheScrollPosition:function(){return null},scrollId:"",registerStickyElement:o,unregisterStickyElement:o,updateStickyElement:o,getStickyElementsOffset:function(){return 0}}),a=i.connect,s=i.Provider;i.Context;t.b=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(294),o=(n(119),function(){return{events:{transitionEnd:i("transition"),animationEnd:i("animation")},styles:{transform:s("transform"),transition:s("transition"),userSelect:s("user-select")},cssStyles:{transform:a("transform"),transformOrigin:a("transform-origin")},has:{touch:"ontouchstart"in window||Boolean(window.navigator.maxTouchPoints),retinaDisplay:window.devicePixelRatio>1,printColorAdjust:null!==c("printColorAdjust"),snapAlign:null!==c("scrollSnapAlign"),objectFit:null!==c("objectFit")}}});function i(e){var t=c(e);return t?t+Object(r.a)(e)+"End":null!==t?e+"end":null}function a(e){var t=c(e);return t?"-"+t+"-"+e:null!==t?e:null}function s(e){var t=c(e);return t?t+u(e):null!==t?e:null}function c(e){var t=window.document.createElement("div");return void 0!==t.style[e]?"":void 0!==t.style["webkit"+u(e)]?"webkit":void 0!==t.style["Moz"+u(e)]?"Moz":void 0!==t.style["ms"+u(e)]?"ms":null}function u(e){return e.split("-").map((function(e){return Object(r.a)(e)})).join("")}},function(e,t,n){"use strict";var r=n(71),o=n(120),i=n(39),a=n(60),s=r.a?r.a.prototype:void 0,c=s?s.toString:void 0;t.a=function e(t){if("string"==typeof t)return t;if(Object(i.a)(t))return Object(o.a)(t,e)+"";if(Object(a.a)(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.992c0-.537.448-.992 1-.992.556 0 1 .444 1 .992V11h5.008c.537 0 .992.448.992 1 0 .556-.444 1-.992 1H13v5.008c0 .537-.448.992-1 .992-.556 0-1-.444-1-.992V13H5.992C5.455 13 5 12.552 5 12c0-.556.444-1 .992-1H11V5.992z" fill="currentColor"/></svg>'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 12a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z" fill="currentColor"/></svg>'},,,,,function(e,t,n){"use strict";var r=n(6),o=n(76),i=n(4),a=(n(163),n(165),n(2)),s=n(5),c=n(77),u=n(3),l=[],d=function(e,t){var n=e.target,r=t.node,o=t.callback,i=t.stopPropagation,a=t.getExcludedNodes;if(v(r,n))return!i;var s=a&&a();if(s&&(s=Array.isArray(s)?s:[s]).some((function(e){return v(e,n)})))return!i;return o(e),!i},p=function(e){for(var t=l.length-1;t>=0;t--){if(!d(e,l[t]))break}},f=function(e,t){0===l.length&&(window.document.addEventListener("mousedown",p,!0),window.document.addEventListener("touchstart",p,!0));var n=Object(r.a)({node:e},t);return l.push(n),function(){return e=n,void(0===(l=l.filter((function(t){return e!==t}))).length&&(window.document.removeEventListener("mousedown",p,!0),window.document.removeEventListener("touchstart",p,!0)));var e}};function v(e,t){return e===t||e.contains(t)}var m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.callback,n=e.stopPropagation,r=e.getExcludedNodes,o=u.findDOMNode(this);o instanceof Element&&(this._unsubscribe=f(o,{callback:t,stopPropagation:n,getExcludedNodes:r}))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return a.Children.only(this.props.children)},t}(a.Component),h=n(78),g=27,b=44,y=["INPUT","SELECT","TEXTAREA"],_=[],E=function(e,t){var n=e.keyCode,r=e.target.tagName,o=t.handlers,i=t.stopPropagation,a=o.find((function(e){return e.key===n})),s=y.includes(r);return!a||!a.allowInEditable&&s?!(a||i):(a.callback(e),e.preventDefault(),!1)},w=function(e){for(var t=_.length-1;t>=0;t--){if(!E(e,_[t]))break}},S=function(e){e.keyCode!==b&&w(e)},O=function(e){e.keyCode===b&&w(e)},C=function(e,t){0===_.length&&(window.document.addEventListener("keydown",S),window.document.addEventListener("keyup",O));var n={handlers:e,stopPropagation:t};return _.push(n),function(){return e=n,void(0===(_=_.filter((function(t){return e!==t}))).length&&(window.document.removeEventListener("keydown",S),window.document.removeEventListener("keyup",O)));var e}},j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.stopPropagation,n=e.handlers,r=Array.isArray(n)?n.slice():[n];this._unsubscribe=C(r,Boolean(t))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return null},t}(a.Component),R=n(57),k=n(92),I=n(118),x=n(293),M=n(15),T=n(170),P=n.n(T),N=Object(s.a)("popup"),D={bottom:{vertical:!0,bottom:!0,center:!0},"bottom-right":{vertical:!0,bottom:!0,right:!0},"bottom-left":{vertical:!0,bottom:!0,left:!0},"right-bottom":{horizontal:!0,right:!0,bottom:!0},right:{horizontal:!0,right:!0,middle:!0},"right-top":{horizontal:!0,right:!0,top:!0},top:{vertical:!0,top:!0,center:!0},"top-right":{vertical:!0,top:!0,right:!0},"top-left":{vertical:!0,top:!0,left:!0},left:{horizontal:!0,left:!0,middle:!0},"left-bottom":{horizontal:!0,left:!0,bottom:!0},"left-top":{horizontal:!0,left:!0,top:!0}},L=[],z=function(e){function t(t){var n;return(n=e.call(this,t)||this)._arrow=void 0,n._popup=a.createRef(),n._popupSize=void 0,n._observer=void 0,n._repositionThrottled=void 0,n._getArrowDimensions=function(){if("tooltip"===n.props.type)return{diagonal:24,height:12};var e=n._arrow?10:0,t=Math.round(e*Math.sqrt(2));return{diagonal:t,height:t/2}},n._getPopupSize=function(){var e=n._popup.current.getBoundingClientRect(),t=n.props.getTarget(),r=n.props.isDropdown&&t?t.getBoundingClientRect().width:e.width;return{width:Math.round(r),height:Math.round(e.height)}},n._getTargetSize=function(){var e=n.props.getTarget();if(e instanceof HTMLElement)return{width:e.offsetWidth,height:e.offsetHeight};if(e&&"getBBox"in e){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:0,height:0}},n._getTargetRect=function(){var e=n.props.getTarget();if(!e)return{top:0,right:0,bottom:0,left:0};var t=n._getTargetSize(),r=e.getBoundingClientRect(),o={top:r.top+A(),left:r.left+U()};return{top:o.top,right:o.left+t.width,bottom:o.top+t.height,left:o.left}},n._isTargetVisible=function(e,t){var r=t.top,o=t.right,i=t.bottom,a=t.left;if(!n.props.checkTargetVisibility)return!0;var s=a+(o-a)/2,c=r+(i-r)/2,u=window.document.elementFromPoint(s,c);return e.contains(u)},n._reposition=function(){var e=n.props,t=e.getTarget();if(e.isShown&&n._popup.current&&t){var r=n._getTargetRect();if(n._isTargetVisible(t,r)){var o=(e.offset?e.offset.main:0)+3,i=e.offset?e.offset.side:0,a=function(){var e=window.document.documentElement,t=U(),n=A(),r=e.clientWidth,o=e.clientHeight,i=Math.max(e.scrollHeight,o)-o;n>i&&(n=i);return{top:n,right:t+r,bottom:n+o,left:t}}(),s=n._getPopupSize(),c=n._getArrowDimensions(),u=!n._popupSize||n._popupSize.width!==s.width||n._popupSize.height!==s.height;n.props.onSizeChange&&u&&n.props.onSizeChange(s),n._popupSize=s;var l,d,p,f=-c.height,v=c.height/2,m=s.width*s.height,h=null,g=[];g=g.concat(n.props.position||"bottom"),e.restrictPosition||(g=g.concat(Object.keys(D)));for(var b=0;b<g.length;b++){var y=g[b],_=D[y],E={top:0,right:0,bottom:0,left:0},w={top:"auto",right:"auto",bottom:"auto",left:"auto"},S=void 0,O=e.arrowOffset||0,C=(e.positionOffsets||{})[y]||{main:0,side:0};if(_.horizontal){_.left?(E.left=r.left-s.width-c.height-o+C.main,w.right=f,S="left"):_.right&&(E.left=r.right+c.height+o+C.main,w.left=f,S="right"),_.middle?E.top=(r.top+r.bottom-s.height)/2+i+C.side:_.top?E.top=Math.max(r.bottom,(r.top+r.bottom+c.height)/2)+v-s.height-i+C.side:_.bottom&&(E.top=Math.min(r.top,(r.top+r.bottom-c.height)/2)-v+i+C.side);var j=(r.top+r.bottom-c.diagonal)/2-E.top+i+C.side+O;w.top=Math.min(Math.max(0,j),s.height-c.diagonal)}else if(_.vertical){_.top?(E.top=r.top-s.height-c.height-o+C.main,w.bottom=f,S="top"):_.bottom&&(E.top=r.bottom+c.height+o+C.main,w.top=f,S="bottom"),_.center?E.left=(r.left+r.right-s.width)/2+i+C.side:_.left?E.left=Math.max(r.right-s.width,(r.left+r.right+c.height)/2)+v-s.width-i+C.side:_.right&&(E.left=Math.min(r.left,(r.left+r.right-c.height)/2)-v+i+C.side);var R=(r.left+r.right-c.diagonal)/2-E.left+i+O+C.side;w.left=Math.min(Math.max(0,R),s.width-c.diagonal)}E.bottom=E.top+s.height,E.right=E.left+s.width;var k=(l=E,d=a,p=void 0,p=Math.max(0,Math.min(l.right,d.right)-Math.max(l.left,d.left))*Math.max(0,Math.min(l.bottom,d.bottom)-Math.max(l.top,d.top)),Math.round(p));if(e.isMinLeftZero&&E.left<0&&_.vertical&&("number"==typeof w.left&&(w.left+=E.left),E.left=0),(!h||k>h.square)&&(h={popupPos:{left:E.left,top:E.top},arrowPos:w,square:k,mainPos:S}),k===m)break}var I=h.popupPos,x={left:Math.floor(I.left),top:Math.floor(I.top)};n.props.isDropdown&&(x.width=n._getTargetSize().width);var M=I.top>0?a.bottom-I.top:void 0;n.setState({style:x,arrowStyle:h.arrowPos,position:h.mainPos,maxContentHeight:e.skipMaxHeight?void 0:M,isShown:!0,isTargetVisible:!0})}else n.setState({isTargetVisible:!1})}},n._onClose=function(e,t){n.props.onClose&&n.props.onClose({reason:t,event:e})},n._onClickOutside=function(e){n.props.isShown&&n._onClose(e,"click-outside")},n._onWindowChange=function(e){n._applyScrollEvent(e)},n._onScroll=function(e,t){t&&n._applyScrollEvent(t)},n._applyScrollEvent=function(e){n.props.isShown&&(n.props.onScroll&&"reposition"!==n.props.onScroll?n._onClose(e,"scroll"):n._repositionThrottled())},n._onEsc=function(e){n.props.isShown&&n._onClose(e,"esc")},n._onShow=function(){L.includes(Object(o.a)(n))||n.props.ninjaMode||L.push(Object(o.a)(n));var e=n._getPopupSize();n.state.isShown&&n._popupSize.width===e.width&&n._popupSize.height===e.height||n._reposition()},n._onHide=function(){L=L.filter((function(e){return e!==Object(o.a)(n)})),n.setState({style:{top:0,left:0},isShown:!1})},n._onHideEnd=function(){n._onHide(),n.props.onHideEnd&&n.props.onHideEnd()},n._getExcludedNodes=function(){var e=n.props,t=e.getExcludedNodes,r=e.hideOnTargetClick,o=e.getTarget,i=[],a=t&&t();a&&(i=i.concat(a));var s=r?null:o();return s&&(i=i.concat(s)),i},n._renderPopup=function(){var e=n.props,t=n.state,o=t.isTargetVisible?"visible":"hidden",i=e.noPointerEvents?"none":"auto",s=Object(r.a)({zIndex:e.zIndex,visibility:o,pointerEvents:i},t.style),c=e.type||"normal",u=N({type:c,position:t.position,dropdown:e.isDropdown,"full-height":e.fullHeight})+(e.className?" "+e.className:""),l=t.maxContentHeight?{maxHeight:t.maxContentHeight}:{};return a.createElement("div",{className:u,style:s,ref:n._popup,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},void 0===e.showArrow||e.showArrow?a.createElement("div",{className:N("arrow",{"arrow-type":e.arrowType}),style:t.arrowStyle,ref:function(e){return n._arrow=e||void 0}},"tooltip"!==c||e.arrowType?null:a.createElement(M.a,{className:N("arrow-icon"),url:P.a})):null,a.createElement("div",{className:N("content",{"full-height":e.fullHeight}),style:l},e.children),e.repositionOnContentResize?a.createElement(R.a,{onResize:n._repositionThrottled}):null,a.createElement(j,{handlers:{key:g,callback:n._onEsc,allowInEditable:!0}}))},n._repositionThrottled=Object(x.a)(n._reposition,50),n.state={style:{top:0,left:0},arrowStyle:{top:"auto",right:"auto",bottom:"auto",left:"auto"},position:"bottom",isShown:!1,isTargetVisible:!t.checkTargetVisibility},n}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._observer="IntersectionObserver"in window?new IntersectionObserver((function(){e._repositionThrottled()})):void 0,this.props.checkTargetVisibility&&this._repositionThrottled();var t=this.props.getTarget();t&&this._observer&&this._observer.observe(t)},n.componentDidUpdate=function(e){this.props!==e&&this.props.isShown&&this._repositionThrottled()},n.componentWillUnmount=function(){var e=this;L=L.filter((function(t){return t!==e})),this._repositionThrottled.cancel(),this._observer&&this._observer.disconnect()},n.render=function(){return a.createElement(c.a,null,a.createElement(I.a,{onShow:this._onShow,onHideEnd:this._onHideEnd},this.props.isShown?a.createElement(m,{callback:this._onClickOutside,getExcludedNodes:this._getExcludedNodes},this._renderPopup()):null),a.createElement(h.a,{type:"resize",listener:this._onWindowChange,options:!0}),a.createElement(k.a,{eventHandler:this._onScroll,throttleWait:0}),a.createElement(h.a,{type:"orientationchange",listener:this._onWindowChange,options:!0}),a.createElement(h.a,{type:"layout-change",listener:this._onWindowChange}))},t}(a.Component);function A(){return window.document.documentElement.scrollTop||window.document.body.scrollTop}function U(){return window.document.documentElement.scrollLeft||window.document.body.scrollLeft}z.isShown=function(){return L.length>0};t.a=z},function(e,t,n){"use strict";var r=n(245),o=n(30);var i=n(67),a=n(258),s=n(133),c=n(87);function u(e,t){return[Object(a.a)(e[0],t),Object(a.a)(e[1],t)]}n(292);var l=n(257);n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f}));function d(e,t,n,i,c){void 0===i&&(i=!0);var u=e.center,l=e.zoom,d=e.span,p=e.bounds,f=b(n,t);if(!l){var h=p||function(e){var t=e.center,n=e.span,i=Math.min(Math.max(t[1]*Math.PI/180,-Math.PI/2+o.i),Math.PI/2-o.i),a=Math.max(Math.min(n[1],180),0),s=a*Math.PI/180,c=o.j*Math.log(Math.tan(i/2+Math.PI/4)),u=Math.exp(2*c/o.j),l=(u+1)*Math.tan(Math.min(Math.max(s/2,-Math.PI/2+o.i),Math.PI/2-o.i)),d=-u,p=Math.max(l*l-4*d,0),f=(-l+Math.sqrt(p))/2*1,v=2*(Math.atan(f)-Math.PI/4)*180/Math.PI,m=n[0]/2;return[[Object(r.a)(t[0]-m),v],[Object(r.a)(t[0]+m),v+a]]}({center:u,span:d});l=function(e,t,n,r){void 0===r&&(r=0);var o=Object(s.a)(e,0),i=Math.max(Math.abs(o[1][0]-o[0][0]),1e-10),a=Math.max(Math.abs(o[1][1]-o[0][1]),1e-10),c=Math.min(Math.max(0,Math.min(g(t.width/i),g(t.height/a))),23);return n?Math.floor(c+r+1e-10):Math.round(100*c)/100}(h,f,i,c),u=function(e){return function(e,t,n){var r=Object(s.a)(e,t),o=r[0],i=o[0],c=o[1],u=r[1],l=u[0],d=u[1];return Object(a.a)([(i+l-(n[1]-n[3]))/2,(c+d-(n[0]-n[2]))/2],t)}(e,23,[0,0,0,0])}(h)}return{center:u,zoom:l,span:d=m(p=v(u,l,f)),bounds:p}}function p(e){var t=[e.center[0],e.center[1]],n=e.size,r=b({width:n.x,height:n.y},e.margin),o=v(t,e.zoom,r),i=m(o);return{center:t,zoom:e.zoom,span:i,bounds:o}}function f(e,t){var n=e.query,r=l.b,o=parseFloat(n.azimuth)||0,i=parseFloat(n.tilt);return{azimuth:o,tilt:i&&t>=r?i:l.a}}function v(e,t,n){var r=Object(i.a)(e,t),o=r[0],s=r[1],c=[[o-n.width/2,s+n.height/2],[o+n.width/2,s-n.height/2]];return[Object(a.a)(c[0],t),Object(a.a)(c[1],t,!1)]}function m(e){var t=e[0],n=t[0],r=t[1],o=e[1],i=o[0],a=o[1];return[Math.abs(i-n),Object(c.a)(a,r,r+360)-r]}function h(e,t){var n=Object(s.a)(e,23),r=Object(s.a)(t,23);return u([[Math.min(n[0][0],r[0][0]),Math.min(n[0][1],r[0][1])],[Math.max(n[1][0],r[1][0]),Math.max(n[1][1],r[1][1])]],23)}function g(e){return Math.log(e)*Math.LOG2E}function b(e,t){return{width:Math.max(e.width-(t?t[1]+t[3]:0),1),height:Math.max(e.height-(t?t[0]+t[2]:0),1)}}},function(e,t,n){"use strict";var r=n(73),o=n(6),i=n(498),a=n(56),s=n(75);var c=n(494),u=n(36),l=n(33),d=["origin"],p="",f={fetch:function(e,t){return Object(u.a)("search",{query:m(e,t)},t).then((function(e){return p=e.requestId,e}))},batchFetch:function(e,t){var n={requestQueries:e.map((function(e){return m(e,t)}))};return Object(u.a)("search/batch",{body:n},t).then((function(e){var t,n=null===(t=e.find((function(e){return Boolean(e)})))||void 0===t?void 0:t.requestId;return n&&(p=n),e}))},fetchSearchResult:function(e,t,n){if(void 0===n&&(n={}),"poi"===e.from){if(e.uri)return f.loadPoiByUri(e.uri,t,n).then((function(t){return Object(o.a)(Object(o.a)({},t),{},{items:t.items.map((function(t,n){return Object(o.a)(Object(o.a)({},t),{},{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})}))})}));if(e.coordinates)return f.loadPoiByCoordinates(e.coordinates,t,n).then((function(t){if(l.i(e.hotspotProperties)){var n=t.items[0],r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri};t.items=[r]}return t}))}if("whatshere"===e.from)return f.loadWhatshere(e,t);var r=Object(o.a)(Object(o.a)({},e),{},{count:1,searchType:"TEXT"});return r.uri&&(r.mode="uri"),f.fetch(r,t)},fetchCategoryIcons:function(e,t){var n={ll:e.ll,lang:t.lang,priorityOrder:e.priorityOrder,extendedParams:t.experiments.menuParams};return Object(u.a)("search/categoryIcons",{query:n},t)},prepareChainSearchRequest:function(e,t){return f.fetch({count:1,kind:"locality",text:Object(i.a)(e.center,{reverse:!0}),origin:"chain-city"},t).then((function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var o=function(e){var t=e[0][1],n=[e[1][0]-e[0][0],e[1][1]-t],r=Math.tan(Object(a.a)(t+90)/2),o=Math.tan(Object(a.a)(n[1])/2),i=Math.max((-r*r-r*o)/(r*o-1),0),c=.5*Math.log(i),u=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,Object(s.a)(u)],span:n}}(r);n.center=o.center,n.span=o.span}return n}))},loadPoiByCoordinates:function(e,t,n){return void 0===n&&(n={}),f.fetch({text:Object(i.a)(e,{reverse:!0}),count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:v(t)},t)},loadPoiByUri:function(e,t,n){return void 0===n&&(n={}),f.fetch({mode:"uri",uri:e,count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:v(t)},t)},loadWhatshere:function(e,t){var n=e.origin,o=Object(r.a)(e,d);return f.fetch({pin:!0,text:Object(i.a)(o.coordinates,{reverse:!0}),zoom:o.zoom,span:[.001,.001],count:1,origin:n||"poi",addBuildingGeometry:e.addGeometry},t).then((function(e){var t=e.items[0];return t?("poi"===n&&(t.displayCoordinates=t.coordinates),e):null})).catch((function(){return null}))}};function v(e){return e.search.snippets.filter((function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e}))}function m(e,t){var n=e.clientId||"maps",r=e.origin?n+"-"+e.origin:n,a={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:r,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch,menuParams:t.experiments.menuParams};return e.addBuildingGeometry&&(a.search_geometry="2"),e.sortOrigin&&(a.sort_origin=e.sortOrigin.join()),e.center&&(a.ll=e.center.join()),e.span&&(a.spn=e.span.join()),e.bbox&&(a.bbox=e.bbox.join("~")),e.snippets?a.snippets=e.snippets:a.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(a.snippets=a.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(a.snippets=a.snippets.concat("pin_priority/1.x")),a.snippets=a.snippets.join(),e.direct&&(a=Object(o.a)(Object(o.a)({},a),t.advert.direct.params)),e.pin&&(a.geocoder_pin=1),e.type&&(a.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some((function(t){return Object(c.a)(e.bounds,t)}))&&(a.business_rll=e.routeCoordinates.map((function(e){return Object(i.a)(e,{fractionDigits:5})})).join("~")),e.clientUsecase&&(a.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(a.suggest_reqid=e.suggestReqid),e.serpId&&(a.serpid=e.serpId),(e.parentReqId||p||t.searchPreloadedResults)&&(a.parent_reqid=e.parentReqId||p||t.searchPreloadedResults.requestId),e.geoWhere&&(a.geowhere=[].concat(e.geoWhere).reverse().join()),e.businessMode&&(a.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(a.business_show_closed=e.businessShowClosed?1:0),Object(o.a)(Object(o.a)(Object(o.a)({},a),e.rawParams),function(e){var t=Object(o.a)({},e.experiments.geoSearchParams||{});e.experiments.ui.centralBankCollaboration&&(t.search_experimental_business_show_exp_features="cbrf");var n=e.experiments.boxes;n&&(t["test-buckets"]=n);return Object.keys(e.query).forEach((function(n){n.startsWith("search_")&&(t[n]=e.query[n])})),t}(t))}t.a=f},function(e,t,n){"use strict";var r=function(e){return e.split("")},o=n(50),i="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",d="(?:"+a+"|"+s+")"+"?",p="[\\ufe0e\\ufe0f]?"+d+("(?:\\u200d(?:"+[c,u,l].join("|")+")[\\ufe0e\\ufe0f]?"+d+")*"),f="(?:"+[c+a+"?",a,u,l,i].join("|")+")",v=RegExp(s+"(?="+s+")|"+f+p,"g");var m=function(e){return e.match(v)||[]};t.a=function(e){return Object(o.a)(e)?m(e):r(e)}},function(e,t,n){"use strict";var r=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};t.a=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=["overview","menu","prices","inside","posts","gallery","reviews","edadeal","related","chain","hotels-booking","events","realty","features","infrastructure"],o=["overview","services","inside","attractions"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},function(e,t,n){"use strict";var r={};t.a=function(e){if(e in r)return r[e];var t=window.document.createElement("script");return t.type="text/javascript",t.charset="utf-8",e.includes("//")&&!e.startsWith(window.location.origin)&&(t.crossOrigin="anonymous"),t.src=("file:"===window.location.protocol&&e.startsWith("//")?"http:":"")+e,t.async=!0,r[e]=new Promise((function(e,n){t.onload=function(){t.onload=function(){return null},t.onerror=t.onload,e()},t.onerror=function(){t.onload=function(){return null},t.onerror=t.onload,n(new Error("Failed to load "+t.src))};var r=window.document.getElementsByTagName("head")[0];r.insertBefore(t,r.lastChild)})),r[e]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(146),o=n(56),i=n(87),a=n(30),s=n(88),c=n(91);function u(e){return Math.abs(e-Object(c.a)(e)*Math.PI/2)<a.i?Object(c.a)(e)*Math.PI/2:Math.atan((1-a.b)*Math.tan(e))}function l(e,t,n){return function(o){var i=Object(r.a)(e,t,n*o);return{point:i.endPoint,direction:i.endDirection}}}function d(e,t,n){if(e===t||e[0]===t[0]&&e[1]===t[1]){var r=[1,1];return{startPoint:e,startDirection:r,endPoint:t,endDirection:r,distance:0,pathFunction:l(e,r,0)}}e[1]=Object(s.a)(e[1]),t[1]=Object(s.a)(t[1]);var d,p,f,v=Object(o.a)(e[1]),m=Object(o.a)(t[1]),h=Object(o.a)(t[0]-e[0]),g=u(v),b=u(m),y=h,_=y,E=0,w=0;if(0===v&&0===m){var S=Object(i.a)(t[0]-e[0],n?-360:-180,n?360:180);f=[(p=[S>0?1:-1,0])[0],p[1]],w=2*Math.PI*a.j/360*Math.abs(S)}else{var O=void 0,C=void 0,j=void 0,R=void 0,k=void 0,I=void 0,x=void 0;do{O=Math.sqrt(Math.pow(Math.cos(b)*Math.sin(y),2)+Math.pow(Math.cos(g)*Math.sin(b)-Math.sin(g)*Math.cos(b)*Math.cos(y),2)),C=Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos(y),k=n?2*Math.PI-Math.atan2(O,C):Math.atan2(O,C),j=Math.cos(g)*Math.cos(b)*Math.sin(y)/Math.sin(k),R=1-Math.pow(j,2),I=Math.cos(k)-2*Math.sin(g)*Math.sin(b)/R,x=a.b/16*R*(4+a.b*(4-3*R)),y=Math.min(Math.max(h+(1-x)*a.b*j*(k+x*Math.sin(k)*(I+x*Math.cos(k)*(2*I*I-1))),-2*Math.PI),2*Math.PI),d=Math.abs(_-y),_=y,E++}while(d>a.i&&E<10);var M=R*(a.j*a.j-a.l*a.l)/(a.l*a.l),T=1+M*(4096+M*(M*(320-175*M)-768))/16384,P=M*(256+M*(M*(74-47*M)-128))/1024,N=P*Math.sin(k)*(I+.25*P*(Math.cos(k)*(2*I*I-1)-1/6*P*I*(4*Math.sin(k)*Math.sin(k)-3)*(4*I*I-3))),D=Math.atan2(Math.cos(b)*Math.sin(y),Math.cos(g)*Math.sin(b)-Math.sin(g)*Math.cos(b)*Math.cos(y)),L=Math.atan2(Math.cos(g)*Math.sin(y),-Math.sin(g)*Math.cos(b)+Math.cos(g)*Math.sin(b)*Math.cos(y));w=a.l*T*(k-N),n&&(D-=Object(c.a)(D-Math.PI)*Math.PI,L-=Object(c.a)(L-Math.PI)*Math.PI),p=[Math.sin(D),Math.cos(D)],f=[Math.sin(L),Math.cos(L)]}return{startPoint:e,startDirection:p,endPoint:t,endDirection:f,distance:w,pathFunction:l(e,p,w)}}},function(e,t,n){"use strict";var r=n(76),o=n(4),i=n(2),a=n(3),s=n(94),c=function(e){function t(t){var n;return(n=e.call(this,t)||this)._node=null,n._getNode=function(){var e=a.findDOMNode(Object(r.a)(n));return e instanceof Element?e:null},n._addListeners=function(e){Object(s.a)().events.animationEnd&&e.addEventListener(Object(s.a)().events.animationEnd,n._onHideAnimationEnd),Object(s.a)().events.transitionEnd&&e.addEventListener(Object(s.a)().events.transitionEnd,n._onHideAnimationEnd)},n._removeListeners=function(e){Object(s.a)().events.animationEnd&&e.removeEventListener(Object(s.a)().events.animationEnd,n._onHideAnimationEnd),Object(s.a)().events.transitionEnd&&e.removeEventListener(Object(s.a)().events.transitionEnd,n._onHideAnimationEnd),e.classList.remove("_animation-hide")},n._onHideAnimationEnd=function(e){var t=e.currentTarget;n._removeListeners(t),n._node=null,n.setState({content:null},n.props.onHideEnd)},n.state={content:t.children},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.children&&this.setState({content:this.props.children},this.props.onShow)},n.componentDidUpdate=function(e){var t=this.props.children;if(t)t!==e.children&&(this._node&&(this._removeListeners(this._node),this._node=null),this.setState({content:t},this.state.content?void 0:this.props.onShow));else{var n=this._getNode();n&&(this._addListeners(n),this._node=n,n.classList.add("_animation-hide")),this.props.onHideStart&&this.props.onHideStart()}},n.componentWillUnmount=function(){this._node&&this._removeListeners(this._node)},n.render=function(){return this.state.content},t}(i.Component);t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(169),o=n.n(r),i=n(69);function a(e){var t=function(e){var t,n,r=null!==(t=null===(n=e.szm)||void 0===n?void 0:n.value.split(":"))&&void 0!==t?t:[],o=r[0],i=r[2];if(o&&i){var a=i.split("x"),s=a[0],c=a[1],u=Number(o.replace("_",".")),l=Number(s),d=Number(c);if(!(isNaN(u)||isNaN(l)||isNaN(d)))return{devicePixelRatio:u,viewport:{width:l,height:d}}}}(e);if(t)return{display:t}}function s(e){var t=i.a.get("yp",e);return t?a(o.a.parseYpCookie(t)):void 0}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t,n){"use strict";t.a=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){"use strict";function r(e,t,n){var r=t[0],o=t[1],i=n[0]-r,a=n[1]-o,s=i*i+a*a,c=0;0!==s&&(c=((e[0]-r)*i+(e[1]-o)*a)/s,c=Math.max(0,Math.min(1,c)));var u=r+c*i,l=o+c*a,d=e[0]-u,p=e[1]-l;return Math.sqrt(d*d+p*p)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(13),o={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}};function i(e){if("function"==typeof e)return e;if("string"==typeof e)return e in o||Object(r.c)(new Error("Unexpected timing function used: ".concat(e))),i(o[e]);var t=e,n=t.p1,a=t.p2,s=3*n.x,c=3*n.y,u=3*(a.x-2*n.x),l=3*(a.y-2*n.y),d=3*(n.x-a.x)+1,p=3*(n.y-a.y)+1;function f(e){return d*Math.pow(e,3)+u*Math.pow(e,2)+s*e}function v(e){return s+e*(2*u+3*e*d)}return function(e){return function(e){return p*Math.pow(e,3)+l*Math.pow(e,2)+c*e}(function(e){var t,n=e,r=0;for(;r<5&&(t=f(n)-e,!(Math.abs(t)<.001));)n-=t/v(n),r++;return n}(e))}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),o=n(47);function i(e){var t=function(t,n,r,i){var u=e.replace("{{x}}",String(t)).replace("{{y}}",String(n)).replace("{{z}}",String(r)).replace("{{scale}}","1").replace(/\{\{d\|(\d+)\}\}/,(function(e,o){return String((t+n+r)%Number(o)+1)}));return Object(o.a)({url:u,signal:i}).then((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return[]}return!e||e.error&&404===e.error.code?[]:e.data.features.map((function(e){var t=e.properties.HotspotMetaData.RenderedGeometry;return{type:"rendered",feature:c(e),geometry:"Polygon"===t.type?a(t):s(t)}}))}))};return t.template=e,t}function a(e){return{type:"Polygon",coordinates:e.coordinates.map((function(e){return e.map((function(e){return{x:e[0],y:e[1]}}))}))}}function s(e){return{type:"MultiPolygon",coordinates:e.coordinates.map((function(e){return e.map((function(e){return e.map((function(e){return{x:e[0],y:e[1]}}))}))}))}}function c(e){var t,n=e.properties.URIMetaData,o=null===(t=e.properties.HotspotMetaData)||void 0===t?void 0:t.id;return{type:"Feature",id:o?String(o):"",geometry:e.geometry,properties:Object(r.a)(Object(r.a)({},e.properties),{},{uri:(n&&n.URIs[0]||{}).uri})}}},,,,,,,function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}n.d(t,"a",(function(){return o}))},,,function(e,t,n){"use strict";var r=n(114),o=["overview","timetable","reviews"],i=["stops","timetable"];function a(e){if("services"!==e&&"attractions"!==e)return function(e){return r.a.includes(e||"")}(e)||l(e)?e:void 0}n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return d}));var s=["overview","chain","related","inside","infrastructure"];function c(e){return!s.includes(e)}function u(e){return Boolean(e&&"reviews"===e)}function l(e){return r.b.includes(e||"")}function d(e){return o.includes(e||"")}function p(e){return d(e)?e:void 0}function f(e){return function(e){return i.includes(e||"")}(e)?e:void 0}function v(e){return e&&"panorama"!==e?e:"overview"}function m(e){return e&&"panorama"!==e&&"gallery"!==e?e:"overview"}},,,,,,,,,function(e,t,n){var r=n(89),o=n(90),i=r(),a=[1|i[0],i[1],i[2],i[3],i[4],i[5]],s=16383&(i[6]<<8|i[7]),c=0,u=0;e.exports=function(e,t,n){var r=t&&n||0,i=t||[],l=void 0!==(e=e||{}).clockseq?e.clockseq:s,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:u+1,f=d-c+(p-u)/1e4;if(f<0&&void 0===e.clockseq&&(l=l+1&16383),(f<0||d>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,u=p,s=l;var v=(1e4*(268435455&(d+=122192928e5))+p)%4294967296;i[r++]=v>>>24&255,i[r++]=v>>>16&255,i[r++]=v>>>8&255,i[r++]=255&v;var m=d/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=l>>>8|128,i[r++]=255&l;for(var h=e.node||a,g=0;g<6;++g)i[r+g]=h[g];return t||o(i)}},function(e,t,n){var r=n(89),o=n(90);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(56),o=n(30),i=n(75),a=n(88),s=n(91);function c(e,t,n){e[1]=Object(a.a)(e[1]);var c=Object(r.a)(e[1]),u=Object(r.a)(e[0]),l=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),d=t[1]/l,p=t[0]/l,f=(1-o.b)*Math.tan(c),v=Object(s.a)(Math.cos(c))*Math.sqrt(1/(1+f*f)),m=Math.sqrt(1-v*v)*Object(s.a)(f),h=Math.atan2(f,d),g=v*p,b=(1-g)*(1+g),y=b*(o.j*o.j/(o.l*o.l)-1),_=1+y*(4096+y*(y*(320-175*y)-768))/16384,E=y*(256+y*(y*(74-47*y)-128))/1024,w=function(e){var t,r=n*e,a=r/(o.l*_),s=h+a/2,c=Math.cos(2*s),l=0,f=0;do{var y=E*Math.sin(a)*(c+.25*E*(Math.cos(a)*(2*c*c-1)-1/6*E*c*(4*Math.sin(a)*Math.sin(a)-3)*(4*c*c-3)));t=y-f,f=y,a=r/(o.l*_)+y,l++}while(Math.abs(t)>o.i&&l<10);var w=m*Math.sin(a)-v*Math.cos(a)*d,S=Math.atan2(m*Math.cos(a)+v*Math.sin(a)*d,(1-o.b)*Math.sqrt(g*g+w*w)),O=Math.atan2(Math.sin(a)*p,v*Math.cos(a)-m*Math.sin(a)*d),C=o.b/16*b*(4+o.b*(4-3*b)),j=O-(1-C)*o.b*g*(a+C*Math.sin(a)*(c+C*Math.cos(a)*(2*c*c-1))),R=Math.atan2(g,-m*Math.sin(a)+v*Math.cos(a)*d);return{point:[Object(i.a)(u+j),Object(i.a)(S)],direction:[Math.sin(R),Math.cos(R)]}},S=w(1);return{startPoint:e,startDirection:t,endPoint:S.point,endDirection:S.direction,distance:n,pathFunction:w}}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/1d977174b325461b1950173f72485cde.svg"},function(e,t,n){e.exports=n.p+"_/a58d92f3a15af43423f3154908182ee3.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";function r(e){try{return decodeURIComponent(e)}catch(t){return""}}t.parseYpCookie=function(e){return e.split("#").reduce((function(e,t){var n=t.split(".");return 3===n.length&&(e[n[1]]={value:r(n[2]),expire:new Date(1e3*Number(n[0]))}),e}),{})}},function(e,t,n){e.exports=n.p+"_/2503f975e343854348d07dd2f1359de0.svg"},function(e,t){},function(e,t,n){e.exports=n.p+"_/4456c10ecbf5d583bdeb1c3d97ef263a.svg"},function(e,t,n){e.exports=n.p+"_/8ae41e545e0b7d0739c75619398b63bf.svg"},function(e,t,n){e.exports=n.p+"_/9659bbe9fa69477d2a166dabea8ac48d.svg"},function(e,t,n){e.exports=n.p+"_/c61b31295f839ad5761ab64c54f182f0.svg"},function(e,t,n){e.exports=n.p+"_/80c1d1903a722b7ff4ece5dbb64f1f8b.svg"},function(e,t,n){e.exports=n.p+"_/55e8586f6ee1e236775eeb5de3a7d7c8.svg"},function(e,t,n){e.exports=n.p+"_/0271ba6b4fcda690a80e91f92edc7177.svg"},function(e,t,n){e.exports=n.p+"_/6ea7417d52f272d43ace9fbac9bd69d5.svg"},function(e,t,n){e.exports=n.p+"_/08a10d93b5a5ae1d7b9c8a60d1130dfe.svg"},function(e,t,n){e.exports=n.p+"_/4a64d5af9caa53bf60a0e1406b2a9ae1.svg"},function(e,t,n){e.exports=n.p+"_/0f53f20efcc0f7d4a72d06e49963a70f.svg"},function(e,t,n){e.exports=n.p+"_/4df1b18e04d91a7d6e51416fbc7d6e2c.svg"},function(e,t,n){e.exports=n.p+"_/526b632dc5485eae718acc1a54c8e8b1.svg"},function(e,t,n){e.exports=n.p+"_/c9504bc15d493d33a35111cc69ac6b8a.svg"},function(e,t,n){e.exports=n.p+"_/9f79510c62081a2e8295f974516febd3.svg"},function(e,t,n){e.exports=n.p+"_/33d6b319940be8c3dc7e251a2478efb4.svg"},function(e,t,n){e.exports=n.p+"_/3087f8a7f898f2764b4242a8185f964c.svg"},function(e,t,n){e.exports=n.p+"_/6bf7bf56354d5d2326dcb5d26ccb315f.svg"},function(e,t,n){e.exports=n.p+"_/61683eb23625df83e8aef32ee06c1e14.svg"},function(e,t,n){e.exports=n.p+"_/2fa4c0a332fe328eb31af96f6b942810.svg"},function(e,t,n){e.exports=n.p+"_/c291190c2aa1f05e02c2c78d173ec5f7.svg"},function(e,t,n){e.exports=n.p+"_/940d905012949694ddab386686eb71f9.svg"},function(e,t,n){e.exports=n.p+"_/1c6f4782634ac5951dc865bf288dd79a.svg"},function(e,t,n){e.exports=n.p+"_/94b1a3126986232a21129e7155944120.svg"},function(e,t,n){e.exports=n.p+"_/78fd7e5f9b721a273df35726afb8f72c.svg"},function(e,t,n){e.exports=n.p+"_/4ad220f6afa0590a01904bc61bd8c23a.svg"},function(e,t,n){e.exports=n.p+"_/495897677a950e88ac35bee6acd284f7.svg"},function(e,t,n){e.exports=n.p+"_/455ccd488d8c0aee406d8e8cc689c013.svg"},function(e,t,n){e.exports=n.p+"_/d1dade09981e7cd402c01e1cbcd07475.svg"},function(e,t,n){e.exports=n.p+"_/30dc3931380c1d46fd4ce2e7afaf74e0.svg"},function(e,t,n){e.exports=n.p+"_/c52e7fc4ec73e5c05bc322b50bb07b4c.svg"},function(e,t,n){e.exports=n.p+"_/b6637cb0d016f22e2676179b68ee92e6.svg"},function(e,t,n){e.exports=n.p+"_/24fb17f86df88b118167ce528daea382.svg"},function(e,t,n){e.exports=n.p+"_/952701244e8b9bee021d8e8849c931dc.svg"},function(e,t,n){e.exports=n.p+"_/0baa9c914ba9b2778c517b28921f1961.svg"},function(e,t,n){e.exports=n.p+"_/aac1f51398ef9422eb5fa8d75a0aa9e7.svg"},function(e,t,n){e.exports=n.p+"_/fb41b675b9ab147c27b75c1787065148.svg"},function(e,t,n){e.exports=n.p+"_/9f7ea1b9a3434256ba04e9331ebdffe6.svg"},function(e,t,n){e.exports=n.p+"_/0adc8779bdefa7c4b9f58f4fff819771.svg"},function(e,t,n){e.exports=n.p+"_/cb2341db6d0af3d9838b64ec9da115b6.svg"},function(e,t,n){e.exports=n.p+"_/54b25b1e22891fc5b5e44daeb089bb9f.svg"},function(e,t,n){e.exports=n.p+"_/7c30015b48e6f4b35c98ba80bb2e24e1.svg"},function(e,t,n){e.exports=n.p+"_/ef59ddb0d5aadae108503cc19c21eef5.svg"},function(e,t,n){e.exports=n.p+"_/dc75aa5ed94b5eb5368064618c4b63e4.svg"},function(e,t,n){e.exports=n.p+"_/7906239a768ecb03bb8133d1113665e0.svg"},function(e,t,n){e.exports=n.p+"_/8524a9d19c44f5446185899c40673241.svg"},function(e,t,n){e.exports=n.p+"_/5634030eb07d818066e71e0501977871.svg"},function(e,t,n){e.exports=n.p+"_/0781e4c2e4d6e030c6f7253e95446159.svg"},function(e,t,n){e.exports=n.p+"_/a70a4c329abea46a3e6b42fdc0b921dc.svg"},function(e,t,n){e.exports=n.p+"_/a36eb164dbb30d75d93941b5d14be75f.svg"},function(e,t,n){e.exports=n.p+"_/a80cd0e70d8d6c04344692ffc29e59ce.svg"},function(e,t,n){"use strict";n(224);var r=n(2),o=n(5),i=n(24),a=n(28),s=Object(o.a)("map-widget-in-maps-button");t.a=function(e){var t=r.createElement(a.a,{name:"logo",size:24,inline:!0,className:s("icon")});return r.createElement(i.a,{view:"air",size:"small",icon:t,url:e.url,target:"_blank"},e.children)}},function(e,t,n){},,function(e,t,n){"use strict";function r(e){return!1}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(8),o=n(13),i="__empty__";function a(e){var t={id:e.id,source:e.source?e.source:i,type:e.type?e.type:"default",options:{raster:{},vector:{}}};return e.options&&(e.options.raster&&(t.options.raster=Object(r.a)({},e.options.raster)),e.options.vector&&(t.options.vector=Object(r.a)({},e.options.vector))),t}var s=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;function c(e,t){var n=e.match(s);n&&0!==n[0].length||Object(o.c)(new Error("Bad string layer spec '".concat(e,"'")));for(var i=n[1],a=n[2],c=n[3],u=c?c.split(","):[],l=Object.create(null),d=0,p=u;d<p.length;d++){l[p[d]]=!0}return{id:e,source:i,type:a,options:{raster:Object(r.a)(Object(r.a)({},l),null==t?void 0:t.raster),vector:Object(r.a)(Object(r.a)({},l),null==t?void 0:t.vector)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8);function o(e){var t=e.getLayers(),n=t.topRasterLayers,o=t.mainLayers;return Object(r.c)(Object(r.c)([],n,!0),o,!0).map((function(e){return e.split(":")[0]})).filter((function(e,t,n){return t===n.indexOf(e)})).map((function(t){var n,r=e.getDataSource(t);return"tile"===(null==r?void 0:r.type)&&(null===(n=null==r?void 0:r.copyrights)||void 0===n?void 0:n.join(" "))})).filter(Boolean).join(" ")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="hidden"},,function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=(n(354),o.a.createContext(null));var a=function(e){e()};function s(){var e=a,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var c={notify:function(){},get:function(){return[]}};function u(e,t){var n,r=c;function o(){a.onStateChange&&a.onStateChange()}function i(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=s())}var a={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=c)},getListeners:function(){return r}};return a}var l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var f=n(250),v=n.n(f),m=n(357),h=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],g=["reactReduxForwardedRef"],b=[],y=[null,null];function _(e,t){var n=e[1];return[t.payload,n+1]}function E(e,t,n){l((function(){return e.apply(void 0,t)}),n)}function w(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function S(e,t,n,r,o,i,a,s,c,u){if(e){var l=!1,d=null,p=function(){if(!l){var e,n,p=t.getState();try{e=r(p,o.current)}catch(f){n=f,d=f}n||(d=null),e===i.current?a.current||c():(i.current=e,s.current=e,a.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var O=function(){return[null,0]};function C(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,c=n.methodName,l=void 0===c?"connectAdvanced":c,f=n.renderCountProp,C=void 0===f?void 0:f,j=n.shouldHandleStateChanges,R=void 0===j||j,k=n.storeKey,I=void 0===k?"store":k,x=(n.withRef,n.forwardRef),M=void 0!==x&&x,T=n.context,P=void 0===T?i:T,N=p(n,h),D=P;return function(t){var n=t.displayName||t.name||"Component",i=s(n),a=d({},N,{getDisplayName:s,methodName:l,renderCountProp:C,shouldHandleStateChanges:R,storeKey:I,displayName:i,wrappedComponentName:n,WrappedComponent:t}),c=N.pure;var f=c?r.useMemo:function(e){return e()};function h(n){var i=Object(r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=p(n,g);return[n.context,e,t]}),[n]),s=i[0],c=i[1],l=i[2],v=Object(r.useMemo)((function(){return s&&s.Consumer&&Object(m.isContextConsumer)(o.a.createElement(s.Consumer,null))?s:D}),[s,D]),h=Object(r.useContext)(v),C=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var j=C?n.store:h.store,k=Object(r.useMemo)((function(){return function(t){return e(t.dispatch,a)}(j)}),[j]),I=Object(r.useMemo)((function(){if(!R)return y;var e=u(j,C?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[j,C,h]),x=I[0],M=I[1],T=Object(r.useMemo)((function(){return C?h:d({},h,{subscription:x})}),[C,h,x]),P=Object(r.useReducer)(_,b,O),N=P[0][0],L=P[1];if(N&&N.error)throw N.error;var z=Object(r.useRef)(),A=Object(r.useRef)(l),U=Object(r.useRef)(),F=Object(r.useRef)(!1),B=f((function(){return U.current&&l===A.current?U.current:k(j.getState(),l)}),[j,N,l]);E(w,[A,z,F,l,B,U,M]),E(S,[R,j,x,k,A,z,F,U,M,L],[j,x,k]);var H=Object(r.useMemo)((function(){return o.a.createElement(t,d({},B,{ref:c}))}),[c,t,B]);return Object(r.useMemo)((function(){return R?o.a.createElement(v.Provider,{value:T},H):H}),[v,H,T])}var j=c?o.a.memo(h):h;if(j.WrappedComponent=t,j.displayName=h.displayName=i,M){var k=o.a.forwardRef((function(e,t){return o.a.createElement(j,d({},e,{reactReduxForwardedRef:t}))}));return k.displayName=i,k.WrappedComponent=t,v()(k,t)}return v()(j,t)}}function j(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function R(e,t){if(j(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!j(e[n[o]],t[n[o]]))return!1;return!0}function k(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function I(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function x(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=I(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=I(o),o=r(t,n)),o},r}}var M=[function(e){return"function"==typeof e?x(e):void 0},function(e){return e?void 0:k((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?k((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}];var T=[function(e){return"function"==typeof e?x(e):void 0},function(e){return e?void 0:k((function(){return{}}))}];function P(e,t,n){return d({},n,e,t)}var N=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var c=e(t,n,s);return a?o&&i(c,r)||(r=c):(a=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return P}}];var D=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function L(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function z(e,t,n,r,o){var i,a,s,c,u,l=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;function v(o,f){var v,m,h=!d(f,a),g=!l(o,i);return i=o,a=f,h&&g?(s=e(i,a),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):h?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):g?(v=e(i,a),m=!p(v,s),s=v,m&&(u=n(s,c,a)),u):u}return function(o,l){return f?v(o,l):(s=e(i=o,a=l),c=t(r,a),u=n(s,c,a),f=!0,u)}}function A(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=p(t,D),a=n(e,i),s=r(e,i),c=o(e,i);return(i.pure?z:L)(a,s,c,e,i)}var U=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function F(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}function H(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?C:n,o=t.mapStateToPropsFactories,i=void 0===o?T:o,a=t.mapDispatchToPropsFactories,s=void 0===a?M:a,c=t.mergePropsFactories,u=void 0===c?N:c,l=t.selectorFactory,f=void 0===l?A:l;return function(e,t,n,o){void 0===o&&(o={});var a=o,c=a.pure,l=void 0===c||c,v=a.areStatesEqual,m=void 0===v?B:v,h=a.areOwnPropsEqual,g=void 0===h?R:h,b=a.areStatePropsEqual,y=void 0===b?R:b,_=a.areMergedPropsEqual,E=void 0===_?R:_,w=p(a,U),S=F(e,i,"mapStateToProps"),O=F(t,s,"mapDispatchToProps"),C=F(n,u,"mergeProps");return r(f,d({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:O,initMergeProps:C,pure:l,areStatesEqual:m,areOwnPropsEqual:g,areStatePropsEqual:y,areMergedPropsEqual:E},w))}}var q=H();var W,G=n(3);n.d(t,"a",(function(){return q})),W=G.unstable_batchedUpdates,a=W},,,,,,function(e,t,n){"use strict";n(147),n(149);var r=n(2),o=n(5),i=n(7),a=n(24),s=n(52),c=n(18),u=n(96),l=n.n(u),d=n(97),p=n.n(d),f=(n(171),Object(o.a)("zoom-control"));t.a=Object(i.b)((function(e){return r.createElement("div",{className:f()},r.createElement("div",{className:f("group")},r.createElement("div",{className:f("zoom-in")},r.createElement(s.a,{text:"Приблизить",position:"left",isDisabled:e.disabledZoomIn,isAir:!0},r.createElement(c.a,{name:"zoom_in",logClick:!0},r.createElement(a.a,{view:"air",size:e.size||"medium",icon:r.createElement("div",{className:f("icon"),dangerouslySetInnerHTML:{__html:l.a}}),onClick:e.onZoomIn,disabled:e.disabledZoomIn,pinBottom:!0})))),r.createElement("div",{className:f("zoom-out")},r.createElement(s.a,{text:"Отдалить",position:"left",isDisabled:e.disabledZoomOut,isAir:!0},r.createElement(c.a,{name:"zoom_out",logClick:!0},r.createElement(a.a,{view:"air",size:e.size||"medium",icon:r.createElement("div",{className:f("icon"),dangerouslySetInnerHTML:{__html:p.a}}),onClick:e.onZoomOut,disabled:e.disabledZoomOut,pinTop:!0}))))))}))},,function(e,t,n){"use strict";var r=n(106),o=n(50),i=n(105),a=n(49);var s=function(e){return function(t){t=Object(a.a)(t);var n=Object(o.a)(t)?Object(i.a)(t):void 0,s=n?n[0]:t.charAt(0),c=n?Object(r.a)(n,1).join(""):t.slice(1);return s[e]()+c}}("toUpperCase");t.a=s},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return c}));var r=n(6),o=n(58);n.d(t,"a",(function(){return o.b}));var i=n(87),a=n(123),s=Object(a.a)("ease-in-out"),c=7;function u(e,t,n,o){var i=e[n];if(i!==t){var a=t-i;e.animateForDuration(400,(function(e,t){var o;return Object(r.a)(Object(r.a)({},e),{},((o={})[n]=i+a*s(t),o))})).complete.then(o,o)}}function l(e,t){u(e,Math.max(o.b,Math.min(t,o.a)),"tilt")}function d(e,t){var n=Object(i.a)(t,0,2*Math.PI);u(e,n<Math.PI?n:-2*Math.PI+n,"azimuth")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(30);function o(e,t,n){void 0===n&&(n=!0);var o=Math.pow(2,t+8),i=n?e[0]%o:e[0],a=2*Math.atan(Math.exp(Math.PI*(1-2*e[1]/o)))-.5*Math.PI;return[360*i/o-180,180*(a+r.c*Math.sin(2*a)+r.d*Math.sin(4*a)+r.e*Math.sin(6*a)+r.f*Math.sin(8*a))/Math.PI]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(53),o=Object(r.a)("mapFeatureGroup",{}),i=o.connect,a=o.Provider;t.b=i},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.385 12.42l16.01-7.614a.6.6 0 0 1 .8.8l-7.616 16.009a.6.6 0 0 1-1.11-.068l-2.005-6.011-6.01-2.004a.6.6 0 0 1-.069-1.111z" fill="currentColor"/></svg>'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10z" fill="#CCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10zm18.333 0a8.333 8.333 0 1 1-16.666 0 8.333 8.333 0 0 1 16.666 0z" fill="#4D4D4D"/><path d="M9.75 2h2.5c5.514 0 10 4.486 10 10a5.605 5.605 0 0 1-3.976-1.65c-1.018-1.018-1.68-2.104-3.22-3.906C13.694 4.857 11.818 3.25 9.75 3.25c-4.136 0-7.5 3.926-7.5 8.75C1.456 11.059 1 10.005 1 8.875 1 5.085 3.547 2 9.75 2z" fill="#4D4D4D"/></svg>'},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(4),i=n(2),a=n(103),s=n(22),c=n(23),u=n(43),l=n(500);function d(e){return e.split("~").reduce((function(e,t){var n=t.split(","),r=n[0],o=n[1],i=n[2],a=n.slice(3),s=Object(l.a)(r+","+o);return!o||a.length>0||!s||e.push({coordinates:s,color:i}),e}),[])}var p=n(31),f=n(59),v=n(256),m=Object(v.a)(Object.getPrototypeOf,Object),h=n(54),g=Function.prototype,b=Object.prototype,y=g.toString,_=b.hasOwnProperty,E=y.call(Object);var w=function(e){if(!Object(h.a)(e)||"[object Object]"!=Object(f.a)(e))return!1;var t=m(e);if(null===t)return!0;var n=_.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&y.call(n)==E};var S=function e(t,n){var o=Object(r.a)({},t);return Object.entries(n).forEach((function(t){var n=t[0],r=t[1];o.hasOwnProperty(n)&&w(r)?o[n]=e(o[n],r):o[n]=r})),o},O=n(267),C=n(26),j=n.n(C),R=n(138),k=["","permission_denied","position_unavailable","timeout"],I=function(e){this.code=void 0,this.message=void 0,this.message=e,this.code=k.indexOf(e)},x={ERROR_TYPES:k,getCurrentPosition:function(e,t,n){var r,o;return void 0===n&&(n=6e4),"denied"===(null===(r=t.query.mocks)||void 0===r?void 0:r.geolocation)?Promise.reject({code:1}):"unavailable"===(null===(o=t.query.mocks)||void 0===o?void 0:o.geolocation)?Promise.reject({code:2}):(e.logEvent("geolocation_request"),T({timeout:n}).then((function(n){var r,o,i=n.coords;e.logEvent("geolocation_success",{accuracy:i.accuracy});var a=N(null===(r=t.query.mocks)||void 0===r?void 0:r.geolocation),s=a?{accuracy:null!==(o=a.accuracy)&&void 0!==o?o:i.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:i;return M(s,t),s})).catch((function(t){throw e.logEvent("geolocation_fail",{type:x.ERROR_TYPES[t.code]}),t})))},watchPosition:function(e,t,n,o){var i,a;if(void 0===o&&(o=6e4),"denied"===(null===(i=n.query.mocks)||void 0===i?void 0:i.geolocation))return e.onError("permission_denied"),0;if("unavailable"===(null===(a=n.query.mocks)||void 0===a?void 0:a.geolocation))return e.onError("position_unavailable"),0;t.logEvent("geolocation_watch_request");var s,c,u,l,d,p,f=!1;return s=function(r){var o,i;f||(t.logEvent("geolocation_watch_success",{accuracy:r.coords.accuracy}),f=!0);var a=N(null===(o=n.query.mocks)||void 0===o?void 0:o.geolocation),s=a?{accuracy:null!==(i=a.accuracy)&&void 0!==i?i:r.coords.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:r.coords;M(s,n),e.onSuccess(s)},c=function(n){var r=x.ERROR_TYPES[n.code];f||(t.logEvent("geolocation_watch_fail",{type:r}),f=!0),e.onError(r)},u={timeout:o},(null===(l=window.yandex)||void 0===l||null===(d=l.mapsApp)||void 0===d?void 0:d.getCurrentUserLocation)?window.setInterval((function(){return T(u).then(s).catch(c)}),null!==(p=null==u?void 0:u.timeout)&&void 0!==p?p:6e4):window.navigator.geolocation.watchPosition(s,c,Object(r.a)({enableHighAccuracy:!0},u))},clearWatch:function(e){var t,n;(null===(t=window.yandex)||void 0===t||null===(n=t.mapsApp)||void 0===n?void 0:n.getCurrentUserLocation)?window.clearInterval(e):window.navigator.geolocation.clearWatch(e)},checkPermission:function(){return window.navigator.permissions?Promise.race([window.navigator.permissions.query({name:"geolocation"}).then((function(e){return e.state})),R.a(2e3)]).catch((function(){})):Promise.resolve(void 0)}};function M(e,t){e&&(e.accuracy>5e3||((new window.Image).src=t.morda.url+"/gpsave?"+C.stringify({sk:t.xscriptCsrfToken,lat:e.latitude,lon:e.longitude,precision:e.accuracy})))}function T(e){var t,n,o,i=null===(t=window.yandex)||void 0===t||null===(n=t.mapsApp)||void 0===n?void 0:n.getCurrentUserLocation;return i?Promise.race([i().then((function(e){return"string"==typeof e?JSON.parse(e):e})).catch((function(){throw new I("position_unavailable")})),R.a(null!==(o=null==e?void 0:e.timeout)&&void 0!==o?o:6e4).then((function(){throw new I("timeout")}))]):new Promise((function(t,n){return window.navigator.geolocation.getCurrentPosition(t,n,Object(r.a)({enableHighAccuracy:!0},e))}))}var P=/^\d+\.?(\d+)?,\d+\.?(\d+)?(,\d+)?$/;function N(e){if(P.test(e)){var t=e.split(",").map(Number);return{latitude:t[0],longitude:t[1],accuracy:t[2]}}}var D=x,L=n(47),z=n(36),A={getRoadEvents:function(e,t){return Object(z.a)("traffic/getRoadEvents",{query:{id:e}},t)},getRoadEvent:function(e,t){return Object(z.a)("traffic/getRoadEvent",{query:{eventId:e}},t)},getForecast:function(e,t){return Object(z.a)("traffic/getForecast",{query:{id:e}},t)},actual:{getLevel:function(e,t){return Object(z.a)("traffic/getLevelInfo",{query:{ids:e}},t)}},archive:{getMetaData:function(e,t,n){return Object(L.a)({url:n.hosts.trafficArchive+"description/traffic-light",query:{tm:t,ids:e.join(","),l:n.locale},jsonp:!0}).then((function(t){var n=(t.data.features||[]).find((function(t){var n=t.properties;return Boolean(n&&n.HotspotMetaData&&e.includes(n.HotspotMetaData.id))}));if(!n)return{level:null};var r=n.properties&&n.properties.JamsMetaData.level;return{level:void 0!==r?r:null}}))}}},U=n(7),F=n(44),B=n.n(F);function H(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}var q=n(292),W=n(32),G=n(114),V=Z(G.a),Y=Z(G.b);[].concat(V,["panorama"]),[].concat(Y,["panorama","gallery"]);function Z(e){return e.filter((function(e){return"overview"!==e}))}var K=n(33);n(244),n(226);var $=n(48);n(119);var X=n(67),J=n(258);n(135),[].concat(["ru.yandex.yandexnavi","ru.yandex.yandexnavi.inhouse","ru.yandex.yandexnavi.sandbox","ru.yandex.mobile.navigator","ru.yandex.mobile.navigator.inhouse","ru.yandex.mobile.navigator.sandbox"],["web","mobile_maps_android","mobile_maps_ios","serp","tycoon","webview_form","ugc","nyak","ru.yandex.searchplugin","ru.yandex.yandexmaps","ru.yandex.traffic","ru.yandex.traffic.sandbox","ru.yandex.traffic.inhouse","ru.yandex.yandexmaps.debug","ru.yandex.yandexmaps.pr","com.yandex.maps.TestApp","com.yandex.maps.testapp","com.yandex.maps.mrctestapp","com.yandex.maps.mrctestapp.testing","com.yandex.browser","ru.yandex.mobile","ru.yandex.mobile.search","desktop-maps","touch-maps","touch-nmaps"]);var Q=n(29),ee=n(499),te=n(255),ne=n(71),re=n(238),oe=n(39),ie=ne.a?ne.a.isConcatSpreadable:void 0;var ae=function(e){return Object(oe.a)(e)||Object(re.a)(e)||!!(ie&&e&&e[ie])};var se=function e(t,n,r,o,i){var a=-1,s=t.length;for(r||(r=ae),i||(i=[]);++a<s;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,o,i):Object(te.a)(i,c):o||(i[i.length]=c)}return i},ce=n(120),ue=n(60),le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/;var pe=function(e,t){if(Object(oe.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(ue.a)(e))||(de.test(e)||!le.test(e)||null!=t&&e in Object(t))},fe=n(233);function ve(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ve.Cache||fe.a),n}ve.Cache=fe.a;var me=ve;var he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,be=function(e){var t=me(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(he,(function(e,n,r,o){t.push(r?o.replace(ge,"$1"):n||e)})),t})),ye=n(49);var _e=function(e,t){return Object(oe.a)(e)?e:pe(e,t)?[e]:be(Object(ye.a)(e))};var Ee=function(e){if("string"==typeof e||Object(ue.a)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var we=function(e,t){for(var n=0,r=(t=_e(t,e)).length;null!=e&&n<r;)e=e[Ee(t[n++])];return n&&n==r?e:void 0},Se=n(266),Oe=n(232);var Ce=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=n[o])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var d=new Se.a;if(r)var p=r(u,l,c,e,t,d);if(!(void 0===p?Object(Oe.a)(l,u,3,r,d):p))return!1}}return!0},je=n(38);var Re=function(e){return e==e&&!Object(je.a)(e)},ke=n(234);var Ie=function(e){for(var t=Object(ke.a)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Re(o)]}return t};var xe=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var Me=function(e){var t=Ie(e);return 1==t.length&&t[0][2]?xe(t[0][0],t[0][1]):function(n){return n===e||Ce(n,e,t)}};var Te=function(e,t,n){var r=null==e?void 0:we(e,t);return void 0===r?n:r};var Pe=function(e,t){return null!=e&&t in Object(e)},Ne=n(113),De=n(143);var Le=function(e,t,n){for(var r=-1,o=(t=_e(t,e)).length,i=!1;++r<o;){var a=Ee(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Object(De.a)(o)&&Object(Ne.a)(a,o)&&(Object(oe.a)(e)||Object(re.a)(e))};var ze=function(e,t){return null!=e&&Le(e,t,Pe)};var Ae=function(e,t){return pe(e)&&Re(t)?xe(Ee(e),t):function(n){var r=Te(n,e);return void 0===r&&r===t?ze(n,e):Object(Oe.a)(t,r,3)}};var Ue=function(e){return e},Fe=n(121);var Be=function(e){return function(t){return we(t,e)}};var He=function(e){return pe(e)?Object(Fe.a)(Ee(e)):Be(e)};var qe=function(e){return"function"==typeof e?e:null==e?Ue:"object"==typeof e?Object(oe.a)(e)?Ae(e[0],e[1]):Me(e):He(e)};var We=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}();var Ge=function(e,t){return e&&We(e,t,ke.a)},Ve=n(112);var Ye=function(e,t){return function(n,r){if(null==n)return n;if(!Object(Ve.a)(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}(Ge);var Ze=function(e,t){var n=-1,r=Object(Ve.a)(e)?Array(e.length):[];return Ye(e,(function(e,o,i){r[++n]=t(e,o,i)})),r};var Ke=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},$e=n(111);var Xe=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=Object(ue.a)(e),a=void 0!==t,s=null===t,c=t==t,u=Object(ue.a)(t);if(!s&&!u&&!i&&e>t||i&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!i&&!u&&e<t||u&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!c)return-1}return 0};var Je=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var c=Xe(o[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index};var Qe=function(e,t,n){t=t.length?Object(ce.a)(t,(function(e){return Object(oe.a)(e)?function(t){return we(t,1===e.length?e[0]:e)}:e})):[Ue];var r=-1;t=Object(ce.a)(t,Object($e.a)(qe));var o=Ze(e,(function(e,n,o){return{criteria:Object(ce.a)(t,(function(t){return t(e)})),index:++r,value:e}}));return Ke(o,(function(e,t){return Je(e,t,n)}))};var et=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},tt=Math.max;var nt=function(e,t,n){return t=tt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=tt(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),et(e,this,s)}};var rt=function(e){return function(){return e}},ot=n(66),it=function(){try{var e=Object(ot.a)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),at=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:rt(t),writable:!0})}:Ue,st=Date.now;var ct=function(e){var t=0,n=0;return function(){var r=st(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(at);var ut=function(e,t){return ct(nt(e,t,Ue),e+"")},lt=n(110);var dt=function(e,t,n){if(!Object(je.a)(n))return!1;var r=typeof t;return!!("number"==r?Object(Ve.a)(n)&&Object(Ne.a)(t,n.length):"string"==r&&t in n)&&Object(lt.a)(n[t],e)};ut((function(e,t){if(null==e)return[];var n=t.length;return n>1&&dt(e,t[0],t[1])?t=[]:n>2&&dt(t[0],t[1],t[2])&&(t=[t[0]]),Qe(e,se(t,1),[])}));var pt=function(e){return(null==e?0:e.length)?se(e,1):[]},ft=n(74),vt=n(55);function mt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:Object(ft.a)(o),a=null==n.weekStartsOn?i:Object(ft.a)(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Object(vt.a)(e,n),c=s.getDay(),u=(c<a?7:0)+c-a;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s}n(115);var ht=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function gt(e,t){return{sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"}[t]}var bt=n(0);var yt=function(e,t,n){"__proto__"==t&&it?it(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},_t=Object.prototype.hasOwnProperty;var Et=function(e,t,n){var r=e[t];_t.call(e,t)&&Object(lt.a)(r,n)&&(void 0!==n||t in e)||yt(e,t,n)};var wt=function(e,t,n,r){if(!Object(je.a)(e))return e;for(var o=-1,i=(t=_e(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=Ee(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=Object(je.a)(l)?l:Object(Ne.a)(t[o+1])?[]:{})}Et(s,c,u),s=s[c]}return e};var St=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=we(e,a);n(s,a)&&wt(i,_e(a,e),s)}return i};var Ot=function(e,t){return St(e,t,(function(t,n){return ze(e,n)}))};Ct=function(e,t){return null==e?{}:Ot(e,t)},ct(nt(Ct,void 0,pt),Ct+"");var Ct;var jt=n(497);"Фактическая масса (с грузом)","т","Разрешённая максимальная масса","т","Нагрузка на ось","т","Ограничение грузоподъёмности","т","Высота","м","Ширина","м","Длина","м","Экологический класс","Евро-1","Евро-2","Евро-3","Евро-4","Евро-5","Евро-6","Движение с прицепом";function Rt(e){return{isEnabled:!1,points:("string"==typeof e.query.rl?e.query.rl:"").split("~").reduce((function(e,t){var n=Object(l.a)(t);if(!n)return e;var r=e[e.length-1],o=r?[r.coordinates[0]+n[0],r.coordinates[1]+n[1]]:n;return e.push({coordinates:o,distance:r?r.distance+Object(q.a)(o,r.coordinates):0,showBalloon:!1}),e}),[])}}var kt=n(104),It={};function xt(e,t,n){return e.uri&&e.coords?function(e,t,n,r){return Tt(e,n,r).then((function(e){return!e&&t?Mt(t,n,r):e}))}(e.uri,e.coords,t,n):e.uri?Tt(e.uri,t,n):e.value&&!e.coords?function(e,t,n){return Pt(e,(function(){return kt.a.fetch({type:["geo"],text:e,count:1,origin:n},t)}))}(e.value,t,n):e.coords?Mt(e.coords,t,n):Promise.resolve(void 0)}function Mt(e,t,n){return Pt(e.join(","),(function(){return kt.a.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:n},t)}))}function Tt(e,t,n){return Pt(e,(function(){return kt.a.fetch({uri:e,count:1,origin:n},t)}))}function Pt(e,t){return It[e]?Promise.resolve(It[e]):t().then((function(e){return e.items.length>0?e.items[0]:void 0})).then((function(t){var n;t&&(It[e]=t,Object.keys(It).length>100&&((n={})[e]=It[e],It=n));return t}))}n(301);var Nt=n(5),Dt=n(34),Lt=n(18),zt=n(40),At=n(30),Ut=n(146),Ft=n(45);function Bt(e){if(0===e.length)return[];for(var t=[e[0]],n=0,r=e[0],o=1;o<e.length;o++){var i=e[o],a=i[0]+n-r[0];if(a>360||a<-360){var s=360*Math.floor(a/360);n-=s,a-=s}a>180?n-=360:a<-180&&(n+=360);var c=[i[0]+n,i[1]];t.push(c),r=c}return t}At.j,Math.PI;var Ht=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getGeometry=function(){var e=n.props;e.radius;for(var t=Object(X.a)(e.center,2),r=Object(Ut.a)(e.center,[-1,0],e.radius).endPoint,o=H(Object(X.a)(r,2),t),i=[],a=0;a<=2*Math.PI;a+=Math.PI/40){var s=[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o];i.push(Object(J.a)(s,2))}return{type:"Polygon",coordinates:[Bt(i)]}},n.state={geometry:n._getGeometry()},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;Object(jt.a)(t.center,e.center)&&t.radius===e.radius||this.setState({geometry:this._getGeometry()})},n.render=function(){return i.createElement(Ft.a,{geometry:this.state.geometry,drawingStyle:this.props.drawingStyle})},t}(i.PureComponent),qt=n(28),Wt=n(42),Gt=Object(Nt.a)("geolocation-pin"),Vt=(zt.a.minimum,function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=Object(Wt.c)(e.config)?"map-placemark-dot-ru":"map-placemark-dot";return i.createElement(i.Fragment,null,i.createElement(Lt.a,{name:"geolocation_pin"},i.createElement(Dt.a,{coordinates:e.currentPosition,zIndex:zt.a.minimum,nonInteractive:!0},i.createElement("div",{className:Gt("placemark")},i.createElement(qt.a,{name:t,size:32})))),null)},t}(i.Component)),Yt=Object(U.b)(Vt),Zt=n(73),Kt=(n(305),n(15)),$t=n(307),Xt=n.n($t),Jt=n(308),Qt=n.n(Jt),en=["color","size","comma","caption","outline"],tn=Object(Nt.a)("map-circle-placemark"),nn=function(e){var t=e.color,n=e.size,r=void 0===n?"medium":n,o=e.comma,a=e.caption,s=e.outline,c=Object(Zt.a)(e,en);return i.createElement(Dt.a,c,i.createElement("div",{className:tn({comma:o,size:r,outline:s}),style:{color:t}},i.createElement(Kt.a,{className:tn("placemark"),url:o?Qt.a:Xt.a}),i.createElement("div",{className:tn("content")},e.children),a?i.createElement("div",{className:tn("caption")},a):null))},rn={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},on=rn.pmbl,an=function(e){return e.points?i.createElement(i.Fragment,null,e.points.map((function(e,t){var n=e.coordinates,r=e.color;return i.createElement(nn,{key:t+"_"+n.join(),coordinates:n,color:r&&r in rn?rn[r]:on,nonInteractive:!0,comma:!0})}))):null},sn=(n(309),n(124));function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ln(e,t,n){return(ln=un()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&cn(o,n.prototype),o}).apply(null,arguments)}var dn=n(94),pn=n(27),fn=n(20),vn=n(41),mn=n(57),hn=n(78),gn=n(269),bn=n(19),yn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._key="",t._applyCursor=function(){var e=t._getCursor();!t.props.src&&e&&e.startsWith("url(")||(t.props.map.container.style.cursor=_n(t.props),t._key=t._getCursor())},t._getCursor=function(){return t.props.map.container.style.cursor||""},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._applyCursor()},n.componentDidUpdate=function(){this._applyCursor()},n.componentWillUnmount=function(){this._getCursor()===this._key&&(this.props.map.container.style.cursor="")},n.render=function(){return null},t}(i.Component);function _n(e){return e.src&&e.basePoint?'url("'+e.src+'") '+e.basePoint.join(" ")+', url("'+e.src+'"), auto':e.cursor||"default"}var En=Object(fn.b)({shouldWait:!0})(Object(U.b)(yn)),wn=n(125),Sn={color:{r:1,g:68/255,b:.2,a:1}},On={lightness:-.1,saturation:1};var Cn,jn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n._updateLayer=function(e,t){var r=n.props.map;if(!r.destroyed){var o=t&&r.getDataSource(t.layer);t&&t.dataSource&&(o?e&&r.updateTileDataSource(t.layer,t.dataSource):r.addDataSource(t.layer,t.dataSource));var i=r.getLayers(),a=i.topRasterLayers,s=i.mainLayers,c=[].concat(s,a);if(e){var u=Object(pn.j)(e.layer);c=c.filter((function(e){return!u.includes(e)}))}if(t){var l,d=Object(pn.j)(t.layer);(l=c).push.apply(l,d)}r.setLayers(Object(pn.k)(c,n.props.ymaps3.EventBlockerLayer,n.props.config)),!e||!e.dataSource||t&&t.dataSource||r.removeDataSource(e.layer)}},n._getHandler=function(e){return function(t,r){var o=n.props,i=t.feature,a=!o.config.uatraits.isTouch;(o.shouldHover?o.shouldHover(i):Boolean(o.onClick))&&("onMouseEnter"===e&&(a&&o.map.setObjectHighlight(function(e){var t;return{object:e,color:(null===(t=e.properties.tags)||void 0===t?void 0:t.includes("building"))?On:Sn}}(i)),n.setState({isHover:!0})),"onMouseLeave"===e&&(a&&o.map.setObjectHighlight(void 0),n.setState({isHover:!1})));var s=o[e];s&&s(i,r)}},n.state={isHover:!1},Object.keys(vn.a).forEach((function(e){return n._handlers[e]=n._getHandler(e)})),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayer(void 0,this.props)},n.componentDidUpdate=function(e){this.props.layer===e.layer&&Object(ee.a)(e.dataSource,this.props.dataSource)||this._updateLayer(e,this.props)},n.componentWillUnmount=function(){this._updateLayer(this.props)},n.render=function(){var e=this,t=Object(pn.j)(this.props.layer);return i.createElement(i.Fragment,null,this.state.isHover?i.createElement(En,{cursor:"pointer"}):null,t.map((function(t){return i.createElement(vn.b,Object(bn.a)({key:t,layer:t},e._handlers))})))},t}(i.Component),Rn=Object(U.b)(Object(fn.b)({shouldWait:!0})(jn)),kn={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,alpha:!1,stencil:!1};function In(){try{var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("webgl",kn);if(t)return t}catch(n){}Tn()}function xn(e){if(void 0===Cn){var t=e||In();t?Cn=function(e){for(var t=!0,n=[],r=0,o=["requestAnimationFrame","Worker","URL","Blob","XMLHttpRequest","Set","Map"];r<o.length;r++){var i=o[r];window[i]||(t=!1,n.push("WindowPropertyNotExist-".concat(i)))}"function"!=typeof Math.trunc&&(t=!1,n.push("MathTrunc"));0===e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(t=!1,n.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS"));e.getExtension("OES_vertex_array_object")||(t=!1,n.push("OES_vertex_array_object"));e.getExtension("OES_standard_derivatives")||(t=!1,n.push("OES_standard_derivatives"));var a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);a&&0!==a.precision||(t=!1,n.push("Highp"));(function(e){if(!e)return!1;var t=e.createShader(e.VERTEX_SHADER);if(!t)return!1;e.shaderSource(t,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),e.compileShader(t);var n=e.createShader(e.FRAGMENT_SHADER);if(!n)return!1;e.shaderSource(n,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),e.compileShader(n);var r=e.createProgram();if(!r)return!1;e.attachShader(r,t),e.attachShader(r,n),e.bindAttribLocation(r,0,"p"),e.linkProgram(r);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(r),e.drawArrays(e.POINTS,0,1);var i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteBuffer(o),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),255===i[0]})(e)||(t=!1,n.push("TestPoints"));var s=e.getExtension("WEBGL_debug_renderer_info"),c=s&&e.getParameter(s.UNMASKED_RENDERER_WEBGL);"string"==typeof c&&c.indexOf("SwiftShader")>-1&&(t=!1,n.push("SoftwareRendering"));return{supported:t,reasonsFailed:n}}(t):Tn()}return Cn}function Mn(){return Cn?Cn.supported:window.WebGLRenderingContext?(n=navigator.userAgent,!(!(/YandexSearch\//.test(n)||/YaApp/.test(n)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(n))&&!/MiuiBrowser\//.test(n)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(n)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(n)||(t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/WebKit\/?(\d+)/i),Boolean(t&&Number(t[1])<537))||function(){var e,t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/Chrome\/(\d+)/i);return!!t&&Number(t[1])<57}())||(Tn(),!1)):(Tn(),!1);var e,t,n}function Tn(){Cn={supported:!1,reasonsFailed:["HasWebGl"]}}var Pn,Nn=n(84),Dn=n(241),Ln="undefined"==typeof window,zn=[],An=0;function Un(){Ln=!0,zn.forEach((function(e){return e()})),Pn&&Pn.disconnect()}function Fn(){var e=window.performance.now();e>2e4?Un():(An?3e3-(e-An):3e3)<=0?Un():setTimeout(Fn,1e3)}Ln||Object(Dn.a)((function(){if(!window.PerformanceLongTaskTiming||!window.performance||!window.performance.now)return void setTimeout(Un,5e3);(Pn=new window.PerformanceObserver((function(e){var t=e.getEntries().pop();t&&(An=t.startTime+t.duration)}))).observe({entryTypes:["longtask"]}),Fn()}));var Bn,Hn=function(e){Ln?e():zn.push(e)},qn=n(257),Wn=function(){return Promise.all([n.e("ymaps").then(n.bind(null,504)),n.e("ymaps").then(n.bind(null,501)),n.e("ymaps").then(n.t.bind(null,502,7))]).then((function(e){var t=e[0],n=e[1].EventBlockerLayer,o=e[2];return new Promise((function(e){return setTimeout((function(){return e([Object(r.a)(Object(r.a)({},t),{},{EventBlockerLayer:n}),o.default])}),0)}))}))},Gn=function(e,t){return Promise.all([n.e("ymaps-vector").then(n.bind(null,506)),n.e("ymaps-vector").then(n.t.bind(null,503,7))]).then((function(e){var n=e[0],r=e[1];return function(e){return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return ln(n.VectorMapEngine,[r.default,t||{},e].concat(i))}}}))},Vn=function(e){function t(t){var n;(n=e.call(this,t)||this)._isMapCreated=!1,n._ymaps3=void 0,n._loadAction=void 0,n._loadDelayStart=void 0,n._ref=i.createRef(),n._location=void 0,n._camera=void 0,n._map=void 0,n._onMapUpdateDebounced=void 0,n._filter=void 0,n._onYmaps3Load=function(e){var t=e[0],r=e[1];n._ymaps3=t,t.errorLoggerFactory((function(e){var t=new r;return t.initErrors(e),t.logError})),n._createMap()},n._handleMapLocationRequest=function(e){var t=n._map;if(n._location&&e&&t){var r=n._location,o="bounds"in e?Object(a.c)({bounds:e.bounds},n.props.margin,n._getSize(),n.props.config.uatraits.isMobile||"snap"===t.effectiveZoomRounding):void 0,i=r.center,s=r.zoom;o?i=o.center:"center"in e&&(i=e.center),o?s=o.zoom:"zoom"in e&&e.zoom&&(s=e.zoom),s===r.zoom&&Object(jt.a)(i,r.center)||t.animateCenterAndZoom(i,s,e.duration||0)}},n._createMap=function(){var e=n.props,t=n.state,r=n._isElementProvided?e.element:n._ref.current;if(r&&!n._isMapCreated&&n._ymaps3){n._isMapCreated=!0,e.config.query["disable-vector-force"]?(bt.a.set("disable_vector_force",!0),n.setState({isVectorDisabledForce:!0})):bt.a.get("disable_vector_force")&&n.setState({isVectorDisabledForce:!0});var o=e.locationRequest,i=o&&"center"in o&&o.center||e.initialLocation.center,a=o&&"zoom"in o&&o.zoom||e.initialLocation.zoom;n._location={center:i,zoom:a},n._camera=e.initialCamera||{azimuth:0,tilt:0};var s=Object(pn.h)(e.config),c=n._getMapMode(),u=n._ymaps3.YaMap,l=Object.values(pn.d),d=Object(pn.k)(l,n._ymaps3.EventBlockerLayer,e.config),p=d.topRasterLayers,f=d.mainLayers,v=new u({mode:c,element:r,center:i,zoom:a,margin:e.margin,zoomRange:e.zoomRange||{min:2,max:21},dataSources:s,topRasterLayers:p,mainLayers:f,behaviors:e.behaviors,zoomRounding:e.zoomRounding,eventObjectsFilter:e.eventObjectsFilter,disableRasterPreload:e.config.uatraits.isMobile,nonRotatableRasterSources:pn.c});if(e.initialCamera&&(e.initialCamera.azimuth||e.initialCamera.tilt)&&v.on("vectorStart",(function(){var t,n;(null===(t=e.initialCamera)||void 0===t?void 0:t.azimuth)&&Object(qn.c)(v,e.initialCamera.azimuth),(null===(n=e.initialCamera)||void 0===n?void 0:n.tilt)&&Object(qn.d)(v,e.initialCamera.tilt)})),window.yandex_map=v,v.events.clickTimeout=300,v.events.waitHotspotsTimeout=1e3,Object(dn.a)().has.touch?n._ymaps3.loadHotspotsForViewport(v):n._ymaps3.loadHotspotsByPointerPosition(v),e.vector&&e.config.isVectorEnabled&&!t.isVectorDisabledForce)if(Mn()){var m=Gn(e.config.experiments.ui),h=new Promise((function(e,t){setTimeout((function(){var n=In();n&&xn(n).supported||t(new Error("Vector is not supported")),e(n)}))}));Promise.all([m,h]).then((function(e){var t=e[0],n=e[1];v.destroyed||v.provideVectorMapEngineFactory(t(n))})).catch((function(){n.setState({isVectorSupported:!1})}))}else n.setState({isVectorSupported:!1});n._map=v,n._onMapUpdate(),n._onZoomRoundingChange(),n._onMapSizeChange(),n._addFilter(),e.onReady&&e.onReady(v),n._handleMapLocationRequest(o),n.forceUpdate()}},n._addFilter=function(){var e=n.props.getFilter;e&&(n._filter=e(n._ymaps3),n._map.addObjectFilter(n._filter))},n._onMapUpdate=function(){var e=n._map;if(!e.isInAction){var t=[e.center[0],e.center[1]];(n._location.zoom!==e.zoom||!Object(jt.a)(n._location.center,t))&&(n._location={zoom:Math.round(100*e.zoom)/100,center:t},n._onLocationChange()),n._camera.azimuth===e.azimuth&&n._camera.tilt===e.tilt||(n._camera={azimuth:e.azimuth,tilt:e.tilt},n.props.onCameraChange&&n.props.onCameraChange(n._camera))}},n._onLocationChange=function(){var e=n.props.onLocationChange;if(e){var t=Object(a.c)(n._location,n.props.margin,n._getSize()),o=t.bounds,i=t.span;e(Object(r.a)(Object(r.a)({},n._location),{},{bounds:o,span:i}))}},n._onMapSizeChange=function(){n.props.onSizeChange&&n.props.onSizeChange(n._getSize(),n._map.offset)},n._getSize=function(){var e=n._map.size;return{width:e.x,height:e.y}},n._onResize=function(){var e=n._map;e&&e.resize()},n._onDragStart=function(){n.setState({isDragged:!0})},n._onDragEnd=function(){n.setState({isDragged:!1})},n._onZoomRoundingChange=function(){n.props.onZoomRoundingChange&&n._map&&n.props.onZoomRoundingChange(n._map.effectiveZoomRounding)},n._renderLayers=function(){var e=n.props;return"satellite"===e.type?i.createElement(Rn,{layer:"sat"}):"hybrid"===e.type?i.createElement(i.Fragment,null,i.createElement(Rn,{layer:"sat"}),i.createElement(Rn,{layer:"skl",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}})):i.createElement(i.Fragment,null,i.createElement(Rn,{layer:"map",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}}),!e.config.bunker.disablePersonalizedPoi&&e.config.authorization&&e.config.hosts.tilesApi&&"vector"===n._getMapMode()?i.createElement(Rn,{layer:"personalizedPoi",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}}):null)},n.state={isDragged:!1,isVectorSupported:!0,isVectorDisabledForce:!1};var o=n.props.updateTimeout||300;return n._onMapUpdateDebounced=Object(gn.a)(n._onMapUpdate,o),"undefined"!=typeof window&&(t.delayLoad?(n._loadDelayStart=Date.now(),Object(Nn.d)("mapLoadDelay",n._loadDelayStart),Hn((function(){n._loadAction||(Object(Nn.d)("mapLoadDelayCompleted",Date.now()-n._loadDelayStart),n._loadAction=p.a.create(Wn(),{success:n._onYmaps3Load}))}))):n._loadAction=p.a.create(Wn(),{success:n._onYmaps3Load})),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._createMap()},n.componentDidUpdate=function(e){!e.delayLoad||this.props.delayLoad||this._loadAction||(Object(Nn.d)("mapLoadDelayAborted",Date.now()-this._loadDelayStart),this._loadAction=p.a.create(Wn(),{success:this._onYmaps3Load}));var t=this._map;if(!t)return this._createMap();var n=this.props;n.behaviors&&!Object(ee.a)(n.behaviors,e.behaviors)&&t.behaviors.setEnabled(n.behaviors);var r=n.locationRequest;r!==e.locationRequest&&this._handleMapLocationRequest(r),Object(ee.a)(n.margin,e.margin)||(t.setMargin(n.margin),this._onLocationChange());var o=this._getMapMode();t.setMode(o),n.getFilter!==e.getFilter&&(this._filter&&(t.removeObjectFilter(this._filter),this._filter=void 0),this._addFilter())},n.componentWillUnmount=function(){p.a.cancel(this._loadAction),this._onMapUpdateDebounced.cancel(),this._map&&this._map.destroy()},n._getMapMode=function(){var e=this.props.config.isVectorEnabled&&!this.state.isVectorDisabledForce;return this.state.isVectorSupported&&this.props.vector&&e?"vector":"raster"},n.render=function(){var e=this.props,t=this.state;return i.createElement(i.Fragment,null,this._isElementProvided?null:i.createElement("div",{className:e.className,ref:this._ref}),i.createElement(fn.a,{value:{map:this._map,ymaps3:this._ymaps3}},e.children,this._renderLayers(),i.createElement(vn.b,{onUpdate:this._onMapUpdateDebounced,onDragStart:this._onDragStart,onInertiaStart:this._onDragEnd,onDragEnd:this._onDragEnd,onResize:this._onMapSizeChange,onZoomRoundingChanged:this._onZoomRoundingChange}),this.state.isDragged?i.createElement(En,{cursor:"grabbing"}):null),i.createElement(mn.a,{onResize:this._onResize}),i.createElement(hn.a,{type:"resize",listener:this._onResize}),t.isVectorDisabledForce?i.createElement(Lt.a,{name:"disable_vector_force"}):null)},Object(sn.a)(t,[{key:"_isElementProvided",get:function(){return"element"in this.props}}]),t}(i.Component),Yn=Object(U.b)(Vn),Zn=n(72),Kn=n(140),$n=n.n(Kn),Xn=["layer"],Jn={getLayers:function(e,t){var n=(Bn=Bn||{}).requests||[],r=n.push(function(e,t){return{layerIds:e.layers,center:e.center?e.center.map((function(e){return e.toFixed(8)})).join(","):void 0,zoom:e.zoom&&Math.round(e.zoom),span:e.span?e.span.map((function(e){return e.toFixed(8)})).join(","):void 0,locale:t.locale,lang:t.lang}}(e,t))-1,o=Bn.promise||function(e){return new Promise((function(t,n){$n()((function(){var r=Bn.requests;Bn=void 0,function(e,t){return Object(z.a)("layers/info",{query:{requests:e}},t)}(r,e).then(t).catch(n)}))}))}(t);return Bn={promise:o,requests:n},o.then((function(e){return e[r]}))},getLayer:function(e,t){var n=e.layer,o=Object(Zt.a)(e,Xn);return o.zoom&&!Qn(n,o.zoom,t)?Promise.resolve(void 0):Jn.getLayers(Object(r.a)({layers:[n]},o),t).then((function(e){return e[n]}))},checkStaticZoomRange:Qn};function Qn(e,t,n){var r=n.layers[e];if(!r)return!0;var o="zoomRange"in r&&r.zoomRange;return!o||t>=o[0]&&t<=o[1]}var er=Jn,tr=Object(Zn.a)(U.b,Object(fn.b)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateDebounced=void 0,n._loadAction=void 0,n._update=function(){var e=n.props,t=e.map.getLayers(),r=t.topRasterLayers,o=t.mainLayers,i=[].concat(r,o).map((function(e){return e.split(":")[0]})),a=pn.a.filter((function(e){return i.includes(e)}));p.a.cancel(n._loadAction);var s=Object(ee.a)(a,["map"])?Promise.resolve({map:{copyrights:["© "+"Яндекс"]}}):er.getLayers({layers:a,center:e.map.center,zoom:e.map.zoom},e.config);n._loadAction=p.a.create(s,{success:n._onDataLoad})},n._onDataLoad=function(e){var t=n.props.map;Object.entries(e).forEach((function(e){var n=e[0],o=e[1];if(o){var i=t.getDataSource(n),a=Object(r.a)({},i);if("zoomRange"in o&&o.zoomRange){var s=o.zoomRange,c=s[0],u=s[1];a.zoomRange={min:c,max:u}}a.copyrights="copyrights"in o?o.copyrights:void 0,Object(ee.a)(i,a)||t.updateTileDataSource(n,a)}}))},n._updateDebounced=Object(gn.a)(n._update,500),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateDebounced()},n.componentWillUnmount=function(){this._updateDebounced.cancel(),p.a.cancel(this._loadAction)},n.render=function(){return i.createElement(vn.b,{onUpdate:this._updateDebounced})},t}(i.Component)),nr=Object(Nt.a)("map-widget-map-component"),rr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onReady=function(){window.document.body.classList.add("_map_ready"),n.setState({isReady:!0})},n.state={isReady:!1},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Yn,{className:nr(),type:e.config.mapType,initialLocation:e.location,vector:e.config.isVectorEnabled,isPoiEnabled:e.isPoiEnabled,onReady:this._onReady,locationRequest:e.locationRequest,margin:e.margin,onPoiClick:e.onPoiClick,onLocationChange:e.onLocationChange,onSizeChange:e.onSizeChange},i.createElement(tr,null),this.state.isReady?e.children:null)},t}(i.Component),or=Object(U.b)(rr);n(311);var ir=function(e){var t=null,n=null,r=!1,o=!1,i=-1;function a(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(o)return r=!0,t=c,void(n=this);e.apply(this,c),o=!0,i=window.requestAnimationFrame((function(){o=!1,r&&(r=!1,n=null,t=null,a.apply(n,t))}))}return a.scheduled=o,Object.defineProperty(a,"scheduled",{get:function(){return o}}),a.cancel=function(){window.cancelAnimationFrame(i),i=-1,o=!1,r=!1,n=null,t=null},a},ar=n(77),sr=n(237),cr=Object(fn.b)(),ur=cr(function(e){function t(t){var n;return(n=e.call(this,t)||this)._targetZoom=void 0,n._getState=function(){var e=n.props.map;if(!e)return{zoomOutIsEnabled:!1,zoomInIsEnabled:!1};var t=Math.round(100*e.zoom)/100;return{zoomOutIsEnabled:t>e.zoomRange.min,zoomInIsEnabled:t<e.zoomRange.max}},n._updateButtons=function(){n.setState(n._getState())},n._changeZoom=function(e){var t=n.props.map;if(t){var r,o=null!==(r=n._targetZoom)&&void 0!==r?r:t.zoom;n._targetZoom=o+e;var i=n._targetZoom;t.animateCenterAndZoom(t.center,n._targetZoom,200).then((function(){i===n._targetZoom&&(n._targetZoom=void 0)}))}},n._onZoomIn=function(e){e.preventDefault(),n._changeZoom(1)},n._onZoomOut=function(e){e.preventDefault(),n._changeZoom(-1)},n.state=n._getState(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.map&&this.props.map&&this._updateButtons()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(vn.b,{onUpdate:this._updateButtons,onZoomRangeChange:this._updateButtons}),i.createElement(sr.a,{onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut,disabledZoomIn:!this.state.zoomInIsEnabled,disabledZoomOut:!this.state.zoomOutIsEnabled,size:this.props.size}))},t}(i.PureComponent)),lr=(n(313),n(498)),dr=n(228),pr=Object(Zn.a)(U.b,Object(fn.b)({shouldWait:!0})),fr=Object(Nt.a)("map-copyrights"),vr=pr(function(e){function t(t){var n;return(n=e.call(this,t)||this)._rightOffset=void 0,n._update=function(){n.setState({maxWidth:n.props.map.container.offsetWidth-n._rightOffset,copyrights:Object(dr.a)(n.props.map)})},n._getAdvertItem=function(e){return!e.advertLandingUrl||e.query.embed||Object(W.g)(e)?null:{type:"advert",text:"Разместить рекламу",href:e.advertLandingUrl+"?utm_source=webmaps&utm_medium=copyright&utm_campaign=webmaps_copyright",noprint:!0}},n._getNmapsItem=function(e){var t=n.props.location;return!e.hosts.nmaps||!t||e.query.embed||Object(W.g)(e)?null:{type:"nmap",text:"Редактировать карту",href:e.hosts.nmaps+"#!/?"+j.a.stringify({ll:Object(lr.a)(t.center),z:t.zoom}),noprint:!0}},n._getTermsItem=function(e,t){return{type:t?"terms_short":"terms",text:t?"Условия":"Условия использования",href:e.agreementUrl+"?lang="+e.lang}},n._getCopyrightsItem=function(){return{type:"copyrights",text:n.state.copyrights,shrink:!0}},n._getRightHoldersItem=function(e){return{type:"right_holders",text:"Правообладатели",href:e.rightHoldersUrl+"?lang="+e.lang}},n._getSupportItem=function(e){return Object(W.g)(e)?null:{type:"support",text:"Справка",href:e.feedback.helpUrl+"?lang="+e.lang}},n._getMapsApiItem=function(e){return!e.apiManual.mapsApiUrl||Object(W.g)(e)?null:{type:"maps_api",text:"API Карт",href:e.apiManual.mapsApiUrl+"/?utm_source=mapscopyrights&utm_medium=referral&utm_campaign=b2bpromo"}},n._renderBlock=function(e,t){return i.createElement("div",{className:fr("block",{type:e})},t.map((function(e){var t=e.href?"a":"div";return i.createElement(Lt.a,{name:e.type,logClick:Boolean(e.href),key:e.type},i.createElement(t,{className:fr("item",{shrink:e.shrink,noprint:e.noprint,type:e.type}),href:e.href,target:"_blank"},e.text))})))},n._renderBlocks=function(){var e=n.props,t=e.config;return e.copyrightOnly?n._renderBlock("copyrights-only",[n._getCopyrightsItem(),n._getTermsItem(t)]):i.createElement(i.Fragment,null,n._renderBlock("copyrights",[n._getCopyrightsItem(),n._getRightHoldersItem(t)]),n._renderBlock("links",[{type:"ya",text:"© "+"Яндекс"},n._getAdvertItem(t),n._getNmapsItem(t),n._getMapsApiItem(t),n._getSupportItem(t),n._getTermsItem(t),n._getTermsItem(t,!0)].filter((function(e){return Boolean(e)}))))},n.state={maxWidth:0,copyrights:Object(dr.a)(n.props.map)},n._rightOffset=n.props.right-12,n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.copyrightOnly?"copyrights-only":"map"===e.layer?"scheme":"satellite";return i.createElement(Lt.a,{name:"map_copyrights"},i.createElement("div",{className:fr({type:t,"show-all":"covid-map"===e.config.query.embed}),style:{maxWidth:this.state.maxWidth,right:this._rightOffset}},this._renderBlocks(),i.createElement(vn.b,{onResize:this._update,onCopyrightsChange:this._update})))},t}(i.PureComponent)),mr=(n(315),n(24)),hr=n(52),gr=(n(317),function(e){var t=e.view,n=e.withoutMargin,r=e.inverse,o=Object(Nt.a)("spinner-view_"+t);return i.createElement("div",{className:o({"without-margin":n,inverse:r})},i.createElement("div",{className:o("circle")}))}),br=n(260),yr=n.n(br),_r=(n(319),Object(Nt.a)("map-geolocation-control")),Er=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._onClick=function(e){e.preventDefault(),t.props.onClick()},t._renderIcon=function(){return t.props.isLoading?i.createElement("div",{className:_r("spinner")},i.createElement(gr,{view:"small",withoutMargin:!0})):i.createElement("div",{className:_r("icon"),dangerouslySetInnerHTML:{__html:yr.a}})},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement("div",{className:_r({noprint:!0})},i.createElement(hr.a,{text:"Моё местоположение",position:"left",isAir:!0},i.createElement(Lt.a,{name:"geolocation",logClick:!0},i.createElement(mr.a,{view:"air",size:e.size||"medium",icon:this._renderIcon(),onClick:this._onClick,disabled:e.isLoading,checked:e.isChecked}))))},t}(i.Component),wr=Object(U.b)(Er);n(320),n(322),n(324);function Sr(e,t){if(void 0===t&&(t=1/0),t<1)throw new Error("Can't round to significance of "+t+".");var n=Math.round(e).toString(),r=Math.max(0,n.length-t),o=Math.round(e/Math.pow(10,r));return Number(o+new Array(r).fill("0").join(""))}function Or(e){if(e>100)return Math.round(e);var t=Math.pow(10,e>10?1:2);return Math.round(e*t)/t}var Cr=Object(Nt.a)("map-scale-line"),jr=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=function(e){var t=Object(X.a)(e.center,e.zoom),n=t[0],r=t[1],o="width"===e.dimension?1:0,i="height"===e.dimension?1:0,a=Object(J.a)([n-o*e.maxSize/2,r-i*e.maxSize/2],e.zoom),s=Object(J.a)([n+o*e.maxSize/2,r+i*e.maxSize/2],e.zoom),c=Object(q.a)(a,s),u=Sr(c,1);return{size:Math.abs(c)>1e-7?Math.round(u*e.maxSize/c):e.maxSize,distance:u}}({center:e.center,zoom:e.zoom,dimension:"width",maxSize:75}),n=t.size,r=t.distance,o={};return o.width=n+"px",i.createElement("div",{className:Cr(),style:o},i.createElement("div",{className:Cr("label")},function(e){return e>900?(function(params){return params.distance+" км";})({distance:Sr(e/1e3,2)}):(function(params){return params.distance+" м";})({distance:Sr(e,2)})}(r)),i.createElement("div",{className:Cr("line")}))},t}(i.PureComponent),Rr=Object(U.b)(jr),kr=Object(Nt.a)("map-widget-map-scale-line-view"),Ir=function(e){return i.createElement("div",{className:kr()},i.createElement(Rr,{center:e.location.center,zoom:e.location.zoom}))},xr=(n(325),n(327)),Mr=n.n(xr),Tr=Object(Nt.a)("map-widget-ruler-control-view"),Pr=function(e){return i.createElement("div",{className:Tr()},i.createElement(hr.a,{text:"Линейка",position:"left",isAir:!0},i.createElement(mr.a,{icon:i.createElement("div",{className:Tr("icon"),dangerouslySetInnerHTML:{__html:Mr.a}}),view:"air",size:"small",onClick:function(){return e.updateRuler({isEnabled:!e.isEnabled})},checked:e.isEnabled})))},Nr=(n(328),n(87));var Dr={closed:"Перекрытие движения",drawbridge:"Развод моста",reconstruction:"Дорожные работы",accident:"ДТП",police:"Камера",other:"Прочее",chat:"Прочее",danger:"Опасный участок"};function Lr(e){return e||0===e?e>=7?"red":e>=4?"yellow":"green":"gray"}var zr=n(261),Ar=n.n(zr),Ur=Object(Nt.a)("traffic-raw-icon"),Fr=Object(U.b)((function(e){var t=e.checked?Lr(e.level):"none";return i.createElement("div",{className:Ur({color:t})},i.createElement("div",{className:Ur("icon"),dangerouslySetInnerHTML:{__html:Ar.a}}),i.createElement("div",{className:Ur("text")},e.checked?e.level:null))})),Br=Object(Nt.a)("map-widget-traffic-control-view"),Hr=function(e){var t=i.createElement(Fr,{checked:e.isActive,level:e.level});return i.createElement("div",{className:Br()},i.createElement(mr.a,{onClick:e.onClick,icon:t,size:"small",view:"air"},e.hasText?"Пробки":null))},qr=(n(330),n(332),Object(Nt.a)("layout-control")),Wr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._root=i.createRef(),t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate&&e.onUpdate(e.type,{height:t,width:n})},n.render=function(){var e=this.props,t=!e.visible;return i.createElement(Lt.a,{group:!0,hidden:t},i.createElement("div",{ref:this._root,className:qr({hidden:t}),"data-type":e.type},e.children))},t}(i.Component),Gr=Object(Nt.a)("layout-control-group"),Vr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=i.createRef(),n._onResizeThrottled=void 0,n._onUpdate=function(){var e=n.props,t=n._root.current.clientHeight,r=n._root.current.clientWidth;e.height>0&&t>0||e.onUpdate(e.type,{height:t,width:r})},n._onResize=function(){n._onUpdate()},n._onResizeThrottled=ir(n._onResize),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate(e.type,{position:e.position,height:t,width:n})},n.componentDidUpdate=function(e){this.props.position!==e.position&&this.props.onUpdate(this.props.type,{position:this.props.position})},n.render=function(){var e=this.props,t=!e.visible;return i.createElement(Lt.a,{group:!0,hidden:t},i.createElement("div",{ref:this._root,className:Gr({side:e.side||"right",hidden:t,animated:e.animated}),"data-type":e.type,style:{transform:"translateY("+e.top+"px)"}},i.createElement(Wr,{type:e.type,visible:!0},e.children),i.createElement(mn.a,{onResize:this._onResizeThrottled})))},t}(i.Component),Yr=n(132);function Zr(e){for(var t,n={},o=[],i=0,a=Object(Yr.a)(e.controlsOrder);!(t=a()).done;){var s=t.value,c=s[0],u=s[1],l=0,d=e.controlGroups[c];if(d&&(0!==d[e.dimension]||u)){var p=!n[d.type];p&&(l+=d[e.dimension]+e.betweenMargin);var f=void 0;u&&e.controls&&(l+=(f=e.controls[u])?f[e.dimension]:0);var v=i+l;if(v>e.viewport+e.betweenMargin)break;p&&(n[c]=Object(r.a)({},d)),f&&(n[c][e.dimension]+=f[e.dimension],o.push(f.type)),i=v}}return{controlGroups:n,controls:o}}var Kr=function(e,t,n){var o={top:$r(n.betweenMargin),center:$r(n.betweenMargin),bottom:$r(n.betweenMargin)};e.forEach((function(e){o[e.position].height+=e.height+n.betweenMargin})),o.top.height=Math.max(o.top.height,0),o.center.height=Math.max(o.center.height,0),o.bottom.height=Math.max(o.bottom.height,0),o.top.top=n.topSizes.minTop;var i=o.top.top+o.top.height+n.betweenMargin;return o.bottom.top=Jr(n.topSizes.maxTop-o.bottom.height,i,n.topSizes.maxTop),o.center.top=Jr(n.topSizes.middle-Math.round(o.center.height/2),i,o.bottom.top-n.betweenMargin-o.center.height),e.reduce((function(e,i){var a,s=o[i.position],c=s.top,u=Math.abs(i.top-c),l=u>20&&u<300&&n.enableAnimation,d=Object(r.a)(Object(r.a)({},t[i.type]),{},{animated:l,top:c});return s.top+=i.height+n.betweenMargin,Object(r.a)(Object(r.a)({},e),{},((a={})[i.type]=d,a))}),{})};function $r(e){return{top:0,height:-e,width:-e}}function Xr(e,t){return Object.values(e).filter((function(e){return Boolean(e)})).sort((function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)}))}function Jr(e,t,n){return Math.max(Math.min(e,n),t)}var Qr=Object(Nt.a)("map-widget-layout-view"),eo=["zoom","rulers","top-controls","geolocation"],to=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],no=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],ro=[["zoom"],["top-controls"],["geolocation"]],oo=[["open-in-maps-medium"],["open-in-maps-small"],["open-in-maps-tiny"],["search"]],io=[["open-in-maps-small"]],ao=[["open-in-maps-medium"]],so=Qr("portal"),co=function(e){function t(t){var n;return(n=e.call(this,t)||this)._repositionThrottled=void 0,n._root=i.createRef(),n._getFittingBottomLayout=function(){var e,t=n.state,r=((null===(e=n._root.current)||void 0===e?void 0:e.clientWidth)||0)-305,o=Object.keys(Zr({controlsOrder:ao,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups),i=Object.keys(Zr({controlsOrder:io,viewport:r,controlGroups:t.controlGroups,betweenMargin:12,dimension:"width"}).controlGroups);return 1===o.length?["open-in-maps-medium"]:1===i.length?["open-in-maps-small"]:["open-in-maps-tiny","rulers"]},n._reposition=function(){var e,t=n.state,o=(null===(e=n._root.current)||void 0===e?void 0:e.clientHeight)||0,i=10+o,a=Jr(i,10,o),s=Math.round((i+10)/2),c=n._getFittingBottomLayout(),u=Zr({controlsOrder:oo.filter((function(e){var t=e[0];return!no.includes(t)||c.includes(t)})),viewport:o,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),l=Zr({controlsOrder:ro,viewport:o,controlGroups:t.controlGroups,betweenMargin:12,dimension:"height"}),d=Xr(u.controlGroups,to),p=Xr(l.controlGroups,eo),f=Kr(p,n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:s},enableAnimation:!0}),v=Kr(d,n.state.controlGroups,{betweenMargin:12,topSizes:{maxTop:a,minTop:10,middle:s},enableAnimation:!0}),m=[].concat(Object.keys(f),Object.keys(v)),h=Object(r.a)(Object(r.a)(Object(r.a)({},t.controlGroups),f),v);Object(ee.a)(t.controlGroups,h)&&Object(ee.a)(t.visibleControlGroups,m)||n.setState({visibleControlGroups:m,controlGroups:h})},n._onControlGroupUpdate=function(e,t){n.setState((function(n){var o;return Object(r.a)(Object(r.a)({},n),{},{controlGroups:Object(r.a)(Object(r.a)({},n.controlGroups),{},(o={},o[e]=Object(r.a)(Object(r.a)({type:e},n.controlGroups[e]),t),o))})}),n._reposition)},n._getControlGroups=function(){return[{type:"top-controls",position:"top",side:"right",children:n._renderTopControls()},{type:"zoom",position:n.state.visibleControlGroups.length<=2?"top":"center",side:"right",children:n._renderZoomControls()},{type:"geolocation",position:"center",side:"right",children:n._renderGeolocationControl()},{type:"open-in-maps-medium",position:"bottom",side:"left",children:n._renderInMaps("medium")},{type:"open-in-maps-small",position:"bottom",side:"left",children:n._renderInMaps("small")},{type:"open-in-maps-tiny",position:"bottom",side:"left",children:n._renderInMaps("tiny")},{type:"search",position:"top",side:"left",children:n.props.search.render()}]},n._renderGeolocationControl=function(){return i.createElement("div",{className:Qr("geolocation")},i.createElement(wr,{onClick:n.props.geolocation.onClick,isLoading:n.props.geolocation.isStarted,size:"small"}))},n._renderTopControls=function(){return i.createElement("div",{className:Qr("top-controls")},n._renderRuler(),n._renderTrafficControl())},n._renderTrafficControl=function(){return i.createElement(Hr,Object(bn.a)({},n.props.traffic,{hasText:!0}))},n._renderRuler=function(){return i.createElement("div",{className:Qr("ruler")},i.createElement(Pr,n.props.ruler))},n._renderInMaps=function(e){return i.createElement("div",{className:Qr("maps-links")},n.props.inMaps.render(e))},n._renderZoomControls=function(){return i.createElement("div",{className:Qr("zoom-controls")},i.createElement(ur,{size:"small"}))},n.state={visibleControlGroups:[],controlGroups:{}},n._repositionThrottled=ir(n._reposition),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._repositionThrottled()},n.render=function(){var e=this,t=this._getControlGroups();return i.createElement("div",{className:Qr()},i.createElement("div",{className:Qr("layout")},i.createElement("div",{ref:this._root,className:Qr("controls")},t.map((function(t){var n,r,o,a,s;return i.createElement(Vr,Object(bn.a)({},t,{key:t.type,visible:e.state.visibleControlGroups.includes(t.type),animated:null===(n=e.state.controlGroups[t.type])||void 0===n?void 0:n.animated,height:null!==(r=null===(o=e.state.controlGroups[t.type])||void 0===o?void 0:o.height)&&void 0!==r?r:0,top:null!==(a=null===(s=e.state.controlGroups[t.type])||void 0===s?void 0:s.top)&&void 0!==a?a:0,onUpdate:e._onControlGroupUpdate}))}))),i.createElement("div",{className:Qr("bottom-layout")},i.createElement("div",{className:Qr("copyrights")},i.createElement(vr,{right:100,copyrightOnly:!0})),i.createElement("div",{className:Qr("scale-line")},i.createElement(Ir,{location:this.props.location}))),i.createElement(mn.a,{onResize:this._repositionThrottled})),i.createElement("div",{className:so}))},t}(i.Component),uo=function(e){return i.createElement(ar.a,{selector:"."+so},e.children)},lo=Object(U.b)(co),po=(n(334),n(117));function fo(e,t,n,r,o){void 0===r&&(r=e(t)),void 0===o&&(o=e(n));var i,a,s,c=Math.PI/60,u=Math.PI/4,l=[],d=Math.abs(Object(Nr.a)(Math.atan2(r.direction[0],r.direction[1])-Math.atan2(o.direction[0],o.direction[1]),-Math.PI,Math.PI)),p=0;if(Math.abs(d-Math.PI)<1e-10){var f=[r.point[0],90*r.direction[1]],v=[o.point[0],90*r.direction[1]];l.push(f,v,o.point)}else if(d>c)if((a=Math.ceil(d/c))<u/c||n-t==0){i=(n-t)/a;for(var m=1;m<=a;m++)l.push(e(t+i*m).point)}else s=e(p=t+(i=(n-t)/2)),l=(l=l.concat(fo(e,t,p,r,s))).concat(fo(e,p,n,s,o));else l.push(o.point);return l}function vo(e){return function(e){for(var t=[e[0]],n=1;n<e.length;n++){var r=t[n-1],o=e[n];r[0]>0&&o[0]<0&&r[0]>90&&o[0]<0?t.push([o[0]+360,o[1]]):r[0]<0&&o[0]>0&&r[0]<-90&&o[0]>0?t.push([o[0]-360,o[1]]):t.push(o)}return t}(function(e,t,n){for(var r=Object(po.a)(e,t,n),o=r.pathFunction,i=r.startPoint,a=r.startDirection,s=r.endPoint,c=r.endDirection,u=[i],l=0;l<3;l++)u=u.concat(fo(o,l/3,(l+1)/3,0===l?{point:i,direction:a}:void 0,2===l?{point:s,direction:c}:void 0));return u}(e[0],e[1]))}n(336),n(338);var mo=n(102),ho=["coordinates"],go=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._ref=i.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,r=Object(Zt.a)(t,ho);return i.createElement(i.Fragment,null,i.createElement(Dt.a,{coordinates:n,nonInteractive:!0},i.createElement("div",{ref:this._ref}),i.createElement(mo.a,Object(bn.a)({type:"balloon"},r,{getTarget:function(){return e._ref.current}}),r.children)),i.createElement(vn.b,{onUpdate:r.isShown?this._onMapUpdate:void 0}))},t}(i.PureComponent),bo=n(340),yo=n.n(bo),_o=n(341),Eo=n.n(_o),wo=Object(Nt.a)("ruler-balloon"),So={main:10,side:0},Oo={"delete-points":{title:"Удалить все точки?",description:"Чтобы удалить только одну точку, нажмите на неё дважды.",confirmation:"Удалить все"},close:{title:"Выключить линейку?",description:"Вы уверены, что хотите удалить все точки и выключить линейку?",confirmation:"Выключить"}},Co=function(e){function t(t){var n;return(n=e.call(this,t)||this)._clearAndDisableRuler=function(){var e,t;n.props.deletePoints(),null===(e=(t=n.props).disableRuler)||void 0===e||e.call(t)},n._openPopup=function(e){n.setState({popupType:e})},n._closePopup=function(){n.setState({popupType:null})},n._clearRuler=function(){n.props.deletePoints()},n._renderPopup=function(){var e=n.state.popupType;if(!e)return null;var t=n.props;return i.createElement(go,{coordinates:t.coordinates,position:["top","bottom","left","right"],offset:So,showArrow:!1,isShown:!0},i.createElement(Lt.a,{name:"popup",nodeState:{type:e}},i.createElement("div",{className:wo("popup")},i.createElement("div",{className:wo("title")},Oo[e].title),i.createElement("div",{className:wo("description")},Oo[e].description),i.createElement("div",{className:wo("buttons")},i.createElement("div",{className:wo("confirm")},i.createElement(Lt.a,{name:"confirm",logClick:!0},i.createElement(mr.a,{view:"primary",size:"small",onClick:"delete-points"===e?n._clearRuler:n._clearAndDisableRuler},Oo[e].confirmation))),i.createElement("div",{className:wo("cancel")},i.createElement(Lt.a,{name:"cancel",logClick:!0},i.createElement(mr.a,{view:"secondary-blue",size:"small",onClick:n._closePopup},"Отмена")))))))},n._renderTooltip=function(){return i.createElement("div",{className:wo("tooltip-wrapper")},i.createElement("div",{className:wo("tooltip")},i.createElement("div",{className:wo("label")},(e=n.props.distance)>900?(function(params){return params.distance+" км";})({distance:Or(e/1e3)}):(function(params){return params.distance+" м";})({distance:Or(e)})),n._renderControls()));var e},n._renderControls=function(){return n.props.showControls?i.createElement(Lt.a,{name:"controls"},i.createElement("div",{className:wo("controls")},n.props.disableRuler?i.createElement(hr.a,{text:"Очистить точки",position:"bottom",size:"s",isAir:!0},i.createElement(Lt.a,{name:"remove_all_points",logClick:!0},i.createElement("div",{className:wo("trash"),onClick:function(){return n._openPopup("delete-points")}},i.createElement(Kt.a,{className:wo("trash-icon"),url:Eo.a})))):null,i.createElement(hr.a,{text:"Выключить линейку",position:"bottom",size:"s",isAir:!0},i.createElement(Lt.a,{name:"turn_off_ruler",logClick:!0},i.createElement("div",{className:wo("close"),onClick:function(){return n._openPopup("close")}},i.createElement(Kt.a,{className:wo("close-icon"),url:yo.a})))))):null},n.state={popupType:null},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Dt.a,{coordinates:e.coordinates,zIndex:zt.a.ruler+1,dataSourceId:e.dataSourceId,blockEvents:!0},i.createElement("div",{className:wo()},this.state.popupType?this._renderPopup():this._renderTooltip()))},t}(i.Component);n(342);function jo(e,t){var n=t[0],r=t[1],o=[n[1]-r[1],r[0]-n[0],n[0]*r[1]-r[0]*n[1]],i=[o[1],-o[0],e[1]*o[0]-e[0]*o[1]],a=o[0]*i[1]-i[0]*o[1];return[(i[2]*o[1]-o[2]*i[1])/a,(i[0]*o[2]-o[0]*i[2])/a]}var Ro=n(122);function ko(e,t,n,r,o){for(var i=0;i<e.length-1;i++){var a=[e[i],e[i+1]];if(Object(Ro.a)(Object(X.a)(t,r),Object(X.a)(a[0],r),Object(X.a)(a[1],r))<n/2){var s=jo(t,[a[0],a[1]]);return o?{point:s,segmentIndex:i}:s}}}var Io,xo=Object(Nt.a)("map-line-editor"),Mo=zt.a.editing-3,To=zt.a.editing-1,Po=zt.a.editing-2,No=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setLayers=function(e){var t=n.props.map,r=t.getLayers(),o=r.topRasterLayers,i=r.mainLayers,a=[].concat(o,i),s=n.props.config.uatraits.isMobile?"click":"fastclick";n.props.editorLayerOwner?(a.push(pn.b),Io=n.props.editorLayerOwner,t.events.on(s,pn.b,n._onEditorLayerClick)):e&&(e.editorLayerOwner===Io&&(a=a.filter((function(e){return e!==pn.b})),Io=void 0),t.events.off(s,pn.b,n._onEditorLayerClick)),t.setLayers(Object(pn.k)(a,n.props.ymaps3.EventBlockerLayer,n.props.config))},n._onEditorLayerClick=function(e,t){n.props.onPointAdd(t.coordinates,n.props.points.length)},n._updatePoint=function(e,t,r){n.props.onPointUpdate&&void 0!==t&&n.props.onPointUpdate(e,t,Boolean(r))},n._onMouseMove=function(e){var t=n.props.map.convertScreenToWorldCoordinates(e).coordinates;if(n.props.onLineMouseMove&&n.props.onLineMouseMove(e,{coordinates:t}),n.props.polyLineCoordinates&&n.props.isActive&&void 0===n.state.draggingPoint){var r=Math.max.apply(Math,n.props.lineStyle.stroke.map((function(e){return e.width||0}))),o=ko(n.props.polyLineCoordinates,t,r,n.props.map.zoom,!0);o&&"point"in o&&n.setState({previewPoint:o})}},n._onNewPointDragStart=function(){var e=n.state,t=n.props;if(e.previewPoint){var r=function(e,t,n){for(var r=0,o=0;o<e.length-1;o++){var i=t[r];if(i&&Object(jt.a)(i,e[o],15e-7)&&(r+=1),o===n)return r}return r}(t.polyLineCoordinates,t.points,e.previewPoint.segmentIndex)||void 0;void 0!==r&&e.previewPoint.point&&(n.setState({draggingPoint:{index:r,point:e.previewPoint.point}}),t.onPointAdd(e.previewPoint.point,r))}},n._onExistingPointDragStart=function(e){n.props.points[e]&&n.setState({draggingPoint:{index:e,point:n.props.points[e]}})},n._onDragMove=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:{index:r.draggingPoint.index,point:t}}),n._updatePoint(t,r.draggingPoint.index))},n._onDragEnd=function(){var e=n.state;e.draggingPoint&&(n.setState({draggingPoint:void 0,previewPoint:void 0}),n._updatePoint(e.draggingPoint.point,e.draggingPoint.index,!0))},n._onPointDoubleClick=function(e){n.props.isActive&&n.props.onPointRemove&&n.props.onPointRemove(e)},n._onPointClick=function(e){n.props.onPointClick&&n.props.onPointClick(e)},n._renderDraggingOrPreviewPoint=function(){var e=n.state,t=n.props,r=e.draggingPoint||e.previewPoint;if(!r||!t.isActive||t.config.uatraits.isMobile)return null;var o="segmentIndex"in r;return i.createElement(Dt.a,{coordinates:r.point,onDragStart:n._onNewPointDragStart,onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onMouseMove:n._onMouseMove,onMouseLeave:t.onPreviewPointMouseLeave,onClick:t.onPreviewPointClick,zIndex:o?Mo:To,draggable:t.isActive,dataSourceId:pn.d[t.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0},o?i.createElement("div",{className:xo("preview-point")},t.previewPointElement):n.props.renderPointElement("index"in r&&r.index||0))},n._renderPoints=function(){return n.props.points.map((function(e,t){return i.createElement(Dt.a,{key:t,onDragStart:function(){return n._onExistingPointDragStart(t)},onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onDoubleClick:function(){return n._onPointDoubleClick(t)},onClick:function(){return n._onPointClick(t)},coordinates:e,draggable:n.props.isActive,zIndex:Po,dataSourceId:pn.d[n.props.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0,nonInteractive:!n.props.isActive},n.state.draggingPoint&&n.state.draggingPoint.index===t?null:n.props.renderPointElement(t))}))},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._setLayers()},n.componentDidUpdate=function(e){e.editorLayerOwner!==this.props.editorLayerOwner&&this._setLayers(e)},n.render=function(){var e=this.props.editorLayerOwner?"EDITOR_GRAPHICS":"DEFAULT_GRAPHICS";return i.createElement(i.Fragment,null,this._renderDraggingOrPreviewPoint(),this._renderPoints(),i.createElement(Ft.a,{drawingStyle:this.props.lineStyle,geometry:{type:"LineString",coordinates:this.props.polyLineCoordinates},onMouseMove:this._onMouseMove,onMouseEnter:this.props.onLineMouseEnter,onMouseLeave:this.props.onLineMouseLeave,dataSourceId:pn.d[e],onClick:this.props.onPreviewPointClick}))},t}(i.Component);var Do=Object(fn.b)({shouldWait:!0})(Object(U.b)(No)),Lo=n(344),zo=n.n(Lo),Ao={stroke:[{color:"#666",width:3,opacity:.7},{color:"#fff",width:5,opacity:.7}],simplificationRate:0},Uo=Object(Nt.a)("ruler-view"),Fo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._caclGeodesicLine=function(){var e=n.props.points,t=e[0];return e.slice(1).reduce((function(e,t){var n=t.coordinates;return[].concat(e,vo(Bt([e.pop(),n])))}),t?[t.coordinates]:[])},n._onPointAdd=function(e,t){n._updatePoints(t,e)},n._onPointUpdate=function(e,t){n._updatePoints(t,e,!0)},n._onPointRemove=function(e){n._updatePoints(e,void 0,!0)},n._updatePoints=function(e,t,o){if(n.props.onUpdate){var i=n.props.points,a=i.slice(0,e);t&&a.push({coordinates:t,distance:Bo(t,a[a.length-1]),showBalloon:i[e]&&i[e].showBalloon}),i.slice(e+(o?1:0)).forEach((function(e){a.push(Object(r.a)(Object(r.a)({},e),{},{distance:Bo(e.coordinates,a[a.length-1])}))})),n.props.onUpdate(a)}},n._togglePointBalloon=function(e){if(n.props.onUpdate){var t=n.props.points,o=Object(r.a)(Object(r.a)({},t[e]),{},{showBalloon:!t[e].showBalloon}),i=[].concat(t.slice(0,e),[o],t.slice(e+1));n.props.onUpdate(i)}},n._renderBalloon=function(e,t){var r=t===n.props.points.length-1;return 0===t||!e.showBalloon&&!r?null:i.createElement(Co,{key:t,coordinates:e.coordinates,distance:e.distance,showControls:r,dataSourceId:n.props.isEnabled?pn.d.EDITOR_MARKERS:void 0,disableRuler:n.props.disableRuler,deletePoints:n.props.deletePoints})},n._renderPoint=function(){return i.createElement("div",{className:Uo("point")},i.createElement(Kt.a,{url:zo.a}))},n.state={geodesicLine:n._caclGeodesicLine()},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.points!==this.props.points&&this.setState({geodesicLine:this._caclGeodesicLine()})},n.render=function(){var e=this.props.points;return i.createElement(i.Fragment,null,i.createElement(Do,{previewPointElement:i.createElement("div",{className:Uo("preview-point")}),renderPointElement:this._renderPoint,polyLineCoordinates:this.state.geodesicLine,points:e.map((function(e){return e.coordinates})),lineStyle:Ao,isActive:Boolean(this.props.onUpdate),onPointAdd:this._onPointAdd,onPointUpdate:this._onPointUpdate,onPointRemove:this._onPointRemove,onPointClick:this._togglePointBalloon,editorLayerOwner:this.props.isEnabled?"ruler":void 0}),e.map(this._renderBalloon))},t}(i.Component);function Bo(e,t){return t?t.distance+Object(q.a)(e,t.coordinates):0}Fo.displayName="RulerComponent";var Ho=Object(U.b)(Fo),qo=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Ho,{points:e.ruler.points,isEnabled:e.ruler.isEnabled,onUpdate:function(t){return e.updateRuler({points:t})},deletePoints:function(){return e.updateRuler({points:[]})},disableRuler:function(){return e.updateRuler({points:[],isEnabled:!1})}})},t}(i.Component),Wo=(n(345),n(494));n(262),n(348);var Go=n(293),Vo=n(92),Yo=n(93),Zo=function(e){var t=this;this._listeners=[],this._ref=void 0,this.addListener=function(e){return t._listeners.push(e),e(t._ref.current,null),function(){return t._removeListener(e)}},this._removeListener=function(e){t._listeners=t._listeners.filter((function(t){return t!==e}))},this.fire=function(e){t._listeners.forEach((function(n){return n(t._ref.current,e)}))},this._ref=e},Ko=Object(Nt.a)("scroll"),$o={},Xo={passive:!0},Jo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=B.a.v4(),n._onResizeThrottled=void 0,n._onMouseMoveThrottled=void 0,n._container=i.createRef(),n._content=null,n._wrap=i.createRef(),n._scrollbar=null,n._scrollbarThumb=null,n._height=void 0,n._ratio=1,n._startPageY=0,n._startScrollTop=0,n._emitter=void 0,n._onSelectStart=null,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._emitter.fire(e)},n._onResize=function(){n._wrap.current&&n._content&&(n._height=n._wrap.current.clientHeight,n._ratio=n._height/n._content.clientHeight,"dynamic"===n.props.width&&n._fixContentWidth(),n._scrollbarThumb&&(n._updateScrollbarThumbPosition(n._getContainer().current.scrollTop),n._scrollbarThumb.style.height=100*n._ratio+"%"),n._showHideScrollbar(n._ratio<1))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;n._scrollbarThumb&&n._updateScrollbarThumbPosition(e.scrollTop),t.cacheKey&&($o[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._onWheel=function(e){n._getContainer().current.scrollTop=n._getContainer().current.scrollTop+e.deltaY},n._onScrollbarClick=function(e){var t=n._getContainer().current,r=n._scrollbarThumb;e.pageY<r.getBoundingClientRect().top?t.scrollTop-=n._height:t.scrollTop+=n._height},n._onMouseDown=function(e){var t=n._wrap.current,r=n._getContainer().current;t&&r&&(window.addEventListener("mouseup",n._onMouseUp,Xo),window.addEventListener("mousemove",n._onMouseMoveThrottled,Xo),t.classList.add("_pressed"),n._startPageY=e.pageY,n._startScrollTop=r.scrollTop,n._onSelectStart=r.onselectstart,r.onselectstart=function(e){e.preventDefault()})},n._onMouseUp=function(){var e=n._wrap.current,t=n._getContainer().current;e&&t&&(n._removeMouseListeners(),e.classList.remove("_pressed"),t.onselectstart=n._onSelectStart)},n._onMouseMove=function(e){var t=n._getContainer().current;n._scrollbar&&(t.scrollTop=n._startScrollTop+(e.pageY-n._startPageY)/n._ratio)},n._removeMouseListeners=function(){window.removeEventListener("mouseup",n._onMouseUp,Xo),window.removeEventListener("mousemove",n._onMouseMoveThrottled,Xo)},n._updateScrollbarThumbPosition=function(e){n._scrollbarThumb.style.setProperty(Object(dn.a)().styles.transform,"translate3d(0, "+Math.ceil(e*n._ratio)+"px, 0)")},n._fixContentWidth=function(){var e=n._getContainer().current,t=n._content,r=e.offsetWidth-e.clientWidth;t.style.marginRight=-r+"px"},n._showHideScrollbar=function(e){var t=n._scrollbar;t&&(t.style.display=e?"flex":"none")},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&$o[e.cacheKey]||0;t.scrollTop!==r&&(0===r?t.scrollTop=r:$n()((function(){return t.scrollTop=r})))},n._onResizeThrottled=Object(Go.a)(n._onResize,64),n._onMouseMoveThrottled=Object(Go.a)(n._onMouseMove,64),n._emitter=new Zo(n._getContainer()),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._onResize(),setTimeout(this._onResize,0),this._restoreScrollPosition(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._getContainer().current.addEventListener("scroll",this._onScroll,Xo),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey!==t.cacheKey&&this._restoreScrollPosition()},n.componentWillUnmount=function(){this._removeMouseListeners(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(null),this._getContainer().current.removeEventListener("scroll",this._onScroll,Xo),this._emitter.fire(null),this._onResizeThrottled.cancel(),this._onMouseMoveThrottled.cancel()},n.render=function(){var e=this,t=this.props;return i.createElement("div",{className:Ko({width:t.width||"narrow",disabled:t.disabled,"full-height":t.fullHeight}),ref:this._wrap},i.createElement("div",{className:Ko("container"),ref:this._getContainer()},i.createElement("div",{className:Ko("content"),ref:function(t){return e._content=t}},i.createElement(Yo.a,{value:{addListener:this._emitter.addListener,getScrollableNode:function(){return e._getContainer().current},getCacheScrollPosition:function(){var t;return e.props.cacheKey&&null!==(t=$o[e.props.cacheKey])&&void 0!==t?t:null},scrollId:this._id,registerStickyElement:this.props.registerStickyElement,unregisterStickyElement:this.props.unregisterStickyElement,updateStickyElement:this.props.updateStickyElement,getStickyElementsOffset:this.props.getStickyElementsOffset}},t.children,i.createElement(Vo.a,{eventHandler:this._onScrollSelf,throttleWait:64})),i.createElement(mn.a,{onResize:this._onResizeThrottled})),i.createElement(mn.a,{onResize:this._onResizeThrottled}),t.config.uatraits.isTablet?null:i.createElement("div",{className:Ko("scrollbar",{noprint:!0}),ref:function(t){return e._scrollbar=t},onWheel:this._onWheel},i.createElement("div",{className:Ko("scrollbar-track"),onClick:this._onScrollbarClick}),i.createElement("div",{className:Ko("scrollbar-thumb"),ref:function(t){return e._scrollbarThumb=t},onMouseDown:this._onMouseDown}))),i.createElement(hn.a,{type:"resize",listener:this._onResizeThrottled,options:Xo}))},t}(i.Component),Qo=Object(U.b)(Jo),ei=Object(Nt.a)("scroll"),ti={},ni={passive:!0},ri=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=B.a.v4(),n._container=i.createRef(),n._emitter=void 0,n._provider=void 0,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._getContainer().current&&n._emitter.fire(e)},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&ti[e.cacheKey]||0;t.scrollTop!==r&&window.requestAnimationFrame((function(){return t.scrollTop=r}))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;t.cacheKey&&(ti[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._emitter=new Zo(n._getContainer()),n._provider={addListener:n._emitter.addListener,getScrollableNode:function(){return n._getContainer().current},getCacheScrollPosition:function(){var e;return n.props.cacheKey&&null!==(e=ti[n.props.cacheKey])&&void 0!==e?e:null},registerStickyElement:n.props.registerStickyElement,unregisterStickyElement:n.props.unregisterStickyElement,updateStickyElement:n.props.updateStickyElement,getStickyElementsOffset:n.props.getStickyElementsOffset,scrollId:n._id,reachedBottom:function(){var e=n._getContainer().current;return!!e&&e.clientHeight+e.scrollTop>=e.scrollHeight-10}},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._restoreScrollPosition(),this._getContainer().current.addEventListener("scroll",this._onScroll,ni),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._getContainer().current.removeEventListener("scroll",this._onScroll,ni),this._emitter.fire(null)},n.render=function(){var e=this.props;return i.createElement("div",{className:ei({width:e.width||"narrow",disabled:e.disabled,native:e.native,"full-height":e.fullHeight})},i.createElement("div",{className:ei("container"),ref:this._getContainer()},i.createElement("div",{className:ei("content")},i.createElement(Yo.a,{value:this._provider},e.children,i.createElement(Vo.a,{eventHandler:this._onScrollSelf,throttleWait:64})))))},t}(i.Component),oi=function(e){function t(t){var n;return(n=e.call(this,t)||this)._stickyListeners=void 0,n._stickyHeights=void 0,n._stickyRefs=void 0,n._registerStickyElement=function(e,t,r,o){n._stickyHeights[r][e]=0,n._stickyRefs[r][e]=t,n._stickyListeners[r][e]=o,n._calcStickyPositions(Math.max(e-1,0),r)},n._unregisterStickyElement=function(e,t){delete n._stickyHeights[t][e],delete n._stickyRefs[t][e]},n._updateStickyElement=function(e,t,r){n._stickyHeights[r][e]=t,n._calcStickyPositions(e,r)},n._calcStickyPositions=function(e,t){for(var r=0,o=0;o<=e;o++)"number"==typeof n._stickyHeights[t][o]&&(r+=n._stickyHeights[t][o]);for(var i=e+1;i<n._stickyHeights[t].length;i++){var a,s;null===(a=(s=n._stickyListeners[t])[i])||void 0===a||a.call(s,r),"number"==typeof n._stickyHeights[t][i]&&(r+=n._stickyHeights[t][i])}},n._isNodeWithinStickyElement=function(e){return n._stickyRefs.top.concat(n._stickyRefs.bottom).some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e)}))},n._getStickyElementsOffset=function(e){return n._stickyHeights[e].filter(Boolean).reduce((function(e,t){return e+t}),0)},n._stickyListeners={top:[],bottom:[]},n._stickyHeights={top:[],bottom:[]},n._stickyRefs={top:[],bottom:[]},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t;null===(e=(t=this.props).setIsNodeWithinStickyElementRef)||void 0===e||e.call(t,this._isNodeWithinStickyElement)},n.componentWillUnmount=function(){var e,t;null===(e=(t=this.props).setIsNodeWithinStickyElementRef)||void 0===e||e.call(t,void 0)},n.render=function(){var e=this.props.native?ri:Qo;return i.createElement(e,Object(bn.a)({},this.props,{getStickyElementsOffset:this._getStickyElementsOffset,registerStickyElement:this._registerStickyElement,unregisterStickyElement:this._unregisterStickyElement,updateStickyElement:this._updateStickyElement}))},t}(i.Component),ii=Object(U.b)(oi),ai=(n(350),Object(Nt.a)("close-button")),si=function(e){var t=e.color,n=void 0===t?"black":t,r=e.offset,o=void 0===r?"small":r,a=e.onClick,s=e.circle,c=e.relative,u=e.usePortal,l=i.createElement("div",{className:ai({color:n,circle:s,relative:c,offset:"string"==typeof o?o:void 0}),onClick:a,style:"string"==typeof o?{}:o},i.createElement(qt.a,{inline:!0,name:s?"close":"cross",size:s?24:16}));return u?i.createElement(ar.a,{selector:".body"},l):l},ci=Object(Nt.a)("map-widget-content-view"),ui={top:10,right:8},li=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=null,n._updateMapLocation=function(){var e;if(n.props.updateLocationRequest){var t=n.state.maxHeight||n.state.height,r=null===(e=n._containerRef)||void 0===e?void 0:e.offsetWidth;if(t&&r){var o,i,a,s="panel"===n.props.displayType?(o=n.props.mapLocation,i=n.props.coordinates,(a=Object(X.a)(i,o.zoom))[1]+=32,Object(J.a)(a,o.zoom)):function(e,t,n,r){var o,i=e.bounds,a=Object(Wo.a)(i,t)?e.center:t,s=Object(Wo.a)(i,t)?t:e.center,c=Object(X.a)(a,e.zoom),u=Object(X.a)(s,e.zoom),l=i.map((function(t){return Object(X.a)(t,e.zoom)})),d=u[0]-l[0][0],p=l[1][0]-u[0],f=u[1]-l[1][1],v=Math.min(d,p),m=[].concat(c),h=Math.ceil(n.width/2);if(v<h){var g=h-v;d>=p?m[0]+=g:m[0]-=g}var b=n.height+(null!==(o=null==r?void 0:r.main)&&void 0!==o?o:0);return f<b&&(m[1]-=b-f+10),Object(J.a)(m,e.zoom)}(n.props.mapLocation,n.props.coordinates,{width:r,height:t},n.props.offset);n.props.updateLocationRequest({center:s,duration:300})}}},n._updateWidthHeight=function(){var e,t,r,o;n._containerRef&&n.setState({height:n._containerRef.clientHeight,width:"balloon"===n.props.displayType?n._containerRef.clientWidth:void 0,maxHeight:"balloon"===n.props.displayType?(e=n.props.mapLocation,t=n._containerRef.clientHeight,r=e.bounds.map((function(t){return Object(X.a)(t,e.zoom)})),o=r[0][1]-r[1][1]+22,o<t?o:t):Math.ceil(n.props.mapSize.height/2),ready:!0},(function(){return n._updateMapLocation()}))},n._setContainerRef=function(e){n._containerRef=e,n._updateWidthHeight()},n._renderContainer=function(){return i.createElement("div",{className:ci("container",{ready:n.state.ready}),ref:n._setContainerRef,style:{height:n.state.height,maxHeight:n.state.maxHeight,width:n.state.width}},i.createElement(ii,{width:"dynamic"},i.createElement("div",{className:ci("frame")},n.props.children)))},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;e.coordinates===this.props.coordinates&&e.displayType===this.props.displayType||this.setState({height:void 0,width:void 0,maxHeight:void 0,ready:void 0},(function(){t._updateWidthHeight()}))},n.render=function(){var e=this.props;return"balloon"===e.displayType?i.createElement(go,{coordinates:e.coordinates,key:e.coordinates.join(),position:"top",restrictPosition:!0,type:"normal",skipMaxHeight:!0,offset:e.offset,isShown:!0},i.createElement("div",{className:ci("balloon")},i.createElement(si,{offset:ui,onClick:e.onClose}),this._renderContainer())):i.createElement(uo,null,i.createElement("div",{className:ci("panel"),key:e.coordinates.join()},i.createElement(si,{offset:ui,onClick:e.onClose}),this._renderContainer()))},t}(i.Component),di=(n(352),n(68)),pi=Object(Nt.a)("traffic-road-event-content-view"),fi=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.event;if(!t.position)return null;var n,r=t.time_start||t.time_end,o=t.time_start_value&&t.tzOffset&&Object(Q.a)(new Date(1e3*Number(t.time_start_value)),t.tzOffset)||void 0,a=t.time_end_value&&t.tzOffset&&Object(Q.a)(new Date(1e3*Number(t.time_end_value)),t.tzOffset)||void 0;return i.createElement("div",{className:pi()},i.createElement("div",{className:pi("title")},(n=this.props.event.type||"other")&&Dr[n]||Dr.other),t.description?i.createElement("div",{className:pi("description"),dangerouslySetInnerHTML:{__html:t.description}}):null,r?i.createElement("div",{className:pi("time"),dangerouslySetInnerHTML:{__html:o&&a?Object(di.b)(o,e.config)+" &mdash; "+Object(di.b)(a,e.config):o?Object(di.b)(o,e.config):""}}):null,t.author?i.createElement("div",{className:pi("source")},i.createElement("span",{className:pi("source-label")},"Источник"),t.link?i.createElement("a",{className:pi("source-link"),href:t.link.href,target:"_blank"},t.author.name):null):null)},t}(i.Component),vi=Object(U.b)(fi);function mi(e){var t,n;return(null===(t=e.query.l)||void 0===t?void 0:t.includes("trfe"))||(null===(n=e.userMap)||void 0===n?void 0:n.isTrafficShown)}function hi(e){return"atm"===e.query.rtm}function gi(e){var t;return null!==(t={auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"}[e.query.rtt])&&void 0!==t?t:"auto"}var bi=function(e){function t(t){var n,r,o;return(o=e.call(this,t)||this)._loadStaticLayerAction=void 0,o._updateVersionFromStaticLayers=function(e){e.trf&&e.trfe&&o.setState({actualVersion:e.trf.version,roadEventsVersion:e.trfe.version})},o.state={actualVersion:null===(n=t.config.layers.trf)||void 0===n?void 0:n.version,roadEventsVersion:null===(r=t.config.layers.trfe)||void 0===r?void 0:r.version},o}Object(o.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),p.a.cancel(this._loadStaticLayerAction)},n._shouldUpdateLayer=function(e){return e.mapLocation!==this.props.mapLocation},n._updateLayer=function(){e.prototype._updateLayer.call(this),this._updateStaticLayer()},n._onLayerLoad=function(e){var t,n,r=A.actual.getLevel(e.timezone.ids,this.props.config);null===(t=(n=this.props).onLayerLoaded)||void 0===t||t.call(n,e),this._loadLevel(r)},n._updateStaticLayer=function(){p.a.cancel(this._loadStaticLayerAction),this._loadStaticLayerAction=p.a.create(er.getLayers({layers:["trf","trfe"]},this.props.config),{success:this._updateVersionFromStaticLayers})},n.render=function(){var e=this.state;return this.props.children({actualVersion:e.actualVersion,roadEventsVersion:e.roadEventsVersion})},t}(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._loadLayerAction=void 0,t._loadLevelAction=void 0,t._updateTimer=-1,t._onLayerDataLoad=function(e){var n,r,o=t.props;e&&e.timezone?null===(n=(r=t)._onLayerLoad)||void 0===n||n.call(r,e):o.onTrafficLevelChange(null)},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._updateLayer(),this._updateTimer=window.setInterval((function(){return e._updateLayer()}),12e4)},n.componentDidUpdate=function(e){this._shouldUpdateLayer(e)&&this._updateLayer()},n.componentWillUnmount=function(){window.clearInterval(this._updateTimer),p.a.cancel(this._loadLayerAction),p.a.cancel(this._loadLevelAction)},n._loadLevel=function(e){p.a.cancel(this._loadLevelAction);var t=this.props;this._loadLevelAction=p.a.create(e,{success:function(e){return t.onTrafficLevelChange(e.level)},fail:function(){return t.onTrafficLevelChange(null)}})},n._updateLayer=function(){p.a.cancel(this._loadLayerAction),this._loadLayerAction=p.a.create(er.getLayer({layer:"trf",center:this.props.mapLocation.center,zoom:this.props.mapLocation.zoom},this.props.config),{success:this._onLayerDataLoad})},t}(i.Component)),yi=Object(U.b)(bi),_i=n(133),Ei=n(131),wi=n(109),Si=function(e){return i.createElement(wi.a,{type:"mapNode"},i.createElement(Lt.a,e,e.children))},Oi=n(493),Ci=n(139),ji={getTimings:function(e,t){var n=new RegExp("/tiles\\?.*l=("+e.join("|")+")"),r=Ci.a.getResourcesTimings((function(e){return n.test(e)})).filter((function(e){var n=C.parse(e.name),r=[[256*Number(n.x),256*Number(n.y)],[256*(Number(n.x)+1),256*(Number(n.y)+1)]];return Object(Oi.a)(t,r)&&e.responseEnd<6e5&&e.responseEnd>0&&e.duration<6e5&&e.duration>=0}));if(0!==(r=r.filter((function(e,t){var n=e.name;return r.findIndex((function(e){return e.name===n}))===t}))).length){r.sort((function(e,t){return t.responseEnd-e.responseEnd}));var o=r.reduce((function(e,t){return e+t.duration}),0);return{averageDuration:Math.round(o/r.length),minLoadEnd:Math.round(r[r.length-1].responseEnd),medianaLoadEnd:Math.round(r[Math.floor(r.length/2)].responseEnd),maxLoadEnd:Math.round(r[0].responseEnd)}}}},Ri=n(231),ki=function(e){return e.ready?i.createElement(wi.a,{type:"timingNode"},i.createElement(Lt.a,{name:e.type,nodeState:Object(r.a)({ready:e.ready},e.extraState)},e.children)):null},Ii=Ri.a((function(e){return{config:e.config,isSidebarCollapsed:W.h(e)}})),xi=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;"search-result"===e.config.pageMode&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,e.isSidebarCollapsed||this.setState({ready:Ci.a.getTimeToNow()}))}},n.render=function(){var e=this.props.type;return"undefined"==typeof window?null:i.createElement(ki,{type:e,ready:this.state.ready,extraState:{show:window.timingsMarks&&e in window.timingsMarks?window.timingsMarks[e]:this.state.ready}})},t}(i.PureComponent);xi.isTimingLogged=!1;var Mi=Ii(xi),Ti=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._memoizedCreateHotspotFetchFunction=me(wn.a),t._getLayerVersion=function(){var e=t.props;return e.config.experiments.ui.newRoadEventsRenderer?e.roadEventsVersion:e.actualVersion},t._getTileUrls=function(){var e=t.props.config,n=e.experiments.ui.newRoadEventsRenderer,r=n?e.hosts.roadEventsRenderer:e.hosts.traffic;return[r+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&"+(n?"v":"tm")+"=%v&format=protobuf",r+"1.1/tiles?trf&%n&%l&%c&"+(n?"v":"tm")+"=%v"]},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.config,n=t.experiments.ui.newRoadEventsRenderer?t.hosts.roadEventsRenderer:t.hosts.traffic,r=this._getLayerVersion(),o=this._getTileUrls(),a=o[0],s=o[1];return t.layers.trfe&&r?i.createElement(Rn,{layer:"trfe",dataSource:{type:"tile",vector:Object(pn.g)({priority:"medium",tileUrl:Object(pn.l)(a.replace("%n","l=trfe"),t.lang,r),imageUrl:n+"icons?id={{id}}&scale={{scale}}",glyphRangeUrl:t.hosts.vectorGlyphs.replace("{{lang}}",t.lang),mapMode:Object(pn.i)(t)},t),raster:{tileUrl:Object(pn.e)(Object(pn.l)(s.replace("%n","l=trfe"),t.lang,r),t),fetchHotspots:this._memoizedCreateHotspotFetchFunction(Object(pn.e)(Object(pn.f)(Object(pn.l)(s.replace("%n","l=trje")+"&format=json",t.lang,r),t),t)),transparent:!0},zoomRange:e.zoomRange},onClick:e.onClick}):null},t}(i.Component),Pi=Object(U.b)(Ti),Ni=!0,Di=function(e){function t(t){var n;(n=e.call(this,t)||this)._onTilesReady=function(){if(!n.state.tilesReady){var e=n.props,t=Object(_i.a)(e.mapLocation.bounds,e.mapLocation.zoom);if(n.setState({tilesReady:!0}),Ni){var r=ji.getTimings(["trf"],t);r&&n.setState({tilesTimings:r}),Ni=!1}}},n._countTrafficModeChange=function(){Ei.a.reachGoal("traffic")},n._renderLayer=function(){var e=n.props,t=e.config;if(!t.layers.trf)return null;var r=t.layers.trf.zoomRange?{min:t.layers.trf.zoomRange[0],max:t.layers.trf.zoomRange[1]}:void 0;if(e.actualVersion){var o=t.hosts.traffic+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",a=t.hosts.traffic+"1.1/tiles?trf&%n&%l&%c&tm=%v";return i.createElement(i.Fragment,null,i.createElement(Rn,{layer:"trf",dataSource:{type:"tile",vector:Object(pn.g)({priority:"medium",tileUrl:Object(pn.l)(o.replace("%n","l=trf"),t.lang,e.actualVersion),imageUrl:t.hosts.traffic+"icons/{{id}}?scale={{scale}}&id={{id}}",mapMode:Object(pn.i)(t)},t),raster:{tileUrl:Object(pn.e)(Object(pn.l)(a.replace("%n","l=trf"),t.lang,e.actualVersion),t),transparent:!0},zoomRange:r}}),e.roadEventsVersion?i.createElement(Pi,{onClick:e.onClick,zoomRange:r,roadEventsVersion:e.roadEventsVersion,actualVersion:e.actualVersion}):null)}return e.archiveVersion?i.createElement(Rn,{layer:"trfa",dataSource:{type:"tile",raster:{tileUrl:Object(pn.e)(Object(pn.l)(t.hosts.trafficArchive+"tiles?trj&l=trf&%l&%c&tm=%v",t.lang,e.archiveVersion),t),transparent:!0},vector:Object(pn.g)({priority:"medium",tileUrl:Object(pn.l)(t.hosts.trafficArchive+"2.x/tiles?trf&l=trf&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",t.lang,e.archiveVersion),imageUrl:t.hosts.trafficArchive+"icons?id={{id}}&scale={{scale}}",mapMode:Object(pn.i)(t)},t),zoomRange:r}}):null};var r=t.config.query;return Ni=Ni&&r.l&&r.l.split(",").includes("trf"),n.state={tilesReady:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._countTrafficModeChange()},n.componentDidUpdate=function(e){var t=this.props;e.providerKey!==t.providerKey&&this._countTrafficModeChange()},n.componentWillUnmount=function(){Ni=!1},n.render=function(){var e=this.props,t=this.state;return i.createElement(i.Fragment,null,i.createElement(vn.b,{onReady:this._onTilesReady}),this._renderLayer(),i.createElement(Si,{name:"traffic_layer",nodeState:{providerKey:e.providerKey}}),i.createElement(ki,{type:"traffic_tiles",ready:t.tilesTimings?t.tilesTimings.averageDuration:void 0,extraState:t.tilesTimings}),this.state.tilesReady&&this.props.logTilesReady?i.createElement(Mi,{type:"traffic_page"}):null)},t}(i.Component),Li=Object(U.b)(Di),zi={main:16,side:0},Ai=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content?i.createElement(li,{displayType:t._getDisplayType(),mapLocation:t.props.mapLocation,coordinates:t.props.content.data.coordinates,onClose:t.props.resetContentData,updateLocationRequest:t.props.updateLocationRequest,offset:zi,mapSize:t.props.mapSize},i.createElement(vi,{event:t.props.content.data.event})):null},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=mi(e.config);return i.createElement(i.Fragment,null,i.createElement(yi,{mapLocation:e.mapLocation,onTrafficLevelChange:e.onTrafficLevelChange},(function(n){return i.createElement(Li,{providerKey:"traffic#actual",mapLocation:e.mapLocation,actualVersion:n.actualVersion,onClick:e.onClick,roadEventsVersion:t?n.roadEventsVersion:void 0})})),this._renderContent())},t}(i.Component),Ui=Object(U.b)(Ai);var Fi=n(86);function Bi(e){var t=[[0,0],[0,0]];e.length&&(t=function(e,t,n){var r=[[1/0,1/0],[-1/0,-1/0]],o=e.length;return[0,1].forEach((function(i){if(n[i]){e.sort((function(e,t){return e[i]-t[i]}));var a=0;e.forEach((function(n,s){var c=s+1,u=c===o?e[0]:e[c],l=Object(Nr.a)(u[i]-n[i],0,t);l>=a&&(a=l,r[0][i]=u[i],r[1][i]=n[i])})),r[0][i]>r[1][i]&&(r[1][i]+=t)}else e.forEach((function(e){r[0][i]=Math.min(r[0][i],e[i]),r[1][i]=Math.max(r[1][i],e[i])}))})),r}(e.map((function(e){return Object(X.a)(e,At.g)})),Object(Fi.a)(At.g),At.k).map((function(e){return Object(J.a)(e,At.g)})));return t}n(359);var Hi,qi,Wi=n(3),Gi=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._calcSizes=function(e){return new Promise((function(t){n.setState({render:e},(function(){var e=n._ref.current.children[0],r=e.offsetWidth,o=e.offsetHeight;t({width:r,height:o})}))}))},n.state={render:function(){return null}},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setCalcSizes(this._calcSizes)},n.render=function(){return i.createElement("div",{ref:this._ref},this.state.render())},t}(i.PureComponent);var Vi=function(e,t){var n=function(){return qi||(qi=function(e){var t=window.document.createElement("div");return t.setAttribute("style","position: absolute; top: -1000px; left: -1000px"),window.document.body.appendChild(t),new Promise((function(n){Wi.render(i.createElement(U.a,{value:e},i.createElement(Gi,{setCalcSizes:n})),t)}))}(t)),qi.then((function(t){return t(e)}))};return Hi=Hi?Hi.then(n):n()},Yi={};function Zi(e,t){if(!t.offset||!t.size)return{left:0,right:0,bottom:0,top:0};var n=t.offset[0],r=t.offset[0],o=t.offset[1],i=t.offset[1]+t.size.height;return"MASSTRANSIT"===e.pinType&&(n+=e.rotated?-t.size.width:-7,r+=e.rotated?7:t.size.width),"CONSTRUCTION"===e.pinType&&(n+=-10,r=r+t.size.width+-10,o+=-30,i+=-30),"ROUTEPOINT"===e.pinType&&(n-=t.size.width/2,r+=t.size.width/2,o=o+8-10,i+=8),"SPECIAL"===e.pinType&&(n+=-12,r=r+t.size.width+-12,o+=-24,i+=-24),{left:n,right:r,top:o,bottom:i}}function Ki(e,t,n,r){return Promise.all(e.map((function(e){return function(e,t,n,r){var o=Xi(e);return Yi[o]=Yi[o]||Vi((function(){return t(e)}),r),Yi[o].then((function(t){var r=Object(X.a)(n.bounds[0],n.zoom),o=Object(X.a)(e.coordinates,n.zoom);return{size:t,offset:[o[0]-r[0],o[1]-r[1]]}}))}(e,t,n,r)}))).then((function(t){return e.map((function(n,r){return function(e,t,n){var r=e[n],o=t[n];if(!o.offset||!o.size)return[];var i=Zi(r,o);return i.left===i.right||i.top===i.bottom?[]:e.reduce((function(e,n,o){if(r===n)return e;var a=t[o];if(!a.offset||!a.size)return e;var s=Zi(n,a);return s.left===s.right||s.top===s.bottom?e:Object(Oi.a)([[i.left,i.top],[i.right,i.bottom]],[[s.left,s.top],[s.right,s.bottom]])?e.concat(o):e}),[])}(e,t,r)}))}))}function $i(e,t,n,r){return Ki(e,t,n,r).then((function(e){return e.every((function(e){return 0===e.length}))}))}function Xi(e){switch(e.pinType){case"CONSTRUCTION":return e.coordinates.join(",")+e.pinType;case"MASSTRANSIT":return(e.balloonItems&&String(e.balloonItems.length)||"0")+(e.text||"")+(e.dotSize||"")+(e.rotated||"")+e.pinType+e.coordinates.join(",")+e.pinIndex;case"ROUTEPOINT":return(String(e.index)||0)+(e.value||"")+e.pinType+(e.isLast&&"last");case"SPECIAL":return e.coordinates.join(",")+e.position+e.pinType}}function Ji(e){switch(e.pinType){case"CONSTRUCTION":case"MASSTRANSIT":return Xi(e);case"ROUTEPOINT":return(String(e.index)||0)+e.pinType+(e.isLast&&"last");case"SPECIAL":return Xi(e)}}var Qi,ea="ROUTEPOINT",ta="MASSTRANSIT",na="CONSTRUCTION",ra="SPECIAL",oa=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateMapLocationThrottled=void 0,n._validityChecksCounter=0,n._processingTimeout=0,n._routeComponentProcessingFunction=function(e,t){return 1===e.length?Promise.resolve(e):function(e,t,n){return t.reduce((function(e,t){return e.then((function(e){return e.optimized?e:n(e.pins,t)}))}),Promise.resolve({pins:e,optimized:!1}))}(e.sort((function(e,t){return e.pinIndex>t.pinIndex?1:-1})),n.props.algoSteps,t).then((function(e){return e.pins}))},n._updatePins=function(){n._validityChecksCounter=0,window.clearTimeout(n._processingTimeout),n._validateDrawing(n.props.unprocessedPins.map((function(e,t){return Object(r.a)({pinIndex:t},e)})))},n._collectAndProcessGroups=function(e){var t=n.state.mapLocation,r=n.props.config;Ki(e,n.props.getNodeByPin,t,r).then((function(o){var i=function(e){for(var t=new Array(e.length).map((function(){return!1})),n=[],r=0;r<e.length;r++)if(!t[r]){var o=[r],i=[r];for(t[r]=!0;o.length>0;)for(var a=e[o.pop()],s=0;s<a.length;++s){var c=a[s];t[c]||(t[c]=!0,o.push(c),i.push(c))}n.push(i)}return n}(o).map((function(o){var i=o.map((function(t){return e[t]}));return n._routeComponentProcessingFunction(i,(function(e,o){return function e(t,n,r,o,i,a){return new Promise((function(s){if(1===t.length)s({pins:t,optimized:!0});else if(i>10)s({pins:t,optimized:!1});else{var c=n(t);$i(c.pins,r,o,a).then((function(t){t?s({pins:c.pins,optimized:!0}):c.isFinished?c.isFinished&&s({pins:c.pins,optimized:!1}):s(e(c.pins,n,r,o,i++,a))}))}}))}(e,o,n.props.getNodeByPin,t,0,r)}))}));Promise.all(i).then((function(e){var t=e.reduce((function(e,t){return e.concat(t)}));n._validateDrawing(t)}))}))},n._updateMapLocation=function(){var e=n.props.map.zoom;Math.abs(n.state.mapLocation.zoom-e)<.25||n.setState({mapLocation:Object(a.d)(n.props.map)})},n._onMapUpdate=function(){n._updateMapLocationThrottled()},n._validateDrawing=function(e){n._validityChecksCounter+=1,n._validityChecksCounter>=2?n.setState({pinsToDraw:e}):$i(e,n.props.getNodeByPin,n.state.mapLocation,n.props.config).then((function(t){t?n.setState({pinsToDraw:e}):n._processingTimeout=window.setTimeout((function(){return n._collectAndProcessGroups(e)}),50)}))},n.state={pinsToDraw:[],mapLocation:Object(a.d)(n.props.map)},n._updateMapLocationThrottled=Object(Go.a)(n._updateMapLocation,300),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._validityChecksCounter=0,this._validateDrawing(this.props.unprocessedPins.map((function(e,t){return Object(r.a)({pinIndex:t},e)})))},n.componentDidUpdate=function(e,t){this.state.mapLocation.zoom===t.mapLocation.zoom&&this.props.unprocessedPins===e.unprocessedPins||this._updatePins()},n.componentWillUnmount=function(){window.clearTimeout(this._processingTimeout)},n.render=function(){var e=this;return i.createElement(i.Fragment,null,this.state.pinsToDraw.map((function(t){var n=e.props.getMapPlacemarkProps(t);return n?i.createElement(Dt.a,Object(bn.a)({key:Ji(t)},n),e.props.getNodeByPin(t)):null})),i.createElement(vn.b,{onUpdate:this._onMapUpdate}))},t}(i.Component),ia=Object(fn.b)({shouldWait:!0})(Object(U.b)(oa)),aa=n(361),sa=n.n(aa),ca=n(362),ua=n.n(ca),la=n(363),da=n.n(la),pa=n(364),fa=n.n(pa),va=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;if(!Qi){var t=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._uris=[],t}Object(o.a)(t,e);var n=t.prototype;return n.test=function(e){var t=e.metadata,n=t&&t.get("uri");return!n||!this._uris.includes(n)},n.add=function(e){this._uris.push(e),this._emit("update")},n.remove=function(e){this._uris=this._uris.filter((function(t){return t!==e})),this._emit("update")},t}(e.ymaps3.eventify().with());Qi=new t,e.map.addObjectFilter(Qi)}Qi.add(this.props.uri)},n.componentDidUpdate=function(e){this.props.uri!==e.uri&&(Qi.remove(e.uri),Qi.add(this.props.uri))},n.componentWillUnmount=function(){Qi.remove(this.props.uri)},n.render=function(){return null},t}(i.Component),ma=Object(fn.b)({shouldWait:!0})(va),ha=(n(365),Object(Nt.a)("masstransit-route-pin-view")),ga=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._onClick=function(e){var n=t.props,r=e||n.balloonItems&&n.balloonItems[0].stopId;r&&n.onClick&&n.onClick({coordinates:n.coordinates,id:r})},t._renderBalloonItem=function(e){var n=Boolean("underground"===e.iconType&&e.city),r=n?e.iconType+"-"+e.city:e.iconType,o=n?"small":"normal",a=Wt.a({type:"masstransit",name:r,size:o},t.props.config);return i.createElement("div",{className:ha("balloon-item",{type:e.iconType}),style:{backgroundColor:"underground"!==e.iconType?e.color:void 0},onClick:function(){return t._onClick(e.stopId)}},a?i.createElement(Kt.a,{className:ha("balloon-icon"),url:a}):null,["suburban","aeroexpress"].includes(e.iconType)?null:i.createElement("div",{className:ha("balloon-text"),style:{backgroundColor:e.color}},e.text))},t._renderBalloon=function(){var e=t.props.balloonItems;return e?i.createElement("div",{className:ha("balloon")},t._renderBalloonItem(e[0]),e[1]?i.createElement(i.Fragment,null,i.createElement(qt.a,{name:"arrow-right",size:8,className:ha("arrow"),inline:!0}),t._renderBalloonItem(e[1])):null):null},t._renderText=function(){return t.props.text?i.createElement("span",{className:ha("text"),onClick:function(){return t._onClick()}},t.props.text):null},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.balloonItems&&t.balloonItems[t.balloonItems.length-1].color||t.dotColor,r=t.dotSize||"normal";return i.createElement("div",{className:ha({rotated:t.rotated,double:t.balloonItems&&2===t.balloonItems.length,clickable:Boolean(t.onClick)})},i.createElement("div",{className:ha("container")},i.createElement("div",{className:ha("dot",{size:r}),style:{background:n},onClick:function(){return e._onClick()}}),this._renderBalloon()),this._renderText())},t}(i.PureComponent),ba=Object(U.b)(ga),ya=(n(367),n(492)),_a=n(369),Ea=n.n(_a),wa=n(370),Sa=n.n(wa),Oa=Object(Nt.a)("waypoint-pin-view"),Ca=function(e){function t(t){var n;(n=e.call(this,t)||this)._getServiceIconUrl=function(){var e=n.props;return e.serviceType&&"geolocation"!==e.serviceType?Wt.a({type:"service",name:e.serviceType,size:e.mobileChooseMode?"normal":"small"},e.config):null},n._getRubricIconUrl=function(){var e=n.props;if(e.searchResult){var t,r;if("categories"in e.searchResult&&e.searchResult.categories)t=null===(r=e.searchResult.categories[0])||void 0===r?void 0:r.class;else"kind"in e.searchResult&&(t=e.searchResult.kind);if(t)return Wt.a({type:"rubrics",name:t,size:e.mobileChooseMode?"normal":"small"},e.config)||void 0}},n._renderText=function(){if(!n.props.text)return null;var e=Object(ya.a)(n.props.text,{length:40});return i.createElement("div",{className:Oa("text")},e.split(" ").map((function(e,t){return i.createElement("span",{key:t,className:Oa("word")},e)})))},n._renderWaypoint=function(){var e=n.props,t=n.state;return i.createElement(i.Fragment,null,i.createElement(Kt.a,{url:e.mobileChooseMode?Sa.a:Ea.a,className:Oa("pin-icon")}),i.createElement(Kt.a,{url:t.currentIconUrl,key:t.currentIconUrl,className:Oa("rubric-icon",{"mobile-choose":e.mobileChooseMode,current:!0,type:e.serviceType})}),t.temporaryIconUrl?i.createElement(Kt.a,{url:t.temporaryIconUrl,key:t.temporaryIconUrl,className:Oa("rubric-icon",{"mobile-choose":e.mobileChooseMode,temporary:!0})}):null,n._renderText())},n._renderIntermediatePoint=function(){var e=n.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:Oa("content")},i.createElement("span",{className:Oa("index")},e.index)),n._renderText())};var r=Wt.a({type:"rubrics",name:"fallback",size:t.mobileChooseMode?"normal":"small"},t.config),o=n._getServiceIconUrl()||n._getRubricIconUrl()||r;return n.state={temporaryIconUrl:null,currentIconUrl:o},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=this._getServiceIconUrl()||this._getRubricIconUrl();(t.serviceType||t.searchResult!==e.searchResult)&&n&&n!==this.state.currentIconUrl&&this.setState({temporaryIconUrl:this.state.currentIconUrl,currentIconUrl:n})},n.render=function(){var e=this.props,t=0===e.index,n=!t&&!e.isLast&&!e.mobileChooseMode;return e.serviceType,i.createElement("div",{className:Oa({disabled:e.disabled,first:t,last:e.isLast,intermediate:n,"mobile-choose":e.mobileChooseMode})},n?this._renderIntermediatePoint():this._renderWaypoint())},t}(i.Component),ja=Object(U.b)(Ca),Ra=n(70);function ka(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}function Ia(e){if(e.filter((function(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)})).length<2)return{pins:e,isFinished:!0};var t=e.findIndex((function(e){return ka(e)})),n=S(e[t],{type:"STAIRS_UNKNOWN"});return{pins:e.filter((function(e){return!ka(e)})).concat(n),isFinished:!0}}function xa(e){if(e.filter((function(e){return"CONSTRUCTION"===e.pinType})).length<2)return{pins:e,isFinished:!0};var t=e.findIndex((function(e){return"CONSTRUCTION"===e.pinType}));return{pins:e.filter((function(e){return"CONSTRUCTION"!==e.pinType})).concat(e[t]),isFinished:!0}}function Ma(e){return{pins:e.filter((function(e){return"CONSTRUCTION"!==e.pinType})),isFinished:!0}}function Ta(e){return{pins:e.filter((function(e){return"MASSTRANSIT"!==e.pinType||"balloonItems"in e&&e.balloonItems||"dotSize"in e})),isFinished:!0}}function Pa(e){var t=e.findIndex((function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems}));if(-1!==t){var n=[].concat(e),r=n[t];return n[t]=S(n[t],{balloonItems:void 0,dotColor:r.balloonItems&&r.balloonItems[r.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0}),{pins:n,isFinished:!1}}return{pins:e,isFinished:!0}}function Na(e){return{pins:e.filter((function(e){var t;return"MASSTRANSIT"!==e.pinType||!e.balloonItems||"metro-exit"!==(null===(t=e.balloonItems[0])||void 0===t?void 0:t.iconType)})),isFinished:!0}}function Da(e){var t=Ba(e);return t?Fa(t,e):{pins:e,isFinished:!0}}function La(e){var t=e.reduce((function(e,t,n){return"MASSTRANSIT"===t.pinType?e.concat(n):e}),[]);return Fa(t.length>2?t.slice(0,3):t.slice(0,2),e)}function za(e){var t=Ba(e);return t?function(e,t){var n=e[0],o=e[1],i=t[n],a=t[o];if("MASSTRANSIT"!==i.pinType||"MASSTRANSIT"!==a.pinType)return{pins:t,isFinished:!0};if(!i.balloonItems||!a.balloonItems)return{pins:t,isFinished:!0};var s=i.balloonItems[0].initialText===a.balloonItems[0].initialText&&i.balloonItems[0].color===a.balloonItems[0].color;return t[o]=S(a,s?Object(r.a)(Object(r.a)({},i),{},{pinIndex:a.pinIndex,rotated:!1}):{rotated:!1,text:"",balloonItems:[i.balloonItems[0],a.balloonItems[0]]}),{pins:t.filter((function(e){return e.pinIndex!==i.pinIndex})),isFinished:!1}}(t,e):{pins:e,isFinished:!0}}function Aa(e){var t=e.findIndex((function(e,t,n){var r=n[t+1];return r&&"MASSTRANSIT"===e.pinType&&"MASSTRANSIT"===r.pinType&&e.text===r.text})),n=-1!==t?[e[t],e[t+1]]:[];return 2===n.length&&"MASSTRANSIT"===n[0].pinType&&"MASSTRANSIT"===n[1].pinType?n[0].balloonItems&&1===n[0].balloonItems.length&&n[1].balloonItems&&1===n[1].balloonItems.length&&n[0].balloonItems[0].color!==n[1].balloonItems[0].color?{pins:e,isFinished:!0}:{pins:[].concat(e.filter((function(e){return!n.includes(e)})),[n[1]]),isFinished:!0}:{pins:e,isFinished:!0}}function Ua(e){return{pins:e.map((function(e){return"MASSTRANSIT"!==e.pinType||!e.balloonItems||2===e.balloonItems.length||e.first||"MASSTRANSIT"!==e.pinType||1!==e.balloonItems.length||e.first?e:S(e,{balloonItems:void 0,dotColor:e.balloonItems&&e.balloonItems[e.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0})})),isFinished:!0}}function Fa(e,t){var n=e.map((function(e){return t[e].rotated?1:0})),r=Math.pow(2,n.length)-1,o=parseInt(n.join(""),2);return o<r?((o+1).toString(2).padStart(n.length,"0").split("").map(Number).map(Boolean).forEach((function(n,r){t[e[r]]=S(t[e[r]],{rotated:n})})),{pins:t,isFinished:!1}):{pins:t,isFinished:!0}}function Ba(e){for(var t=e.map((function(e,t){return{pin:e,index:t}})).filter((function(e){var t=e.pin;return"MASSTRANSIT"===t.pinType&&t.balloonItems&&1===t.balloonItems.length})),n=[],r=1;r<t.length;r++)if(t[r-1].pin.pinIndex===t[r].pin.pinIndex-1){n.push(t[r-1],t[r]);break}return n.length>0?[n[0].index,n[1].index]:null}function Ha(e){var t=e.findIndex((function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems&&2===e.balloonItems.length}));if(-1===t)return{pins:e,isFinished:!0};var n=e[t];if("MASSTRANSIT"!==n.pinType||!n.balloonItems||2!==n.balloonItems.length)return{pins:e,isFinished:!0};var r={pinIndex:n.pinIndex-1,balloonItems:[n.balloonItems[0]],coordinates:n.balloonItems[0].initialCoordinates,last:!0,pinType:ta,rotated:!1,text:n.balloonItems[0].initialText},o={pinIndex:n.pinIndex,balloonItems:[n.balloonItems[1]],coordinates:n.balloonItems[1].initialCoordinates,first:!0,pinType:ta,rotated:!1,text:n.balloonItems[1].initialText},i=[].concat(e);return i.splice(t,1,r,o),{pins:i,isFinished:!1}}function qa(e){return{pins:[].concat(e).map((function(e){return S(e,{rotated:!1})})),isFinished:!0}}function Wa(e){if(e.filter((function(e){return"ROUTEPOINT"===e.pinType&&e.value})).length>1){var t=e.findIndex((function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0!==e.index&&!e.isLast})),n=[].concat(e);if(-1!==t)return n[t]=S(n[t],{value:""}),{pins:n,isFinished:!1};var r=e.findIndex((function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0===e.index}));if(-1!==r)return n[r]=S(e[r],{value:""}),{pins:n,isFinished:!0}}return{pins:e,isFinished:!0}}function Ga(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return!("SPECIAL"===e.pinType&&"end"===e.position)})),isFinished:!0}}function Va(e){if(e.length<2)return{pins:e,isFinished:!0};var t=e.filter((function(e){return"SPECIAL"!==e.pinType})),n=e.filter((function(e){return"SPECIAL"===e.pinType&&"TOLL_ROAD"===e.type})),r=e.filter((function(e){return"SPECIAL"===e.pinType&&"FORD_CROSSING"===e.type})),o=e.filter((function(e){return"SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type}));return n.length&&t.push(n[0]),r.length&&t.push(r[0]),o.length&&t.push(o[0]),{pins:t,isFinished:!0}}function Ya(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return!("SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type)})),isFinished:!0}}function Za(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return"SPECIAL"!==e.pinType})),isFinished:!0}}var Ka={FORD_CROSSING:{ru:{begin:"poi-alerts-ford-crossing",end:"poi-alerts-ford-crossing-end"}},RUGGED_ROAD:{ru:{begin:"poi-alerts-road-rugged",end:"poi-alerts-rugged-end"}},TOLL_ROAD:{ru:{begin:"poi-alerts-pay-ru",end:"poi-alerts-pay-end-ru"},tr:{begin:"poi-alerts-pay-tr",end:"poi-alerts-pay-end-tr"},uk:{begin:"poi-alerts-pay-uah",end:"poi-alerts-pay-end-uah"},en:{begin:"poi-alerts-pay-usd",end:"poi-alerts-pay-end-usd"}}},$a={STAIRS_UP:sa.a,STAIRS_DOWN:ua.a,STAIRS_UNKNOWN:da.a,GATES:fa.a},Xa=Object(Nt.a)("route-pins-view"),Ja=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updatePins=function(){n.setState({pins:[].concat(n._getRoutePointPins(),n._getMasstransitPins(),n._getConstructionPins(),n._getSpecialRoadPins())})},n._getUpdatedWaypointCoordinates=function(e,t){var r=n.props,o=r.routePoints.filter((function(e,t){return!r.viaIndexes.includes(t)}))[t];return r.routePoints.map((function(t){return o===t?e:t.coords}))},n._onDragStart=function(){n.props.setDragging(!0)},n._onDragMove=function(e,t){var r=n.props,o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!0})},n._onDragEnd=function(e,t){var r=n.props;r.setDragging(!1);var o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!1})},n._getMasstransitPins=function(){var e=n.props;return e.activeRoute&&"paths"in e.activeRoute?e.activeRoute.paths.reduce((function(t,n){return t.concat((r=n.segments,e.config,r.reduce((function(e,t){var n;if(!t.edgePoints||!t.transports)return e;var r,o,i=t.stops&&t.stops[0],a=t.stops&&t.stops[t.stops.length-1];return e.push({balloonItems:[es(t.transports,t.edgePoints[0],i)],pinType:ta,coordinates:t.edgePoints[0],rotated:!1,first:!0,text:null==i?void 0:i.name},{pinType:ta,dotColor:Qa(t.transports),coordinates:t.edgePoints[1]}),(null==a||null===(n=a.exit)||void 0===n?void 0:n.name)&&e.push({pinType:ta,balloonItems:[(r=a.exit,o=a,{iconType:"metro-exit",color:"#666",text:r.name,initialCoordinates:r.coordinates,initialText:r.name,stopId:null==o?void 0:o.id})],coordinates:a.exit.coordinates,rotated:!1,dotSize:"small",text:"Выход"}),e.push({pinType:ta,balloonItems:[es(t.transports,t.edgePoints[1],a)],coordinates:t.edgePoints[1],rotated:!1,last:!0,text:null==a?void 0:a.name}),e}),[])));var r}),[]):[]},n._getMapPlacemarkProps=function(e){var t;switch(e.pinType){case"CONSTRUCTION":return{coordinates:e.coordinates,zIndex:zt.a.routes};case"MASSTRANSIT":return{coordinates:e.coordinates,zIndex:zt.a.routePins.masstransit,blockEvents:!0};case"ROUTEPOINT":var r=n.props,o=e;return o.coords?{zIndex:0===o.index?zt.a.routePins.waypoint+1:o.isLast?zt.a.routePins.waypoint+2:zt.a.routePins.waypoint,coordinates:o.coords,draggable:r.draggable&&!o.disabled&&(!r.draggableIndexes||(null===(t=r.draggableIndexes)||void 0===t?void 0:t.includes(o.index))),onDragStart:n._onDragStart,onDragEnd:function(e){var t=e.coordinates;return n._onDragEnd(t,o.index)},onDragMove:function(e){var t=e.coordinates;return n._onDragMove(t,o.index)}}:null;case"SPECIAL":return{zIndex:zt.a.routes,coordinates:e.coordinates}}return null},n._getConstructionPins=function(){var e=n.props;return e.activeRoute&&"constructions"in e.activeRoute?e.activeRoute.constructions.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{pinType:na})})):[]},n._getSpecialRoadPins=function(){var e=n.props;return e.activeRoute&&"specialRoadPoints"in e.activeRoute&&e.activeRoute.specialRoadPoints?e.activeRoute.specialRoadPoints.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{pinType:ra})})):[]},n._getRoutePointPins=function(){var e=n.props,t="taxi"===e.travelMode,o=s.q(e.travelMode,e.config),i=e.routePoints.every((function(e){return!e.coords||Boolean(e.input)}))&&!e.isRoutePointDragging;return e.routePoints.filter((function(t,n){return!e.viaIndexes.includes(n)})).map((function(e,n,a){var s=t&&0!==n&&n!==a.length-1||n>=o-1&&n!==a.length-1;return Object(r.a)(Object(r.a)({},e),{},{pinType:ea,coordinates:e.coords||[0,0],disabled:s,showText:i,index:n,isLast:n===a.length-1})}))},n._getConstructionNode=function(e){return i.createElement("div",{className:Xa("construction",{type:e.type})},i.createElement(Kt.a,{url:$a[e.type]}))},n._getSpecialRoadPinNode=function(e){var t=n.props.config,r=Ka[e.type],o=r[t.lang],a=Object(Wt.c)(t)?r.ru:r.en,s=r.ru;return i.createElement("div",{className:Xa("special-road",{type:e.type,position:e.position})},i.createElement(qt.a,{name:(o||a||s)[e.position],size:24}))},n._getMasstransitPinNode=function(e){var t=n.props,r=!t.activeRoute||"isIntercityRoute"in t.activeRoute&&t.activeRoute.isIntercityRoute||t.isMapEditing?void 0:t.onStopClick;return i.createElement(ba,Object(bn.a)({},e,{onClick:r}))},n._getWaypointPinNode=function(e){return i.createElement(ja,{text:e.showText?e.value:void 0,index:e.index,isLast:e.isLast,disabled:e.disabled,searchResult:e.searchResult,serviceType:e.serviceType})},n._getRouteItemPinNode=function(e){switch(e.pinType){case"CONSTRUCTION":return n._getConstructionNode(e);case"MASSTRANSIT":return n._getMasstransitPinNode(e);case"ROUTEPOINT":return n._getWaypointPinNode(e);case"SPECIAL":return n._getSpecialRoadPinNode(e)}return null},n._getAlgoSteps=function(){var e=[Ia,xa,Ma],t=n.props.activeRoute&&"masstransit"===n.props.activeRoute.type?[Ta,Aa,Da,Na,qa,Da,za,Ua,Ha,Ua,qa,La,qa,Pa]:[];return[].concat(e,t,[Wa],[Ga,Va,Ya,Za])},n.state={pins:[]},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.activeRoute===e.activeRoute&&this.props.routePoints===e.routePoints||this._updatePins()},n.componentDidMount=function(){this._updatePins()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(ia,{unprocessedPins:this.state.pins,getNodeByPin:this._getRouteItemPinNode,getMapPlacemarkProps:this._getMapPlacemarkProps,algoSteps:this._getAlgoSteps()}),this.state.pins.filter((function(e){return e.pinType===ea})).map((function(e){var t,n=e.uri||(null===(t=e.searchResult)||void 0===t?void 0:t.uri);return n?i.createElement(ma,{key:n,uri:n}):null})))},t}(i.Component);function Qa(e){var t=s.o(e);return Ra.e(t)}function es(e,t,n){var r=s.o(e);return{iconType:r.type,color:Qa(e),city:r.city,text:"underground"===r.type&&r.undergroundLineNumber?r.undergroundLineNumber:r.name,initialCoordinates:t,initialText:null==n?void 0:n.name,stopId:null==n?void 0:n.id}}var ts=Object(U.b)(Ja),ns=n(229),rs=n(259),os=Object(Zn.a)(rs.b,Object(fn.b)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=void 0,n._id=B.a.v4(),t.map.addGroup(n._dataSourceId,n._id,t.style,t.parentGroupId),n}Object(o.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.map.removeGroupAndChildren(this._dataSourceId,this._id)},n.render=function(){return i.createElement(rs.a,{value:{parentGroupId:this._id}},this.props.children)},Object(sn.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||pn.d.DEFAULT_GRAPHICS}}]),t}(i.PureComponent)),is={main:4,underlay:8,dash:[5,10]},as=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getStrokeStyleByType=function(e){return{simplifyPalette:!1,width:is.main,dash:is.dash,opacity:"undergroundWalk"===e?.5:1,palette:t.props.activeRoute.colorizeInfo.map((function(t){var n=t.type,r=t.count;return{color:n===e?"binding"===n?s.a:"#6000ff":ns.a,count:r}}))}},t._getActiveStyle=function(){return[t._getStrokeStyleByType("undergroundWalk"),t._getStrokeStyleByType("walk"),t._getStrokeStyleByType("binding"),{width:is.underlay,color:"#fff"}]},t._getInactiveStyle=function(){return[{width:is.main,color:"#6d6d6d"},{width:is.underlay,color:"#fff"}]},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},i.createElement(Ft.a,{key:t.activeRoute.uuid,dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:this._getActiveStyle(),cursor:"default",zIndex:10},geometry:s.p(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?t.inactiveRoutes.map((function(n){return i.createElement(Ft.a,{key:n.uuid,dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:e._getInactiveStyle(),cursor:"pointer"},geometry:s.p(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})})):null)},t}(i.Component),ss=n(371),cs=n.n(ss),us=n(372),ls=n.n(us),ds=n(373),ps=n.n(ds),fs=n(374),vs=n.n(fs),ms=n(375),hs=n.n(ms),gs=n(376),bs=n.n(gs),ys=n(377),_s=n.n(ys),Es=n(378),ws=n.n(Es),Ss=n(379),Os=n.n(Ss),Cs=n(380),js=n.n(Cs),Rs=n(381),ks=n.n(Rs),Is=n(382),xs=n.n(Is),Ms=n(383),Ts=n.n(Ms),Ps=n(384),Ns=n.n(Ps),Ds=n(385),Ls=n.n(Ds),zs=n(386),As=n.n(zs),Us=n(387),Fs=n.n(Us),Bs=n(388),Hs=n.n(Bs),qs=n(389),Ws=n.n(qs),Gs=n(390),Vs=n.n(Gs),Ys={start:[cs.a],middle:["",ls.a,ps.a,vs.a,hs.a,bs.a,_s.a,ws.a,Os.a,js.a].concat(new Array(40).fill(Vs.a)),finish:["",ks.a,xs.a,Ts.a,Ns.a,Ls.a,As.a,Fs.a,Hs.a,Ws.a].concat(new Array(40).fill(Ws.a))};var Zs=Object(U.b)((function(e){return e.cursor?i.createElement(En,{src:(t=e.cursor,n=t.split("_"),r=n[0],o=n[1],Ys[r][Number(o)]),basePoint:[32,44]}):null;var t,n,r,o})),Ks={stroke:[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],cursor:"pointer"},$s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getBicycleActiveDrawingStyle=function(){var e=t.props.mapLocation.zoom>=17,n={width:s.r(t.props.mapLocation.zoom).main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(t){return{count:t.count,color:["PEDESTRIAN","PEDESTRIAN_UNDERGROUND"].includes(t.type)&&e||"BINDING"===t.type?ns.a:"AUTO"===t.type?"#737ce6":"#54b235"}}))},r={width:4,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"BINDING"===e.type?s.a:ns.a}})),dash:[5,10]},o={width:e?4:0,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"PEDESTRIAN"===e.type?"#737ce6":ns.a}})),dash:[5,10]},i={width:e?4:0,opacity:.5,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"PEDESTRIAN_UNDERGROUND"===e.type?"#737ce6":ns.a}})),dash:[5,10]};return{stroke:[{width:1.5,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"BICYCLE"===e.type?"#fff":ns.a}})),dash:[2,4]},n,r,o,i,{width:s.r(t.props.mapLocation.zoom).underlay,color:"#fff"}],cursor:"default",zIndex:10}},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(Ft.a,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getBicycleActiveDrawingStyle(),geometry:s.p(e.activeRoute),onFastClick:function(t,n){return e.onRouteClick(e.activeRoute,n.coordinates)}}),e.inactiveRoutes?i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},e.inactiveRoutes.map((function(t){return i.createElement(Ft.a,{key:t.uuid,dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:Ks,geometry:s.p(t),onFastClick:function(n,r){return e.onRouteClick(t,r.coordinates)}})}))):null)},t}(i.Component);n(391);var Xs=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===s?a==a&&!Object(ue.a)(a):n(a,s)))var s=a,c=i}return c};var Js=function(e,t){return e<t};var Qs=function(e,t){return e&&e.length?Xs(e,qe(t,2),Js):void 0},ec=(n(393),n(62)),tc=Object(Nt.a)("mrc-map-icon-view"),nc=Object(ec.a)((function(e){return i.createElement(Dt.a,{disableRoundCoordinates:!0,coordinates:e.coordinates,nonInteractive:!e.onClick,zIndex:e.zIndex,onClick:e.onClick},i.createElement("div",{className:tc({type:e.type||"main"}),style:{transform:"rotate("+(e.direction?e.direction:0)+"deg)"},ref:e.forwardedRef?e.forwardedRef:null}))})),rc=(n(395),Object(Nt.a)("mrc-preview-balloon")),oc={main:20,side:20},ic=function(e){function t(t){var n;return(n=e.call(this,t)||this)._image=i.createRef(),n._onLoad=function(){n.setState({isPreviewLoaded:!0})},n._renderSpinner=function(){var e;return n.state.isPreviewLoaded||(null===(e=n._image.current)||void 0===e?void 0:e.complete)?null:i.createElement("div",{className:rc("placeholder")},i.createElement("div",{className:rc("spinner")},i.createElement(gr,{view:"large"})))},n.state={isPreviewLoaded:!1},n}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Lt.a,{name:"preview_balloon"},i.createElement("div",{className:rc()},i.createElement(go,{type:"transparent",coordinates:e.coordinates,position:"bottom-right",offset:oc,onClose:function(){},showArrow:!1,isShown:!0},i.createElement("div",{className:rc("balloon")},this._renderSpinner(),i.createElement("img",{ref:this._image,className:rc("image",{loaded:this.state.isPreviewLoaded}),src:e.image.url,onLoad:this._onLoad})))))},t}(i.Component),ac=function(e){function t(t){var n;return(n=e.call(this,t)||this)._leaveTimer=0,n._getNearestFeature=function(e){var t=n.props,r=Qs(t.features,(function(t){return H(t.geometry.coordinates,e)}));if(!r||r.properties.id!==t.selectedFeatureId)return r},n._onClick=function(){var e=n.state.currentFeature;e&&n.props.onClick&&n.props.onClick(e.properties.id),n.setState({currentFeature:null})},n._onMouseMove=function(e,t){var r=t.coordinates,o=ko(n.props.features.map((function(e){return e.geometry.coordinates})),r,n.props.lineWidth,n.props.zoom);if(o&&!("point"in o)){var i=n._getNearestFeature(o);n.setState({currentFeature:i||null})}},n._onMouseEnter=function(){window.clearTimeout(n._leaveTimer)},n._onMouseLeave=function(){n._leaveTimer=window.setTimeout((function(){n.setState({currentFeature:null})}),200)},n._renderPreview=function(){var e=n.state;return e.currentFeature?"placemark"===n.props.preview?i.createElement(nc,{coordinates:e.currentFeature.geometry.coordinates,direction:e.currentFeature.properties.heading,type:"additional"}):i.createElement(ic,{coordinates:e.currentFeature.geometry.coordinates,image:e.currentFeature.properties.imagePreview}):null},n.state={currentFeature:null},n._onMouseMove=Object(Go.a)(n._onMouseMove,16),n}Object(o.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){window.clearTimeout(this._leaveTimer)},n.render=function(){var e=this.props;return i.createElement(i.Fragment,null,e.children({onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick}),this._renderPreview())},t}(i.Component),sc=n(75),cc=Object(Nt.a)("map-routes-auto-view"),uc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getPoints=function(){var e=n.props;return e.activeRoute.refPointsLineCoordinates.map((function(t,r){return n.state.editingIndex===r?e.routePoints[r].coords:t}))},n._getPointsWithVia=function(){return{points:n.props.routePoints.map((function(e){return e.coords})),isViaPoints:n.props.routePoints.map((function(e,t){return n.props.viaIndexes.includes(t)}))}},n._getViaIndexesFromRefsWithVia=function(e){return e.map((function(e,t){return e?t:0})).filter(Boolean)},n._removeViaPoint=function(e){if(n.props.onRoutePointsChange){var t=n._getPointsWithVia(),r=t.points,o=t.isViaPoints;r.splice(e,1),o.splice(e,1),n.props.onRoutePointsChange(r,{viaIndexes:n._getViaIndexesFromRefsWithVia(o),isRough:!1})}},n._addViaPoint=function(e,t){if(n.props.onRoutePointsChange){var r=n._getPointsWithVia(),o=r.points,i=r.isViaPoints;o.splice(t,0,e),i.splice(t,0,!0),n.props.setDragging(!0),n.props.onRoutePointsChange(o,{viaIndexes:n._getViaIndexesFromRefsWithVia(i),isRough:!1})}},n._updateViaPoint=function(e,t,r){if(n.props.onRoutePointsChange){var o=n.props.routePoints.slice().map((function(e){return e.coords}));o.splice(t,1,e),n.setState({editingIndex:r?t:void 0}),n.props.onRoutePointsChange(o,{viaIndexes:n.props.viaIndexes,isRough:r})}},n._getActiveRouteStrokeStyles=function(){var e=n.props;return s.f({route:e.activeRoute,isDefaultColor:e.isDefaultColor},e.config)},n._onPointUpdate=function(e,t,r){n._updateViaPoint(e,t,!r),n.props.setDragging(!r)},n._onMapUpdate=function(){n.setState({mapAzimuth:n.props.map.azimuth})},n._renderPointElement=function(e){return n.props.activeRoute.refPointsLineCoordinates.reduce((function(e,t,r){return n.props.viaIndexes.includes(r)?e:e.concat(r)}),[]).includes(e)?null:i.createElement("div",{className:cc("via-point")})},n._renderActiveRoute=function(e){var t=n.props,r=n._getActiveRouteStrokeStyles().underlayStyle.width,o=e?{onLineMouseEnter:e.onMouseEnter,onLineMouseMove:e.onMouseMove,onLineMouseLeave:e.onMouseLeave,onPreviewPointMouseLeave:e.onMouseLeave}:{};return i.createElement(Do,Object(bn.a)({lineStyle:{stroke:[{width:r,opacity:0}],zIndex:12},polyLineCoordinates:t.activeRoute.coordinates||[],points:n._getPoints(),renderPointElement:n._renderPointElement,previewPointElement:i.createElement("div",{className:cc("via-point",{preview:!0})}),isActive:t.isEditorActive,onPointAdd:n._addViaPoint,onPointUpdate:n._onPointUpdate,onPointRemove:n._removeViaPoint,onPreviewPointClick:function(r,o){o&&n.props.onRouteClick(t.activeRoute,o.coordinates),null==e||e.onClick()}},o))},n._renderActiveMrcFeature=function(){var e=n.props;if(e.isMrcPlayerHidden||e.isLoading||"comparison"===e.travelMode||e.feedback&&"route/edit/better"===e.feedback.type||!e.mrcFeatures||!e.activeMrcIndex&&0!==e.activeMrcIndex||e.isRoutePointDragging||!e.isMrcPlaying&&0===e.activeMrcIndex)return null;var t=e.mrcFeatures[e.activeMrcIndex];return t?i.createElement(i.Fragment,null,i.createElement(nc,{coordinates:t.geometry.coordinates,direction:t.properties.heading+Object(sc.a)(n.state.mapAzimuth)}),i.createElement(vn.b,{onUpdate:n._onMapUpdate})):null},n.state={mapAzimuth:t.map.azimuth},n}return Object(o.a)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=this._getActiveRouteStrokeStyles().underlayStyle.width,o=!("route/edit/better"===(null===(e=n.feedback)||void 0===e?void 0:e.type))&&!n.config.uatraits.isMobile&&"comparison"!==n.travelMode;return i.createElement(i.Fragment,null,o?i.createElement(Lt.a,{name:"mrc_route_thread",logClick:!0},i.createElement(ac,{features:n.mrcFeatures||[],lineWidth:r,zoom:n.zoom,onClick:n.onMrcClick,preview:"balloon"},this._renderActiveRoute)):this._renderActiveRoute(),i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.7}},i.createElement(Ft.a,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:s.g({route:n.activeRoute,isActive:!0,isDefaultColor:n.isDefaultColor},n.config),geometry:s.p(n.activeRoute)}),n.inactiveRoutes?i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.86}},n.inactiveRoutes.map((function(e){return i.createElement(Ft.a,{key:e.uuid,dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:s.g({route:e,isActive:!1,isDefaultColor:n.isDefaultColor},n.config),geometry:s.p(e),onFastClick:function(n,r){return t.props.onRouteClick(e,r.coordinates)}})}))):null),n.config.uatraits.isMobile?null:this._renderActiveMrcFeature())},t}(i.Component),lc=Object(fn.b)({shouldWait:!0})(Object(U.b)(uc)),dc=(n(397),[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}]),pc={main:4,dash:[5,10]},fc=Object(Nt.a)("map-routes-masstransit-view"),vc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getStopPlacemarksData=function(){return t.props.activeRoute.paths.reduce((function(e,t){return e.concat(t.segments.reduce((function(e,t){if(!t.stops)return e;var n=t.stops.reduce((function(e,t){return t.coordinateOnRoute?e.concat([t.coordinateOnRoute]):e}),[]);return n.shift(),e.concat({color:t.transports?mc(t.transports):void 0,coordinates:n})}),[]))}),[])},t._getColorForTransport=function(e){var n=t.props,r=e.type,o=e.segmentIndex;if(["walk","transfer","undergroundWalk","binding"].includes(r))return ns.a;var i=n.activeRoute.paths.reduce((function(e,t){return e.concat(t.segments)}),[]);return o&&i[o]&&i[o].transports?mc(i[o].transports):Ra.c(r)},t._getActiveDrawingStyle=function(){var e=t.props;return{cursor:"default",zIndex:10,stroke:[{simplifyPalette:!1,width:s.r(e.mapLocation.zoom).main,palette:e.activeRoute.colorizeInfo.map((function(e){return{color:t._getColorForTransport(e),count:e.count}}))},{simplifyPalette:!1,width:pc.main,dash:pc.dash,opacity:.5,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:["undergroundWalk","transfer"].includes(t)?"#9d64fb":ns.a,count:n}}))},{simplifyPalette:!1,width:pc.main,dash:pc.dash,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:"walk"===t?"#9d64fb":ns.a,count:n}}))},{simplifyPalette:!1,width:pc.main,dash:pc.dash,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:"binding"===t?s.a:ns.a,count:n}}))},{width:s.r(e.mapLocation.zoom).underlay,opacity:.9,color:"#fff"}]}},t._renderStopDots=function(){return t.props.mapLocation.zoom<14?null:t._getStopPlacemarksData().map((function(e,t){return e.coordinates.map((function(n,r){return i.createElement(Dt.a,{key:t+"_"+r,coordinates:n,zIndex:zt.a.default},i.createElement("div",{className:fc("stop-dot"),style:{borderColor:e.color}}))}))}))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(i.Fragment,null,i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(Ft.a,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getActiveDrawingStyle(),geometry:s.p(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(os,{dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},t.inactiveRoutes.map((function(t){return i.createElement(Ft.a,{key:t.uuid,dataSourceId:pn.d.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{cursor:"pointer",stroke:dc},geometry:s.p(t),onFastClick:function(n,r){return e.props.onRouteClick(t,r.coordinates)}})}))):null),this._renderStopDots())},t}(i.Component);function mc(e){var t=s.o(e);return Ra.e(t)}var hc=Object(U.b)(vc),gc=(n(399),n(401),n(403)),bc=n.n(gc),yc=n(404),_c=n.n(yc),Ec=n(405),wc=n.n(Ec),Sc=n(406),Oc=n.n(Sc),Cc=n(407),jc=n.n(Cc),Rc=n(408),kc=n.n(Rc),Ic=n(409),xc=n.n(Ic),Mc=n(410),Tc=n.n(Mc),Pc=n(411),Nc=n.n(Pc),Dc=n(412),Lc=n.n(Dc),zc=n(413),Ac=n.n(zc),Uc=Object(Nt.a)("route-warning-view"),Fc={barrier:bc.a,blocked:_c.a,ferries:wc.a,ford:Oc.a,general:jc.a,"rugged-road":kc.a,"tolls-com":xc.a,"tolls-kz":Tc.a,"tolls-tr":Nc.a,"tolls-ua":Lc.a,tolls:Ac.a},Bc=function(e){var t=e.type;return i.createElement("div",{className:Uc("wrapper")},i.createElement(Kt.a,{url:Fc[t],className:Uc({type:t})}))},Hc={pedestrian:"pedestrian",bicycle:"bikes",auto:"car",masstransit:"bus"},qc=Object(Nt.a)("map-widget-routes-content-view"),Wc=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n._renderContent=function(){switch(this.props.route.type){case"bicycle":case"pedestrian":case"masstransit":var e=s.l(this.props.route.duration,this.props.config);return this._renderContentCommon(e,this.props.route.distance.text);case"auto":return this._renderContentAuto();default:return null}},n._renderRouteWarning=function(e){return"auto"===e.type?e.flags.blocked?i.createElement(Bc,{type:"blocked"}):e.flags.hasTolls?i.createElement(Bc,{type:"tolls"}):null:null},n._renderContentCommon=function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:qc("header")},i.createElement(qt.a,{name:Hc[this.props.route.type],size:24,inline:!0,className:qc("icon")}),e,i.createElement("div",{className:qc("warning")},this._renderRouteWarning(this.props.route))),i.createElement("div",{className:qc("body")},t))},n._renderContentAuto=function(){var e=this.props;if("auto"!==e.route.type)return null;var t=(function(params){return params.distance+", без пробок: "+params.duration;})({duration:s.l(e.route.duration,e.config),distance:e.route.distance.text}),n=s.l(e.route.durationInTraffic,e.config),r=e.route.flags.blocked?"Проезд закрыт":n;return this._renderContentCommon(r,t)},n.render=function(){return i.createElement("div",{className:qc()},this._renderContent(),i.createElement(mr.a,{view:"secondary-blue",size:"small",url:this.props.url,target:"_blank",isStretched:!0},"Подробнее"))},t}(i.Component),Gc=Object(U.b)(Wc),Vc=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._checkAndChangeBounds=function(){var e,n,r;if(!(t.props.routerResponse&&0===t.props.routerResponse.routes.length||"routes"!==(null===(e=t.props.config.mapWidget)||void 0===e?void 0:e.activeMode))){var o=(null===(n=t.props.routerResponse)||void 0===n?void 0:n.routes[t.props.activeRouteIndex])||(null===(r=t.props.routerResponse)||void 0===r?void 0:r.routes[0]),i=null==o?void 0:o.bounds,a=t.props.routePoints.filter((function(e){return Boolean(e.coords)}));if(0!==a.length){var s=a?Bi(a.map((function(e){return e.coords}))):void 0,c=i||s;c&&t.props.onBoundsChange(c)}}},t._onRoutePointsChange=function(e){var n=t.props.routePoints.findIndex((function(t){return!!t.coords&&!e.includes(t.coords)}));t.props.updateRoutePoint({coords:e[n],value:""},n)},t._onMapClick=function(e,n){var r={coords:n.coordinates,value:"",input:""};t.props.updateRoutePoint(r,t.props.emptyPointIndex)},t._renderContent=function(){var e,n;if(!t.props.content||!t.props.routerResponse||t.props.isRoutePointDragging)return null;var o=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0];if(!o)return null;var a=t.props.content.data.coordinates||(null===(e=o.coordinates)||void 0===e?void 0:e[Math.floor((null===(n=o.coordinates)||void 0===n?void 0:n.length)/2)]);if(!a)return null;var l=s.s({routePoints:t.props.routePoints,viaIndexes:t.props.routerResponse.viaIndexes||[],travelMode:t.props.routerResponse.type,activeRouteIndex:t.props.activeRouteIndex,routerResponse:null,detailedIndex:-1,settings:{auto:{ignoreTrafficJams:hi(t.props.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},t.props.config),d={l:t.props.isTrafficLayerEnabled?t.props.config.query.l||"trf":void 0},p=Object(u.a)(c.a(c.k("",Object(r.a)(Object(r.a)(Object(r.a)({},l),d),{routes:{avoidTypes:void 0}})),t.props.config));return i.createElement(li,{coordinates:a,displayType:"balloon",mapLocation:t.props.mapLocation,onClose:t.props.resetContentData,offset:{main:3,side:3},mapSize:t.props.mapSize,key:o.uuid},i.createElement(Gc,{route:o,url:p}))},t._renderRouteView=function(){if(!t.props.routerResponse||0===t.props.routerResponse.routes.length)return null;var e=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0],n=t.props.routerResponse.routes.filter((function(t){return t.uuid!==e.uuid}));switch(e.type){case"pedestrian":return i.createElement(as,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick});case"bicycle":return i.createElement($s,{activeRoute:e,inactiveRoutes:n,mapLocation:t.props.mapLocation,onRouteClick:t.props.onRouteClick});case"auto":return i.createElement(lc,{activeRoute:e,inactiveRoutes:n,viaIndexes:t.props.routerResponse.viaIndexes||[],routePoints:t.props.routePoints,zoom:t.props.mapLocation.zoom,feedback:null,isDefaultColor:Boolean(t.props.isTrafficLayerEnabled)||(e.colorizeInfo||[]).every((function(e){return"UNKNOWN"===e.type})),isLoading:!1,isEditorActive:!1,setDragging:Yc,onRouteClick:t.props.onRouteClick});case"masstransit":return i.createElement(hc,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick,mapLocation:t.props.mapLocation});default:return null}},t._renderRoutePinsView=function(){var e,n,r,o=(null===(e=t.props.routerResponse)||void 0===e?void 0:e.routes[t.props.activeRouteIndex])||(null===(n=t.props.routerResponse)||void 0===n?void 0:n.routes[0])||null;return i.createElement(ts,{activeRoute:o,travelMode:null==o?void 0:o.type,routePoints:t.props.routePoints,viaIndexes:(null===(r=t.props.routerResponse)||void 0===r?void 0:r.viaIndexes)||[],draggable:!0,isRoutePointDragging:t.props.isRoutePointDragging,draggableIndexes:t.props.draggablePointIndexes,setDragging:t.props.setDragging,onRoutePointsChange:t._onRoutePointsChange})},t._renderRouteCursor=function(){return t.props.cursor?i.createElement(Zs,{cursor:t.props.cursor}):null},t._renderMapListener=function(){return-1===t.props.emptyPointIndex?null:i.createElement(vn.b,{onClick:t._onMapClick})},t}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkAndChangeBounds()},n.componentDidUpdate=function(e){!e.routerResponse&&this.props.routerResponse&&this._checkAndChangeBounds()},n.render=function(){return i.createElement(i.Fragment,null,this._renderRouteView(),this._renderRoutePinsView(),this._renderRouteCursor(),this._renderMapListener(),this._renderContent())},t}(i.Component);function Yc(){}var Zc=Object(U.b)(Vc),Kc=(n(414),n(51)),$c=Object(Nt.a)("user-maps-map-view"),Xc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderFeature=function(e,t,r){var o=(e.zIndex||r.length-t)+(t===n.state.hoveredIndex?r.length:0),a=!1;if("placemark"===e.type){var s;if(e.content)if("text"===e.content.type)s=i.createElement("div",{className:$c("text")},e.content.text);else{var c=Wt.b(e.content.name),u="fallback"===e.content.name;c&&(a=!u,s=i.createElement(Kt.a,{className:$c("icon",{fallback:u}),url:c}))}return i.createElement(nn,{key:t,coordinates:e.coordinates,zIndex:o,color:e.stroke&&e.stroke.color,onClick:function(){return n.props.onFeatureClick(t,e.coordinates)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:-1})},comma:e.isComma,caption:e.caption,size:a?"large":"medium",outline:!0},s)}return i.createElement(Ft.a,{key:t,geometry:n._moveGeometryToZeroWorld(e.geometry),drawingStyle:{zIndex:o,cursor:n.props.cursor||"pointer",stroke:e.stroke?[e.stroke]:void 0,fill:"polygon"===e.type&&e.fill?e.fill.color:void 0,fillOpacity:"polygon"===e.type&&e.fill?e.fill.opacity:void 0,interactive:Boolean(e.balloonCoordinates)},onClick:function(e,r){return n.props.onFeatureClick(t,r.coordinates)}})},n.state={hoveredIndex:-1},n}Object(o.a)(t,e);var n=t.prototype;return n._moveGeometryToZeroWorld=function(e){var t=1/0,n=-1/0;Object(Kc.d)(e,(function(e){t=e[0]<t?e[0]:t,n=e[0]>n?e[0]:n}));var r=360*-Math.trunc((n+t)/360);return r?Object(Kc.d)(e,(function(e){return[e[0]+r,e[1]]})):e},n.render=function(){return this.props.features.map(this._renderFeature)},t}(i.PureComponent),Jc=Object(U.b)(Xc),Qc=(n(416),n(418),Object(Nt.a)("user-maps-balloon-content")),eu=function(e){return i.createElement(i.Fragment,null,"placemark"===e.feature.type&&e.feature.caption&&e.showTitle?i.createElement("div",{className:Qc("title"),dangerouslySetInnerHTML:{__html:e.feature.caption}}):null,i.createElement("span",{dangerouslySetInnerHTML:{__html:e.feature.isTextInTitle?e.feature.title:e.feature.subtitle}}))},tu=Object(Nt.a)("map-widget-user-maps-content-view"),nu=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){return this.props.feature.balloonCoordinates?i.createElement("div",{className:tu()},i.createElement(eu,{showTitle:!1,feature:this.props.feature})):null},t}(i.Component),ru=Object(U.b)(nu),ou=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content&&(t.props.content.data.feature.isTextInTitle?t.props.content.data.feature.title:t.props.content.data.feature.subtitle)?i.createElement(li,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,displayType:t._getDisplayType(),onClose:t.props.resetContentData,mapSize:t.props.mapSize},i.createElement(ru,{feature:t.props.content.data.feature})):null},t}return Object(o.a)(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,i.createElement(Jc,{features:this.props.userMap.features,cursor:this.props.cursor,onFeatureClick:this.props.onFeatureClick}),this._renderContent())},t}(i.Component),iu=n(53),au=Object(iu.a)("time",{getToday:function(){return new Date},timeContext:{hydrationPhaseTime:null}}),su=au.connect;au.Provider,au.Context;var cu=su;var uu={Polygon:.025,MultiLineString:.05},lu=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timestamp=0,n._intensityRaf=-1,n._calculateIntensity=function(){if(n._stopAnimateIntensity(),n._getGeometry()){var e=n._getTargetIntensity();n.state.intensity!==e&&(n._stopAnimateIntensity(),n._startAnimateIntensity())}},n._startAnimateIntensity=function(){n._intensityRaf=window.requestAnimationFrame(n._animateIntensity)},n._stopAnimateIntensity=function(){window.cancelAnimationFrame(n._intensityRaf),n._timestamp=0},n._animateIntensity=function(){var e=n._getGeometry();if(e){var t=n._timestamp?(n.props.getToday().getTime()-n._timestamp)/(1e3/30):1,r=uu[e.type]*t,o=n._getTargetIntensity(),i=n.state.intensity,a=i<o?Math.min(o,i+r):Math.max(o,i-r);n.props.config.query["no-animation"]&&(a=o),n.setState({intensity:a}),a!==o?(n._timestamp=n.props.getToday().getTime(),n._startAnimateIntensity()):n._timestamp=0}},n._getTargetIntensity=function(){var e,t=n._getGeometry();if(!t)return 0;var r=n.props.searchResults.items[0],o="MultiLineString"===t.type&&r&&pu(r);if("Polygon"!==t.type&&!o)return 1;var i,a,s,c=Bi((e=[]).concat.apply(e,t.coordinates));return i=c,a=n.props.mapLocation.bounds,s=n.props.mapLocation.zoom,function(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}(Object(_i.a)(i,s),Object(_i.a)(a,s))?0:1},n._getDrawingStyle=function(e,t){var r=n.state.intensity;switch(e.type){case"MultiLineString":return pu(t)?{stroke:[{color:"#a3a8a8",opacity:r,width:3}],interactive:!1}:{stroke:[{color:"#000000",opacity:.18,width:6}],interactive:!1};case"Polygon":return{fill:fu(t)?"#00ff00":"#ff4141",fillOpacity:.05*r,stroke:[{color:fu(t)?"#359400":"#d54747",opacity:.7*r,width:2}],interactive:!1};default:return}},n._getGeometry=function(){var e=n.props.searchResults,t=e.requestDisplayGeometry;if(!t){var r=e.items[0];r&&"displayGeometry"in r&&(t=r.displayGeometry)}return Object(K.a)(t)},n.state={intensity:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calculateIntensity()},n.componentDidUpdate=function(e){var t=this.props;e.mapLocation===t.mapLocation&&e.searchResults===t.searchResults||this._calculateIntensity()},n.componentWillUnmount=function(){this._stopAnimateIntensity()},n.render=function(){var e=this.props.searchResults.items[0];if(!e)return null;var t=this._getGeometry();if(!t)return null;var n=this._getDrawingStyle(t,e);return i.createElement(Ft.a,{geometry:t,drawingStyle:n})},t}(i.PureComponent),du=["rezervation","forest","park","garden","grass"];function pu(e){switch(e.type){case"toponym":return"route"===e.kind;default:return!1}}function fu(e){switch(e.type){case"toponym":return"vegetation"===e.kind;case"business":return(e.categories||[]).some((function(e){return du.includes(e.class||"")}));default:return!1}}var vu=cu(Object(U.b)(Object(fn.b)({shouldWait:!0})(lu))),mu=(n(420),n(422),n(424),{max:2});function hu(e){return function(t,n){return function(e,t,n){void 0===n&&(n=mu),"number"==typeof n.max&&(e=Math.round(e*Math.pow(10,n.max))/Math.pow(10,n.max));var r=e.toString().split("."),o=r[0],i=r[1],a=void 0===i?"":i;return t.thousands&&(o=o.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t.thousands)),"number"==typeof n.max&&(a=a.slice(0,n.max)),"number"==typeof n.min&&a.length<n.min&&(a+="0".repeat(n.min-a.length)),[o,a].filter(Boolean).join(t.decimal)}(t,e,n)}}var gu=hu({decimal:",",thousands:" "}),bu={ru:gu,en:hu({decimal:".",thousands:","}),uk:gu,tr:hu({decimal:",",thousands:"."}),uz:gu,kk:gu};function yu(e,t,n){return bu[t](e,n)}var _u={RUB:!0,EUR:!0,USD:!0,GBP:!0,BYN:!0,UAH:!0,KZT:!0,AMD:!0,AZN:!0,GEL:!0,GHC:!0,GHS:!0,ILS:!0,XOF:!0,KGS:!0,LVL:!0,LTL:!0,MDL:!0,RON:!0,RSD:!0,UZS:!0},Eu={RUB:"₽",EUR:"€",USD:"$",GBP:"£",UAH:"грн.",ILS:"₪"},wu={XOF:"CFA"};function Su(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(_u).reduce((function(e,n){var r=t.includes(n)&&Eu[n];return e[n]={isSymbol:Boolean(r),value:r||wu[n]||n},e}),{})}var Ou=Su("RUB","EUR","USD","GBP","UAH","ILS"),Cu=Su("UAH"),ju=Su("EUR","USD","GBP","ILS"),Ru=Su("EUR","USD","GBP","ILS"),ku=function(e,t){return e+" "+t.value},Iu=function(e,t){return t.value+(t.isSymbol?"":" ")+e};function xu(e,t){return function(n,r){return e(n,t[r])}}var Mu=xu(ku,Ou),Tu=xu(ku,Cu);xu(Iu,Ru),xu(Iu,ju);var Pu=n(426),Nu=n.n(Pu),Du=n(427),Lu=n.n(Du),zu=n(428),Au=n.n(zu),Uu=Object(Nt.a)("business-rating-badge-view"),Fu=Object(U.b)((function(e){var t=Math.round(2*e.ratingValue),n=Math.floor(t/2),r=!1;2*n!==t&&(r=!0);var o=e.size||"m",a=e.collapseStars?1:5;return i.createElement(Lt.a,{name:"business_rating"},i.createElement("span",{className:Uu({size:o})},i.createElement("div",{className:Uu("stars")},new Array(a).fill(null).map((function(e,t){var a=r&&t===n,s=t>=(r?n+1:n),c=s&&Au.a||a&&Lu.a||Nu.a;return i.createElement(Kt.a,{url:c,className:Uu("star",{half:a,empty:s,size:o}),key:t})}))),e.onlyStars?null:i.createElement("span",{className:Uu("rating")},i.createElement("span",{className:Uu("rating-text",{size:o})},yu(e.ratingValue,e.config.lang,{min:1,max:1})))))})),Bu=Object(Nt.a)("map-widget-business-rating-view"),Hu=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getReviewUrl=function(){if(!t.props.disableLink){var e=c.b(t.props.result,{sublanding:"reviews"},{},{"add-review":""});return Object(u.a)(c.a("/"+e,t.props.config))}},t._renderContent=function(){var e=t.props;return e.result.ratingData?e.result.ratingData.ratingValue?i.createElement(Fu,{ratingValue:e.result.ratingData.ratingValue}):(function(params){return (params.count?params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "отзыв" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "отзыва" : "отзывов")):"Ещё нет отзывов");})({count:e.result.ratingData.reviewCount}):null},t}return Object(o.a)(t,e),t.prototype.render=function(){return i.createElement(hr.a,{text:"Оценить место",position:"bottom",isAir:!0},i.createElement("a",{className:Bu(),href:this._getReviewUrl(),target:"_blank"},this._renderContent()))},t}(i.Component),qu=Object(U.b)(Hu),Wu=(n(429),n(294));function Gu(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(vt.a)(e,t),r=n.getFullYear(),o=t||{},i=o.locale,a=i&&i.options&&i.options.firstWeekContainsDate,s=null==a?1:Object(ft.a)(a),c=null==o.firstWeekContainsDate?s:Object(ft.a)(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setFullYear(r+1,0,c),u.setHours(0,0,0,0);var l=mt(u,t),d=new Date(0);d.setFullYear(r,0,c),d.setHours(0,0,0,0);var p=mt(d,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=p.getTime()?r:r-1}function Vu(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,i=null==o?1:Object(ft.a)(o),a=null==n.firstWeekContainsDate?i:Object(ft.a)(n.firstWeekContainsDate),s=Gu(e,t),c=new Date(0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);var u=mt(c,t);return u}function Yu(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(vt.a)(e,t),r=mt(n,t).getTime()-Vu(n,t).getTime();return Math.round(r/6048e5)+1}var Zu=["break","opening_soon","closing_soon"];function Ku(e,t,n){var r;void 0===n&&(n={});var o,i=e.status,a=e.currentWorkingStatus,s=n.short?null==a?void 0:a.shortText:null==a?void 0:a.text;return{text:n.showMoved&&(null===(r=e.businessProperties)||void 0===r?void 0:r.moved_to)?"Организация переехала":"open"===i?null!=s?s:"График работы не указан":(o=i,{"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"}[o]),state:{closed:"open"!==i||Boolean(a&&!a.isOpenNow),"changing-soon":!(!a||!a.tag)&&a.tag.some((function(e){return Zu.includes(e)})),"no-data":!s}}}function $u(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=Q.e(Q.d(t));return n.reduce((function(e,n){var o=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(vt.a)(e,t),r=n.getDay();return r}(n),i=Yu(n,{weekStartsOn:1})===Yu(r,{weekStartsOn:1});if(!e[o]&&i){var a=Object(vt.a)(n);e[o]=Object(di.a)(a,t)}return e}),{})}n(431);var Xu=n(433),Ju=n.n(Xu),Qu=Object(Nt.a)("flip-icon"),el=function(e){var t=e.isFlipped;return i.createElement(Kt.a,{className:Qu({flipped:t}),url:Ju.a})},tl=Object(Nt.a)("map-widget-business-working-intervals-view"),nl=function(e){var t=Object(U.c)(),n=i.useState(!1),o=n[0],a=n[1],s=Ku(e.result),c=function(e,t){if(e.workingTime){var n=Q.e(Q.d(t)).getDay(),r=$u(e.businessProperties,t);return[].concat(e.workingTime.slice(1),[e.workingTime[0]]).map((function(e,t){var o,i=(t+1)%7,a=Object(Wu.a)(ht[i].slice(0,2));return e?1===e.length&&0===Q.b(e[0].to,e[0].from)?(o="Круглосуточно",a+=" 00:00-23:59"):(o=e.map((function(e){var t=e.from,n=e.to;return Q.h(t)+" – "+Q.h(n)})),a+=" "+e.map((function(e){var t=e.from,n=e.to;return Q.h(t)+"-"+Q.h(n)})).join(",")):(o="Выходной",a=""),{dayName:gt(0,ht[i]),text:o,isWeekend:!e,isToday:n===i,changedDate:r[i],meta:a}}))}}(e.result,t)||[],u=c.length>0;return i.createElement("div",{className:tl()},i.createElement("div",{className:tl("labels")},e.children?i.createElement("div",{className:tl("extra-label")},e.children):null,i.createElement("div",{className:tl("time-label",Object(r.a)(Object(r.a)({},s.state),{},{clickable:u})),onClick:u?function(){a(!o)}:void 0},i.createElement("span",{className:tl("label-text")},s.text),u?i.createElement("div",{className:tl("working-status-control")},i.createElement(el,{isFlipped:o})):null)),o?i.createElement("div",{className:tl("intervals")},c.map((function(e,t){var n=e.changedDate?i.createElement(i.Fragment,null,e.dayName,", ",i.createElement("span",{className:tl("date")},e.changedDate)):e.dayName;return i.createElement(hr.a,{key:t,isDisabled:!e.changedDate,position:["right"],text:"Праздничный день"},i.createElement("div",{className:tl("interval")},i.createElement("div",{className:tl("day")},n),i.createElement("span",{className:tl("time")},Array.isArray(e.text)?e.text.join(", "):e.text)))}))):null)};n(434),n(239),"факс","тел.","тел./факс";var rl=Object(Nt.a)("map-widget-business-contacts-view"),ol=function(e){var t,n=Object(U.c)(),r=i.useState(!1),o=r[0],a=r[1],s=function(){a(!o)},u=function(e,t,n){var r=(void 0===n?{}:n).useRealty,o=void 0===r||r,i=e.phones||[],a=e.realty;return a&&a.company.phone&&o&&!e.advert&&(i=[{number:a.company.phone,counter:a.company.phoneCounter+"&source=map&crc="+t.xscriptCsrfToken,type:"phone",info:"Офис продаж"}]),i}(e.result,n),l=u[0],d=u.slice(1),p=null===(t=e.result.urls)||void 0===t?void 0:t[0];return i.createElement("div",{className:rl()},e.result.fullAddress?i.createElement("div",{className:rl("item")},i.createElement(qt.a,{inline:!0,name:"logo",size:24,className:rl("icon")}),e.result.fullAddress):null,l?i.createElement("div",{className:rl("item")},i.createElement("div",null,l?i.createElement("div",{className:rl("phone-container")},i.createElement("a",{className:rl("main-phone"),href:"tel:"+l.number},i.createElement(qt.a,{inline:!0,name:"call",size:24,className:rl("icon")}),l.number),d.length>0?i.createElement("div",{className:rl("flip"),onClick:s},d.length,i.createElement(el,{isFlipped:o})):null):null,o?d.map((function(e){return i.createElement("a",{key:e.number,className:rl("phone"),href:"tel:"+e.number},e.number)})):null)):null,p?i.createElement("div",{className:rl("item")},i.createElement(qt.a,{inline:!0,name:"web",size:24,className:rl("icon")}),i.createElement("a",{className:rl("url"),href:p,target:"_blank"},c.i(p,!0))):null)},il=(n(436),n(438)),al=n.n(il),sl=Object(Nt.a)("map-widget-nearest-stops-view"),cl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._renderFromStopDistance=function(e){var n={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},r={coords:e.coordinates,value:""},o=Object(u.a)(Object(u.b)([r,n],{travelMode:"pedestrian"},t.props.config));return i.createElement("a",{className:sl("distance"),href:o,target:"_blank"},i.createElement("div",{className:sl("distance-icon")},i.createElement(qt.a,{name:"pedestrian",size:24,inline:!0,className:sl("distance-icon-inner")})),i.createElement("div",{className:sl("distance-text")},e.distance))},t._renderStop=function(e){var n="metro"===e.type?e.color:void 0;return i.createElement("div",{className:sl("stop"),key:e.id},i.createElement("div",{className:sl("metro-icon")},i.createElement(Kt.a,{url:al.a,style:{color:n}})),i.createElement("div",null,e.name),t._renderFromStopDistance(e))},t}return Object(o.a)(t,e),t.prototype.render=function(){return this.props.result.metro?this.props.result.metro.map(this._renderStop):null},t}(i.Component),ul=Object(U.b)(cl),ll=(n(439),Object(Nt.a)("map-widget-business-buttons-view")),dl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._renderGetToButton=function(){if(K.j(t.props.result))return null;var e={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},n=Object(u.a)(Object(u.b)([{coords:null,value:""},e],{},t.props.config));return i.createElement("div",{className:ll("button-container")},i.createElement(mr.a,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Как добраться"))},t._renderAboutButton=function(){return i.createElement("div",{className:ll("button-container")},i.createElement(mr.a,{view:"primary",size:"small",isStretched:!0,url:t.props.businessUrl,target:"_blank"},"Об организации"))},t}return Object(o.a)(t,e),t.prototype.render=function(){return i.createElement("div",{className:ll()},this._renderGetToButton(),this._renderAboutButton())},t}(i.Component),pl=Object(U.b)(dl);n(441);var fl=function(){return(fl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;Object.create;function vl(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var r,o,a=Object(i.useRef)(0),s=(r=Object(i.useRef)(!1),o=Object(i.useCallback)((function(){return r.current}),[]),Object(i.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),o),c=Object(i.useState)(n),u=c[0],l=c[1];return[u,Object(i.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++a.current;return l((function(e){return fl(fl({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&r===a.current&&l({value:e,loading:!1}),e}),(function(e){return s()&&r===a.current&&l({error:e,loading:!1}),e}))}),t)]}var ml={},hl={getRoute:function(e,t){var n=e.points.join("~");return ml[n]||(ml[n]=Object(z.a)("taxi/getRoute",{query:{rll:n,lang:t.locale}},t)),ml[n]},checkCoverage:function(e,t){return Object(z.a)("taxi/checkCoverage",{query:{ll:Object(lr.a)(e.center),lang:t.locale}},t)}},gl=Object(Nt.a)("map-widget-taxi-link-view"),bl=function(e){var t=Object(U.c)(),n=vl((function(){return hl.checkCoverage({center:e.endPoint},t)}),[e.endPoint,t],{value:null,loading:!1}),r=n[0],o=n[1];i.useEffect((function(){o()}),[e.endPoint,o]);return r.value||r.loading?i.createElement("div",{className:gl()},i.createElement(qt.a,{name:"yndx-taxi",size:16,className:gl("icon")}),i.createElement("a",{className:gl("link"),href:function(){var n,r,o,i=null===(n=t.mapWidget)||void 0===n?void 0:n.taxi,a=t.uatraits.isMobile;if(i){var s=(null===(r=e.startPoint)||void 0===r?void 0:r.map(String))||[],u=s[0],l=void 0===u?"":u,d=s[1],p=void 0===d?"":d,f=e.endPoint.map(String),v=f[0],m=void 0===v?"":v,h=f[1],g=void 0===h?"":h;return c.l({urlTemplate:a?i.mobileUrlTemplate:i.urlTemplate,domain:i.domain,startLat:p,startLon:l,endLat:g,endLon:m,tariffClass:"",lang:null!==(o=i.lang)&&void 0!==o?o:"ru"})}}(),target:"_blank"},"Вызвать такси")):null},yl=(n(443),Object(Nt.a)("map-widget-content-title-view")),_l=function(e){return i.createElement(i.Fragment,null,i.createElement("a",{href:e.titleUrl,target:"_blank",className:yl("title",{disabled:!e.titleUrl})},e.title),e.subtitle?i.createElement("div",{className:yl("subtitle")},e.subtitle):null)},El=Object(Nt.a)("map-widget-business-content-view"),wl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getCategories=function(){if(t.props.result.categories&&0!==t.props.result.categories.length)return t.props.result.categories.map((function(e){return e.name})).join(", ")},t._renderFeedbackUrl=function(){var e=t.props,n=c.e(e.result.id),r=Object(u.a)(c.a(n,e.config));return i.createElement("a",{className:El("feedback-link"),href:r,target:"_blank"},"Сообщить об ошибке")},t._renderTaxiUrl=function(){var e=t.props;return K.j(e.result)?null:i.createElement(bl,{endPoint:e.result.coordinates,startPoint:e.userCoordinates})},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=c.b({id:e.result.id,seoname:e.result.seoname},{},{baseUrl:""}),n=Object(u.a)(c.a("/"+t,e.config));return i.createElement("div",{className:El()},i.createElement(_l,{title:e.result.title,titleUrl:n,subtitle:this._getCategories()}),i.createElement(nl,{result:this.props.result},i.createElement(qu,{result:e.result})),i.createElement(ol,{result:e.result}),i.createElement("div",{className:El("stops")},i.createElement(ul,{result:e.result})),i.createElement("div",{className:El("business-buttons")},i.createElement(pl,{businessUrl:n,result:e.result})),i.createElement("div",{className:El("bottom-links")},this._renderTaxiUrl(),this._renderFeedbackUrl()))},t}(i.Component),Sl=Object(U.b)(wl),Ol=(n(445),Object(Nt.a)("map-widget-toponym-content-view")),Cl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getUrl=function(){var e,n=c.h(t.props.result,t.props.result.region,{baseUrl:"",skipPointCheck:!0});n||(n="?"+C.stringify({poi:{uri:null===(e=t.props.result)||void 0===e?void 0:e.uri,point:Object(lr.a)(t.props.result.coordinates)}}));var r=Object(u.a)(c.a("/"+n,t.props.config));return t.props.isTrafficLayerEnabled&&(r+="&l="+(t.props.config.query.l||"trf")),r},t._getInsideUrl=function(){var e=t.props.result.businesses&&t.props.result.businesses.totalResultCount>0,n=c.h(t.props.result,t.props.result.region,{baseUrl:"",skipPointCheck:!0},e?{sublanding:"inside"}:{});return Object(u.a)(c.a("/"+n,t.props.config))},t._renderContent=function(){return"house"===t.props.result.kind?i.createElement(i.Fragment,null,i.createElement("div",{className:Ol("nearest-stops")},i.createElement(ul,{result:t.props.result})),i.createElement("div",{className:Ol("button-wrapper")},i.createElement(mr.a,{view:"primary",size:"small",isStretched:!0,url:t._getInsideUrl(),target:"_blank"},"Организации в доме"))):i.createElement("div",{className:Ol("button-wrapper")},i.createElement(mr.a,{view:"primary",size:"small",isStretched:!0,url:t._getUrl(),target:"_blank"},"Открыть в Картах"))},t._renderFeedbackUrl=function(){if(!t.props.result.uri)return null;var e=c.g(t.props.result.uri),n=c.a(e,t.props.config);return i.createElement("div",{className:Ol("button-wrapper")},i.createElement(mr.a,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Сообщить об ошибке"))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement("div",{className:Ol()},i.createElement("div",{className:Ol("title-wrapper")},i.createElement(_l,{title:e.result.title,titleUrl:this._getUrl(),subtitle:this.props.result.description})),this._renderContent(),this._renderFeedbackUrl())},t}(i.Component),jl=Object(U.b)(Cl),Rl=n(76),kl=(n(447),n(449)),Il=n.n(kl),xl=Object(Nt.a)("search-placemark-title"),Ml=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._renderStars=function(e){var t=e.property.find((function(e){return"id"===e.key}));if(!t)return null;var n=K.e(t.value);if(0===n)return null;for(var r=new Array(n),o=0;o<n;o++)r[o]=i.createElement(Kt.a,{key:o,url:Il.a});return i.createElement("span",{key:"stars",className:xl("subtitle-item")},r)},t._renderRating=function(e){var n=e.property.find((function(e){return"value_5"===e.key}));return n?i.createElement("span",{className:xl("subtitle-item"),key:"rating"},i.createElement(Kt.a,{url:Il.a,className:xl("subtitle-item-rating-image")}),i.createElement("span",{className:xl("subtitle-item-rating")},yu(Number(n.value),t.props.config.lang,{min:1,max:1}))):null},t._renderWorkingHours=function(e){var t=e.property.find((function(e){return"is_open"===e.key})),n="closed_for_visitors"===e.type||!!t&&"0"===t.value;return i.createElement("span",{key:"working_hours",className:xl("subtitle-item",{red:n})},e.text)},t._renderSubtitleItem=function(e){var n=e.text?e.text:"";if("star"===e.type)return t._renderStars(e);if("rating"===e.type)return t._renderRating(e);if("working_hours"===e.type||"closed_for_visitors"===e.type)return t._renderWorkingHours(e);var r="closed_for_without_qr"===e.type;return n?i.createElement("span",{key:e.type,className:xl("subtitle-item",{red:r})},n):null},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.subtitleItems;return i.createElement("div",{className:xl({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},i.createElement("div",{className:xl("title")},e.title),t&&e.showSubtitle?i.createElement("div",{className:xl("subtitle")},t.map(this._renderSubtitleItem)):null)},t}(i.PureComponent),Tl=Object(U.b)(Ml),Pl=(n(450),Object(Nt.a)("poi-placemark-title")),Nl=function(e){var t=Object(ya.a)(e.title,{length:40}),n=e.hover?void 0:{color:e.color,WebkitTextFillColor:e.color};return i.createElement("div",{className:Pl({hover:e.hover}),style:n},t.split(" ").map((function(e,t){return i.createElement("span",{key:t,className:Pl("word")},e)})))},Dl=(n(452),function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchIcon=function(){n.props.icon.promise.then((function(e){n.setState({element:e})}))},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchIcon()},n.componentDidUpdate=function(e){this.props.icon.promise!==e.icon.promise&&this._fetchIcon()},n.render=function(){var e,t,n=this.state.element;return n?(null===(e=(t=this.props).children)||void 0===e?void 0:e.call(t,n))||n:null},t}(i.Component)),Ll=Object(Nt.a)("search-placemark-icon");function zl(e,t){return!t.experiments.ui.searchPinsNoClosed&&("business"===e.type&&("open"!==e.status||Ku(e).state.closed))}var Al=function(e){var t,n="lowRelevance"in e.result,o={mode:e.mode,state:e.state,"has-advert":K.g(e.result),"low-relevance":n,closed:zl(e.result,e.config)},a="business"===e.result.type?n?e.result.businessProperties&&e.result.businessProperties.geoproduct_poi_color||"#999":null===(t=e.style)||void 0===t?void 0:t.color:void 0,s=a&&"hover"!==e.state?{color:a}:void 0;return i.createElement("div",{className:Ll(o),style:Object(r.a)({},s)},i.createElement(Dl,{icon:e.icon}))},Ul=(n(454),n(456)),Fl=n.n(Ul),Bl=n(457),Hl=n.n(Bl),ql=n(458),Wl=n.n(ql),Gl=Object(Nt.a)("search-placemark-icons"),Vl={dot:{source:Fl.a,width:22,height:22},base:{source:Hl.a,width:34,height:34},active:{source:Wl.a,className:Gl("active"),width:60,height:68,baseY:64,centerY:28}};function Yl(e){return Vl[e]}function Zl(e,t){return Object(r.a)(Object(r.a)({},$l(e)),{},{promise:t?t.then((function(t){return Kl(e,t)})):Promise.resolve(Kl(e))})}function Kl(e,t){var n=$l(e),r=n.width,o=n.height,a=n.centerX,s=n.centerY,c={className:e.className,dangerouslySetInnerHTML:{__html:e.source}};return t?i.createElement("div",{style:{position:"relative",width:r,height:o}},i.createElement("div",c),i.createElement("div",{style:{position:"absolute",left:a,top:s}},"point"===t?i.createElement("div",{className:Gl("content")}):t)):i.createElement("div",Object(bn.a)({style:{width:r,height:o}},c))}function $l(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}var Xl={base:{width:34,height:40,baseY:40},active:{width:60,height:68,baseY:64,centerY:28},dot:{width:22,height:22}},Jl={};function Ql(e,t){return{default:ed("default",e,t),hover:ed("hover",e,t),visited:ed("visited",e,t)}}function ed(e,t,n){var o=Xl[t];return Object(r.a)(Object(r.a)({},$l(o)),{},{promise:n.then((function(n){var i,a,s=null===(i=n[t])||void 0===i?void 0:i[e];return s?Kl(Object(r.a)(Object(r.a)({},o),{},{source:(a=s,'<img src="'+a+'" width="100%" height="100%" />')})):void 0}))})}var td={get:function(e,t){if(!Jl[e]){var n=Object(z.a)("branding/icons",{query:{name:e}},t);Jl[e]={base:Ql("base",n),active:Ql("active",n),dot:Ql("dot",n)}}return Jl[e]}},nd=(n(459),n(461)),rd=n.n(nd),od=n(462),id=n.n(od),ad=n(463),sd=n.n(ad),cd=Object(Nt.a)("rubric-placemark-icons-provider"),ud={geoproduct:{source:rd.a,width:34,height:40,centerY:17,baseY:38},"low-relevance":{source:id.a,width:28,height:34,baseY:32,centerX:14,centerY:15},card:{source:sd.a,width:34,height:40,baseY:38,centerX:14,centerY:14}},ld={};function dd(e,t,n){return{default:Zl("base"===e&&n&&ud[n]||Yl(e),t.then((function(t){return i.createElement("div",{className:cd(e+"-content",{"pin-type":n}),dangerouslySetInnerHTML:{__html:t[e]}})})))}}var pd={get:function(e,t,n){var r=function(e,t){if(!ld[e]){var n=["small","normal"].map((function(n){return Wt.a({type:"rubrics",name:e,size:n},t)||""})).map((function(e){return e?Object(L.a)({url:e,parser:"string"}):Promise.resolve("")}));ld[e]=Promise.all(n).then((function(e){return{base:e[0],active:e[1]}}))}return ld[e]}(e,t);return{base:dd("base",r,n),active:dd("active",r)}}},fd={dot:{width:18,height:18},base:{width:34,height:40,baseY:36},active:{width:60,height:68,baseY:64,centerY:28}};function vd(e,t){e.startsWith("https://")||(e="https://avatars.mds.yandex.net/get-{id}_%s".replace("{id}",e.replace(/--/g,"/")));var n=Math.max(2,Math.ceil(window.devicePixelRatio||1)),r=e.replace("%s","x"+n);return'<img height="'+fd[t].height+'" width="'+fd[t].width+'" src="'+r+'" />'}var md={get:function(e){return Object.entries(e).reduce((function(e,t){var n,o=t[0],i=t[1];return Object(r.a)(Object(r.a)({},e),{},((n={})[o]=Object.entries(i||{}).reduce((function(e,t){var n,i=t[0],a=t[1];return Object(r.a)(Object(r.a)({},e),{},((n={})[i]=Zl(Object(r.a)({source:vd(a,o)},fd[o])),n))}),{}),n))}),{})}},hd={width:60,height:68,baseY:64,centerY:28},gd={transit:26};function bd(e,t){var n='<div class="poi-icon-provider" style="'+("width: "+t.width+"px; height: "+t.height+"px;background: url("+e+") 50% bottom no-repeat; background-size: contain")+'" />';return{default:Zl(Object(r.a)({source:n},t))}}var yd={get:function(e,t){var n=(t||[]).find((function(e){return Object.keys(gd).includes(e)}));return{active:bd(e,Object(r.a)(Object(r.a)({},hd),{},{centerY:n&&gd[n]||hd.centerY}))}}};var _d={};function Ed(e){var t,n="shortTitle"in e.result&&e.result.shortTitle||e.result.title||"",o="subtitleItems"in e.result&&e.result.subtitleItems||[],a="hover"===e.state;if(e.hideTitle||!n||["dot","base"].includes(e.mode)&&!a)return Promise.resolve(void 0);var s="lowRelevance"in e.result,c="business"===e.result.type&&!e.config.experiments.ui.disableSearchResultsPreview,u={title:n,subtitleItems:o,showSubtitle:["active","subtitle"].includes(e.mode)||a&&!c,background:"active"!==e.mode,isLowRelevance:s,disableTruncate:!0},l=s&&"business"===e.result.type&&(null===(t=e.result.businessProperties)||void 0===t?void 0:t.geoproduct_poi_label_color)||void 0,d=e.titlePosition||"right",p=s&&!["dot","active"].includes(e.mode)&&e.config.isVectorEnabled?i.createElement(Nl,{title:n,color:l,hover:"hover"===e.state}):i.createElement(Tl,Object(bn.a)({},u,{position:d})),f=JSON.stringify(u);return _d[f]=_d[f]||Vi((function(){return p}),e.config),_d[f].then((function(e){return Object(r.a)(Object(r.a)({},e),{},{element:p,position:d})}))}function wd(e){var t=e.state||"default",n=["title","subtitle"].includes(e.mode)?"base":e.mode,o=function(e){var t=e.result,n=K.d(t);if("lowRelevance"in t)return pd.get(n||"",e.config,"low-relevance");if("business"===t.type&&!t.direct&&t.advert&&t.advert.pinBranding)return md.get(t.advert.pinBranding);if("brandingId"in t&&t.brandingId)return td.get(t.brandingId,e.config);if("hotspotProperties"in t&&t.hotspotProperties&&t.hotspotProperties.selectedIconUrl)return yd.get(t.hotspotProperties.selectedIconUrl,t.hotspotProperties.tags);if(n){var r,o=(null===(r=e.style)||void 0===r?void 0:r.forceGeoproduct)||K.g(t)?"geoproduct":"default";return pd.get(n,e.config,o)}return}(e),a=null==o?void 0:o[n],s=(null==a?void 0:a[t])||(null==a?void 0:a.default)||Zl(Yl(n),Promise.resolve("dot"!==n?"point":void 0));return Object(r.a)(Object(r.a)({},s),{},{element:i.createElement(Al,{result:e.result,state:t,icon:s,mode:n,config:e.config,style:e.style})})}var Sd=n(464),Od=function(e){function t(t){var n;return(n=e.call(this,t)||this)._calcPlacemarkAction=void 0,n._calcPlacemark=function(e){p.a.cancel(n._calcPlacemarkAction);var t=n.state.hover?"hover":"default",r=e.result,o=e.mode,i=e.config;n._calcPlacemarkAction=p.a.create(function(e){return Promise.all([wd(e),Ed(e)]).then((function(e){return{icon:e[0],title:e[1]}}))}({result:r,mode:o,state:t,config:i}),{success:function(e){return n.setState({placemark:e})}})},n._onMouseEnter=function(){var e=Object(Rl.a)(n).props;n.setState({hover:!0},(function(){return n._calcPlacemark(e)}))},n._onMouseLeave=function(){var e=Object(Rl.a)(n).props;n.setState({hover:!1},(function(){return n._calcPlacemark(e)}))},n.state={hover:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calcPlacemark(this.props)},n.componentDidUpdate=function(e){e!==this.props&&this._calcPlacemark(this.props)},n.componentWillUnmount=function(){p.a.cancel(this._calcPlacemarkAction)},n.render=function(){var e=this.state.placemark;if(!e)return null;var t=this.props,n=t.result,r=zt.a.search[t.mode];return i.createElement(Sd.a,Object(bn.a)({coordinates:t.coordinates,result:n},e,{analyticsName:t.analyticsName,zIndex:this.state.hover?r+1:r,onClick:t.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(i.Component),Cd=Object(U.b)(Od),jd=n(116),Rd=function(){return window.PGreed.safeGet().then((function(e){return JSON.stringify(e)}))};var kd,Id={sendAnswer:function(e,t){return Object(z.a)("business/sendAnswer",{body:e},t)},fetchUserReview:function(e,t){return Object(z.a)("business/fetchUserReview",{query:e},t)},fetchUserReviews:function(e,t){return Object(z.a)("business/fetchUserReviews",{query:e},t)},fetchUserPhotos:function(e,t){return Object(z.a)("business/fetchUserPhotos",{query:e},t)},deleteBusinessPhotos:function(e,t){return Object(z.a)("business/deleteUserPhotos",{query:e},t)},sendUserReview:function(e,t){return(window.PGreed?Rd().catch((function(){})):Object(jd.a)("https://yandex.ru/captchapgrd").then(Rd).catch((function(){}))).then((function(n){return Object(z.a)("business/sendUserReview",{body:Object(r.a)(Object(r.a)({},e),{},{fingerprint:n})},t)}))},addUserReaction:function(e,t){return Object(z.a)("business/addUserReaction",{body:e},t)},fetchReviews:function(e,t){return Object(z.a)("business/fetchReviews",{query:Object(r.a)(Object(r.a)({},e),{},{lang:t.lang})},t)},fetchServiceZone:function(e,t){return Object(z.a)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale}},t)},fetchUserImpressions:function(e,t){return Object(z.a)("business/fetchUserImpressions",{query:e},t)},answerSbsQuestionImpression:function(e,t){return Object(z.a)("business/answerSbsQuestionImpression",{query:e},t)},skipImpression:function(e,t){return Object(z.a)("business/skipImpression",{query:e},t)},fetchPotentialCompany:function(e){return Object(z.a)("business/fetchPotentialCompany",{},e)},answerIsOrganizationOwner:function(e,t){return Object(z.a)("business/answerIsOrganizationOwner",{query:e},t)},answerIsSomeCompanyOwner:function(e,t){return Object(z.a)("business/answerIsSomeCompanyOwner",{query:{isSomeCompanyOwner:e}},t)},answerIsOrganizationClosed:function(e,t){return Object(z.a)("/business/answerIsOrganizationClosed",{body:e},t)}},xd={fill:"#3cb300",fillOpacity:.15,stroke:[{color:"#3cb300",opacity:1,width:2}],interactive:!1,zIndex:zt.a.minimum,simplificationRate:0},Md=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadAction=void 0,n._loadGeometry=function(){n.setState({geometry:void 0});var e=n.props.result.onlineProperties;if(e&&e.toponymIds&&!e.serviceGeometry){var t;null===(t=n._loadAction)||void 0===t||t.cancel();var r=n.props;n._loadAction=p.a.create(Id.fetchServiceZone(r.result.id,r.config),{success:function(e){n.setState({geometry:e})}})}},n._renderPolygon=function(e,t){return i.createElement(Ft.a,{key:t,geometry:{type:"Polygon",coordinates:e},drawingStyle:xd})},n._renderRadius=function(e){var t=n.props.result.coordinates;return i.createElement(Lt.a,{name:"zone"},i.createElement(Ht,{center:t,radius:e,drawingStyle:xd}))},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadGeometry()},n.componentDidUpdate=function(e){e.result.id!==this.props.result.id&&this._loadGeometry()},n.render=function(){var e=this.props.result.onlineProperties||{},t=e.serviceGeometry,n=e.radius,r=this.state.geometry||t;return n?this._renderRadius(1e3*n):r&&r.length>0?r.map(this._renderPolygon):null},t}(i.Component),Td=Object(U.b)(Md),Pd={advert:void 0,brandingId:void 0},Nd=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStaticSearchResult=function(e){var n;if(!e||e.id===(null===(n=t.props.content)||void 0===n?void 0:n.data.result.id))return null;var o={requestId:"",requestResults:1,totalResultCount:1,items:[e]};return i.createElement(i.Fragment,null,i.createElement(vu,{searchResults:o,mapLocation:t.props.mapLocation}),i.createElement(Cd,{result:Object(r.a)(Object(r.a)({},e),Pd),coordinates:e.coordinates,mode:"active",onClick:t.props.onStaticPlacemarkClick}),i.createElement(ma,{uri:e.uri}))},t._renderContentSearchResult=function(){var e=t.props.content,n=t._getDisplayType();if(!e)return null;var o=e.data.result,a={requestId:"",requestResults:1,totalResultCount:1,items:[o]};return i.createElement(i.Fragment,null,i.createElement(li,{coordinates:e.data.coordinates,mapLocation:t.props.mapLocation,displayType:n,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,mapSize:t.props.mapSize},"business"===o.type?i.createElement(Sl,{result:o}):i.createElement(jl,{result:o,isTrafficLayerEnabled:t.props.isTrafficLayerEnabled})),i.createElement(vu,{searchResults:a,mapLocation:t.props.mapLocation}),"panel"===n?i.createElement(i.Fragment,null,i.createElement(Cd,{result:Object(r.a)(Object(r.a)({},o),Pd),coordinates:o.displayCoordinates,mode:"active"}),i.createElement(ma,{uri:o.uri})):null)},t._renderBusinessGeometry=function(e){return e&&"business"===e.type?i.createElement(Td,{result:e}):null},t}return Object(o.a)(t,e),t.prototype.render=function(){var e,t,n,r,o=null===(e=this.props.config.whatsherePreloadedResults)||void 0===e?void 0:e.items[0],a=null===(t=this.props.config.poiPreloadedResults)||void 0===t?void 0:t.items[0],s=null===(n=this.props.config.mapWidget)||void 0===n||null===(r=n.activeObject)||void 0===r?void 0:r.items[0];return i.createElement(i.Fragment,null,this._renderStaticSearchResult(o),this._renderStaticSearchResult(a),this._renderStaticSearchResult(s),this._renderBusinessGeometry(s),this._renderBusinessGeometry(a),this._renderContentSearchResult())},t}(i.Component),Dd=Object(U.b)(Nd),Ld=(n(471),n(473),Object(Nt.a)("masstransit-underground-line-name-view")),zd=Object(U.b)((function(e){var t,n=e.transport,r=e.config,o=n.city?Wt.a({type:"masstransit",name:"underground-"+n.city,size:"small"},r):null;return i.createElement("div",{className:Ld()},o?i.createElement("div",{className:Ld("icon")},i.createElement(Kt.a,{url:o})):null,i.createElement("div",{className:Ld("line-number"),style:{backgroundColor:n.Style&&n.Style.color||"transparent"}},null!==(t=n.lineNumber)&&void 0!==t?t:null),i.createElement("div",{className:Ld("line-name")},n.name))})),Ad=Object(Nt.a)("map-widget-masstransit-stop-content-view"),Ud=function(e){var t,n,r,o=Object(U.c)(),a=e.content.data.stop,s=a.region?c.d(a,a.region,{baseUrl:""}):"",l=Object(u.a)(c.a("/"+s,o)),d={coords:a.coordinates,value:"",uri:null===(t=a.searchResult)||void 0===t?void 0:t.uri},p=Object(u.b)([{coords:null,value:""},d],{},o),f=function(){if("railway"===a.type){var e,t=null===(e=a.links)||void 0===e?void 0:e.find((function(e){return"timetable"===e.type}));return null==t?void 0:t.href}if("underground"===a.type)return c.j(o.hosts.metro,{ll:Object(lr.a)(a.coordinates)});if("urban"===a.type&&a.region){var n=c.d(a,a.region)||"";return Object(u.a)(c.a("/"+n,o))}};return i.createElement("div",{className:Ad()},i.createElement(_l,{title:("underground"===a.type?"Станция метро":"railway"===a.type?"Ж/д станция":"Остановка")+" "+a.name,titleUrl:l,subtitle:"underground"!==a.type?null===(n=a.searchResult)||void 0===n?void 0:n.description:void 0}),"underground"===a.type&&a.transports[0]?i.createElement("div",{className:Ad("underground-title")},i.createElement(zd,{transport:a.transports[0]})):null,i.createElement("div",{className:Ad("buttons-container")},i.createElement("div",{className:Ad("button-container")},i.createElement(mr.a,{view:"secondary-blue",size:"small",isStretched:!0,url:p,target:"_blank"},"Как добраться")),i.createElement("div",{className:Ad("button-container")},i.createElement(mr.a,{view:"primary",size:"small",isStretched:!0,url:f(),target:"_blank"},"underground"===a.type?"Схема метро":"railway"===a.type?"Показать расписание":"Список маршрутов"))),(null===(r=a.searchResult)||void 0===r?void 0:r.metro)&&"underground"!==a.type?i.createElement("div",{className:Ad("nearest-stops")},i.createElement(ul,{result:a.searchResult})):null)},Fd=(n(475),{bus:"bus-stop",minibus:"bus-stop",tramway:"tram-stop",trolleybus:"bus-stop",suburban:"railway-station",funicular:"funicular",cable:"cableway",underground:"subway-fallback",water:"pier",aeroexpress:"aeroexpress"}),Bd=Object(U.b)((function(e){var t=e.undergroundCity&&Wt.a({type:"masstransit",name:e.vehicleType+"-"+e.undergroundCity,size:e.size},e.config)||Wt.a({type:"rubrics",name:e.vehicleType&&Fd[e.vehicleType]||"fallback",size:e.size},e.config);return t?i.createElement(Kt.a,{url:t,className:e.className}):null})),Hd=n(477),qd=n.n(Hd),Wd=n(478),Gd=n.n(Wd),Vd=n(479),Yd=n.n(Vd),Zd=Object(Nt.a)("masstransit-stop-placemark"),Kd=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Si,{name:"masstransit_stop_placemark",logClick:!0},i.createElement(Dt.a,{coordinates:e.coordinates,onClick:e.onClick,zIndex:zt.a.masstransitStop},i.createElement("div",{className:Zd({bookmark:e.isBookmark})},!e.hotspotIconUrl||e.isBookmark?i.createElement(Bd,{className:Zd("content-icon"),size:"normal",vehicleType:e.type,undergroundCity:e.undergroundCity}):null,e.hotspotIconUrl&&!e.isBookmark?i.createElement("img",{src:e.hotspotIconUrl,className:Zd("background-icon"),width:"60",height:"68"}):i.createElement(Kt.a,{className:Zd("background-icon"),url:e.isBookmark?Gd.a:e.undergroundCity?Yd.a:qd.a}))),e.id?i.createElement(ma,{uri:$.a(e.id)}):null)},t}(i.PureComponent),$d=Object(U.b)(Kd),Xd=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStopPlacemark=function(e,t){var n,r=Object(Ra.d)(e);"underground"===r&&(n=e.transports[0].city);return i.createElement($d,{id:e.id,type:r,coordinates:e.coordinates,undergroundCity:n,isBookmark:!1,onClick:function(){return null==t?void 0:t(e)}})},t._renderStaticStop=function(){var e,n=t.props.config.masstransitStop;return n&&n.id!==(null===(e=t.props.content)||void 0===e?void 0:e.data.stop.id)?t._renderStopPlacemark(n,t.props.onStaticPlacemarkClick):null},t._renderContentStop=function(){var e=t._getDisplayType();return t.props.content?i.createElement(i.Fragment,null,i.createElement(li,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,displayType:e,mapSize:t.props.mapSize},i.createElement(Ud,{content:t.props.content})),"panel"===e?t._renderStopPlacemark(t.props.content.data.stop):null):null},t}return Object(o.a)(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,this._renderContentStop(),this._renderStaticStop())},t}(i.Component),Jd=Object(U.b)(Xd);function Qd(e,t){var n,r,o,i,a=e.threads[0];if((null==a||null===(n=a.BriefSchedule)||void 0===n?void 0:n.Events)&&(null===(r=a.BriefSchedule)||void 0===r?void 0:r.Events.length)>0){var s,c,u=(null===(s=a.BriefSchedule.Events[0].Estimated)||void 0===s?void 0:s.value)||(null===(c=a.BriefSchedule.Events[0].Scheduled)||void 0===c?void 0:c.value);if(u){var l=1e3*Number(u);return l-t<6e4?l-t:l}}if((null==a||null===(o=a.BriefSchedule)||void 0===o?void 0:o.Frequencies)&&(null==a||null===(i=a.BriefSchedule)||void 0===i?void 0:i.Frequencies.length)>0){var d=1e3*a.BriefSchedule.Frequencies[0].value,p=a.BriefSchedule.Frequencies[0].begin?1e3*Number(a.BriefSchedule.Frequencies[0].begin.value):void 0,f=a.BriefSchedule.Frequencies[0].end?1e3*Number(a.BriefSchedule.Frequencies[0].end.value):void 0;return f&&f<t?-1/0:!p||p<t?d:p}return-1/0}var ep={loadLayerRegions:function(e){return kd||(kd=Object(z.a)("masstransit/getLayerRegions",{},e).catch((function(){return[]})))},getStopInfo:function(e,t){return Object(z.a)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.locale,lang:t.lang,mode:"prognosis"}},t).then((function(e){if(!e)throw new Error("Stop no data");return e}))},getStopTimetable:function(e,t){return Object(z.a)("masstransit/getStopTimetable",{query:{id:e.id,timestamp:e.timestamp,locale:t.locale,lang:t.lang}},t).then((function(e){if(!e)return null;var t=function(e){return{id:e.id,name:e.name,type:e.type,currentTime:e.currentTime,region:e.region,tzOffset:e.tzOffset,transports:pt(e.transports.map((function(e){return pt(e.threads.map((function(t){var n=[];return t.BriefSchedule&&t.BriefSchedule.Frequencies.length>0&&n.push.apply(n,t.BriefSchedule.Frequencies.map((function(n){var o;return Object(r.a)(Object(r.a)({},e),{},{threads:[Object(r.a)(Object(r.a)({},t),{},{BriefSchedule:{Frequencies:[n],Events:[],departureTime:null===(o=t.BriefSchedule)||void 0===o?void 0:o.departureTime}})]})}))),t.BriefSchedule&&t.BriefSchedule.Events.length>0&&n.push.apply(n,t.BriefSchedule.Events.map((function(n){var o;return Object(r.a)(Object(r.a)({},e),{},{threads:[Object(r.a)(Object(r.a)({},t),{},{BriefSchedule:{Frequencies:[],Events:[n],departureTime:null===(o=t.BriefSchedule)||void 0===o?void 0:o.departureTime}})]})}))),0===n.length&&n.push(Object(r.a)(Object(r.a)({},e),{},{threads:[Object(r.a)({},t)]})),n})))})))}}(e);return t.transports=t.transports.filter((function(e){return Qd(e,t.currentTime)>0})).sort((function(e,n){return Qd(e,t.currentTime)-Qd(n,t.currentTime)})),t}))},getVehiclesInfo:function(e,t){return Object(z.a)("masstransit/getVehiclesInfoWithRegion",{query:Object(r.a)({locale:t.locale,lang:t.lang},e)},t)},getVehiclePredictionInfo:function(e,t){return Object(z.a)("masstransit/getVehiclePredictionInfo",{query:Object(r.a)({},e)},t)},getLine:function(e,t){return Object(z.a)("masstransit/getLine",{query:Object(r.a)({locale:t.locale,lang:t.lang},e)},t)},getDistance:function(e,t){return Object(z.a)("masstransit/distance",{query:{startPoint:e.coordinates.join(","),destinationPoints:e.stops.map((function(e){return e.coordinates.join(",")})),locale:t.locale}},t)}};function tp(e,t){var n=e.feature,o=n.properties,i=n.properties.uri;return function(e,t){return ep.getStopInfo(e,t).then((function(t){return Object(r.a)(Object(r.a)({},t),{},{coordinates:e.hotspotCoordinates||t.coordinates})}))}({id:$.c(i),uri:i,hotspotProperties:o,hotspotCoordinates:e.coordinates,clearLine:!0},t).then((function(e){return{type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}}}))}var np=function(e){var t=Object(U.c)(),n=e.poiData,r=e.updateContent;return i.useEffect((function(){var e;if(n){p.a.cancel(e);var o=$.i(n.feature.properties.uri)?tp(n,t):function(e,t){var n,r,o=e.feature,i=o.properties,a=o.properties.uri,s={clientId:null===(n=t.mapWidget)||void 0===n?void 0:n.clientId,origin:null===(r=t.mapWidget)||void 0===r?void 0:r.origin,from:"poi",coordinates:e.coordinates,hotspotProperties:i,uri:a};return kt.a.fetchSearchResult(s,t).then((function(t){var n=null==t?void 0:t.items[0];return n?{type:"search",data:{result:n,coordinates:e.coordinates}}:null}))}(n,t);e=p.a.create(o,{success:function(e){e&&r(e)}})}return function(){p.a.cancel(e)}}),[n,r,t]),null};var rp={getSummary:function(e,t){return Object(z.a)("router/getSummary",{query:Object(r.a)(Object(r.a)({},e),{},{lang:t.lang,locale:t.locale})},t)},optimizeRoutePoints:function(e,t){return Object(z.a)("router/optimize/add",{query:Object(r.a)(Object(r.a)({},e),{},{lang:t.locale})},t).then((function(e){var n;return e?R.b(null!==(n=e.delay)&&void 0!==n?n:1e3).then((function(){return function e(t,n,r){return void 0===r&&(r=0),Object(z.a)("router/optimize/get",{query:t},n).then((function(o){var i;if(r>=15e3||!o||"failed"===o.status)return null;if("completed"===o.status)return o.points;var a=null!==(i=o.delay)&&void 0!==i?i:1e3;return R.b(a).then((function(){return e(t,n,r+a)}))}))}({id:e.id},t)})):null}))},buildRoute:function(e,t){return Object(z.a)("router/buildRoute",{query:Object(r.a)(Object(r.a)({},e),{},{locale:t.locale,lang:t.lang})},t)},pollIntercityPrice:function(e,t){return Object(z.a)("router/poll-intercity-price",{query:e},t)}},op=function(e){function t(t){var n;return(n=e.call(this,t)||this)._buildRouteAction=void 0,n._buildRouteDebounced=void 0,n._buildRoute=function(){var e=n.props,t=s.h(e.config,{travelMode:gi(e.config),routerResponse:null,routePoints:e.routePoints,activeRouteIndex:-1,viaIndexes:[],settings:{auto:{ignoreTrafficJams:hi(e.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},{});p.a.cancel(n._buildRouteAction),n._buildRouteAction=p.a.create(rp.buildRoute(t,e.config),{success:function(t){if(t){var n=s.e(t);e.onLoad(n)}},fail:function(){e.onLoad(null)}})},n._buildRouteDebounced=Object(gn.a)(n._buildRoute,100),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.routePoints!==this.props.routePoints&&this._buildRouteDebounced()},n.componentWillUnmount=function(){p.a.cancel(this._buildRouteAction)},n.render=function(){return null},t}(i.Component),ip=Object(U.b)(op);var ap=function(e,t){var n,r=(n=Object(i.useRef)(!0)).current?(n.current=!1,!0):n.current;Object(i.useEffect)((function(){if(!r)return e()}),t)},sp=(n(480),n(482),Object(Nt.a)("map-widget-search-result-list-item")),cp=function(e){var t;Object(U.c)();return i.createElement("div",{className:sp(),onClick:function(){e.onClick(e.item)}},"toponym"===e.item.type?(t=e.item,i.createElement(_l,{title:t.title,subtitle:t.description})):function(t){var n,o=Ku(t);return i.createElement(i.Fragment,null,i.createElement(_l,{title:e.item.title,subtitle:null===(n=t.categories)||void 0===n?void 0:n.slice(0,2).map((function(e){return e.name})).join(", ")}),i.createElement("div",{className:sp("data")},i.createElement(qu,{result:t,disableLink:!0}),i.createElement("div",{className:sp("time-label",Object(r.a)({},o.state))},o.text)))}(e.item))};function up(e,t){var n=t[0],r=t[1];return e.reduce((function(e,t){return"string"!=typeof t?e.push(t):t.split(n).forEach((function(t,n){n>0&&e.push(r),e.push(t)})),e}),[])}var lp=function(e,t){return Object.entries(t).reduce(up,[e]).filter((function(e){return e})).map((function(e,t){return i.createElement("span",{key:t},e)}))},dp=Object(Nt.a)("map-widget-search-result-list-view"),pp={main:-4,side:4},fp={top:10,right:10},vp=function(e){var t,n,r,o,a=Object(U.c)(),s=(null!==(t=null===(n=e.searchResults)||void 0===n?void 0:n.totalResultCount)&&void 0!==t?t:0)-(null!==(r=null===(o=e.searchResults)||void 0===o?void 0:o.items.length)&&void 0!==r?r:0),u=i.useMemo((function(){return e.mapSize.width<=460?"fullscreen":"balloon"}),[e.mapSize]),l=function(t){var n,r,o,u,l,d=(a.query["display-text"]||a.query.text||"").toString(),p=e.searchResults;return(null===(n=p.chain)||void 0===n?void 0:n.name)&&(d=p.chain.name),i.createElement(i.Fragment,null,d?i.createElement("div",{className:dp("header")},(function(params){return "Результаты поиска «"+params.query+"»";})({query:d})):null,i.createElement("div",{style:{maxHeight:t-30}},i.createElement(ii,{width:"dynamic"},e.searchResults?i.createElement("div",null,e.searchResults.items.map((function(t){return i.createElement(cp,{item:t,key:t.id,onClick:e.onListItemClick})}))):null,e.isLoading?i.createElement("div",{className:dp("spinner-container")},i.createElement(gr,{view:"small"})):e.searchResults&&s>0?i.createElement("div",{className:dp("more"),onClick:e.onLoadMoreClick},(function(params){return "Показать ещё "+params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "результат" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "результата" : "результатов"));})({count:Math.min(e.searchResults.requestResults,s)})):null,i.createElement("div",{className:dp("footer")},i.createElement("div",{className:dp("icon")},i.createElement(qt.a,{name:"super-search",size:24,inline:!0})),i.createElement("span",{className:dp("caption")},lp((function(params){return "Не нашли, что искали, — измените масштаб или "+params.refineSearch;})({refineSearch:"__refineSearch"}),{__refineSearch:(u=c.c(e.mapLocation,a.query.text,a.query.chain,null===(r=a.searchPreloadedResults)||void 0===r||null===(o=r.chain)||void 0===o?void 0:o.name),l=c.a("/?"+u,a),i.createElement("a",{className:dp("link"),href:l,target:"_blank"},"уточните запрос"))}))))))};return"fullscreen"===u?i.createElement(ar.a,null,i.createElement("div",{className:dp("fullscreen-container")},i.createElement(si,{offset:fp,onClick:e.onListClose}),l(e.mapSize.height-10))):i.createElement(mo.a,{isShown:!0,getTarget:function(){var t;return(null===(t=e.targetRef)||void 0===t?void 0:t.current)||null},onClose:e.onListClose,type:"normal",position:["bottom-left"],offset:pp},i.createElement("div",{className:dp("balloon-container")},l(e.mapSize.height-110)))},mp=(n(484),Object(Nt.a)("map-widget-search-control-view")),hp=Object(ec.a)((function(e){return i.createElement("div",{className:mp({checked:e.checked}),ref:e.forwardedRef},i.createElement(mr.a,{size:"small",view:"air-alt",checked:e.checked,icon:i.createElement(qt.a,{name:"search",size:24,inline:!0,className:mp("icon")}),onClick:e.onClick},(function(params){return params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "найден" :"найдено");})({count:e.resultsCount})))})),gp=function(e){var t,n,r,o=i.useRef(null),a=i.useMemo((function(){return e.mapSize.width<295||e.mapSize.height<250}),[e.mapSize]);return i.createElement(i.Fragment,null,(r=null!==(t=null===(n=e.searchResults)||void 0===n?void 0:n.totalResultCount)&&void 0!==t?t:0,a?null:i.createElement(hp,{resultsCount:r,checked:e.isResultsListShown,ref:o,onClick:e.onControlClick})),!a&&e.isResultsListShown&&e.searchResults?i.createElement(vp,{searchResults:e.searchResults,mapSize:e.mapSize,isLoading:e.isLoading,targetRef:o,mapLocation:e.mapLocation,onListItemClick:e.onResultClick,onListClose:e.onListClose,onLoadMoreClick:e.onLoadMoreClick}):null)},bp={advert:void 0,brandingId:void 0},yp=function(e){var t,n=1===e.results.items.length?e.results.items[0]:void 0,o=e.results.exactResult||n;return i.createElement(i.Fragment,null,o&&!(null===(t=e.hiddenResults)||void 0===t?void 0:t.find((function(e){return e.id===o.id})))?i.createElement(i.Fragment,null,i.createElement(Cd,{key:o.id,result:Object(r.a)(Object(r.a)({},o),bp),coordinates:o.coordinates,mode:"subtitle",onClick:e.onPlacemarkClick}),o.uri?i.createElement(ma,{uri:o.uri}):null):null,e.results.items.filter((function(t){var n;return t.id!==(null==o?void 0:o.id)&&!(null===(n=e.hiddenResults)||void 0===n?void 0:n.find((function(e){return e.id===t.id})))})).map((function(t){var n=Object(r.a)(Object(r.a)({},t),bp);return i.createElement(Cd,{key:t.id,result:n,coordinates:n.coordinates,mode:"base",onClick:e.onPlacemarkClick})})))},_p=function(e){var t=Object(U.c)(),n=vl((function(n,o){var i,a,s,c,u,l="search"===(null===(i=e.content)||void 0===i?void 0:i.type)?e.content.data.result.id:void 0,d=null==o?void 0:o.items.find((function(e){return e.id===l})),p=null!==(a=null==o?void 0:o.requestResults)&&void 0!==a?a:10,f=e.mapLocation,v={text:t.query.chain?"chain_id:("+t.query.chain+")":t.query.text,clientId:null===(s=t.mapWidget)||void 0===s?void 0:s.clientId,origin:null===(c=t.mapWidget)||void 0===c?void 0:c.origin,center:f.center,span:f.span,bounds:f.bounds,zoom:f.zoom,count:null==o?void 0:o.requestResults,type:["biz","geo"],context:null==o?void 0:o.requestContext,skip:n?Math.floor((null!==(u=null==o?void 0:o.items.length)&&void 0!==u?u:0)/p)*p:void 0};return kt.a.fetch(v,t).then((function(e){var t=e.items;return!d||t.find((function(e){return e.id===d.id}))||n&&(null==o?void 0:o.items.find((function(e){return e.id===d.id})))||t.push(d),Object(r.a)(Object(r.a)({},e),{},{items:n&&o?[].concat(o.items,t):t})})).catch((function(){return o}))}),[e.mapLocation,t],{value:t.searchPreloadedResults,loading:!1}),o=n[0],a=n[1],s=Boolean(o.value);ap((function(){s&&a(!1,o.value)}),[e.mapLocation,t]);var c,u=function(){a(!0,o.value)},l=function(){var t;e.setListContent("search-list"===(null===(t=e.content)||void 0===t?void 0:t.type)?null:{type:"search-list"})},d=function(){e.setListContent(null)},p=i.useMemo((function(){var n,r,o,i,a;return["search"===(null===(n=e.content)||void 0===n?void 0:n.type)?e.content.data.result:void 0,null===(r=t.mapWidget)||void 0===r||null===(o=r.activeObject)||void 0===o?void 0:o.items[0],null===(i=t.poiPreloadedResults)||void 0===i?void 0:i.items[0],null===(a=t.whatsherePreloadedResults)||void 0===a?void 0:a.items[0]].filter((function(e){return Boolean(e)}))}),[e.content,t]);return i.createElement(i.Fragment,null,o.value?i.createElement(gp,{searchResults:o.value,mapSize:e.mapSize,isLoading:o.loading,mapLocation:e.mapLocation,isResultsListShown:"search-list"===(null===(c=e.content)||void 0===c?void 0:c.type),onResultClick:e.onResultClick,onLoadMoreClick:u,onControlClick:l,onListClose:d}):null,o.value?i.createElement(yp,{hiddenResults:p,results:o.value,onPlacemarkClick:e.onResultClick}):null)},Ep=n(223),wp=n(509);function Sp(e){return e.isPoiEnabled&&Boolean(e.content&&["masstransit-stop","search"].includes(e.content.type))}function Op(e){return{params:{ll:Object(lr.a)(e.map.location.center),z:Math.round(100*e.map.location.zoom)/100}}}function Cp(e){var t;return e.isPoiEnabled&&"masstransit-stop"===(null===(t=e.content)||void 0===t?void 0:t.type)?{params:{masstransit:{stopId:e.content.data.stop.id},mode:"stop"}}:{}}function jp(e,t){var n,r,o,i,a=null===(n=t.mapWidget)||void 0===n||null===(r=n.activeObject)||void 0===r?void 0:r.items[0];if(e.isPoiEnabled&&"search"===(null===(o=e.content)||void 0===o?void 0:o.type)){var s=e.content.data.result,c={};return"business"!==s.type||e.routes.routerResponse||t.searchPreloadedResults?c.poi={uri:s.uri,point:s.coordinates}:c.orgpage={id:s.id},{params:c}}return!Sp(e)&&a&&"search"===(null===(i=t.mapWidget)||void 0===i?void 0:i.activeMode)?{params:{poi:{uri:a.uri,point:a.coordinates}}}:{}}function Rp(e,t){var n,r,o,i;return"search"===(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)?{params:{text:null===(r=t.searchPreloadedResults)||void 0===r?void 0:r.requestQuery,"display-text":null===(o=t.searchPreloadedResults)||void 0===o||null===(i=o.chain)||void 0===i?void 0:i.name}}:{}}function kp(e,t){var n=Np(e,t);if(n)return{textContent:"Как добраться",params:Object(r.a)(Object(r.a)({},s.s({routerResponse:null,travelMode:gi(t),detailedIndex:-1,activeRouteIndex:0,viaIndexes:[],routePoints:[s.m(),n]},t)),{},{mode:"routes"})};if(e.routes.routePoints.length>0){var o,i,a,c,u=s.s({routerResponse:null,travelMode:gi(t),detailedIndex:-1,activeRouteIndex:e.routes.activeRouteIndex,viaIndexes:(null===(o=e.routes.routerResponse)||void 0===o?void 0:o.viaIndexes)||[],routePoints:e.routes.routePoints},t),l=Object(r.a)(Object(r.a)({},u),{},{rtm:t.query.rtm,mode:"routes"!==(null===(i=t.mapWidget)||void 0===i?void 0:i.activeMode)||Sp(e)?void 0:"routes"}),d=null===(a=e.routes.routerResponse)||void 0===a?void 0:a.routes[e.routes.activeRouteIndex];return{params:l,textContent:Sp(e)||t.searchPreloadedResults&&"routes"!==(null===(c=t.mapWidget)||void 0===c?void 0:c.activeMode)||!(null==d?void 0:d.bounds)||!Object(wp.a)(e.map.location.bounds,d.bounds)?void 0:"Открыть маршрут"}}return{}}function Ip(e,t){return{params:{rl:e.ruler.points.slice(0,t.ruler.maxCount).map((function(e,t,n){var r=e.coordinates,o=n[t-1]&&n[t-1].coordinates,i=0===t?r:[r[0]-o[0],r[1]-o[1]];return Object(lr.a)(i)})).join("~")||null}}}function xp(e,t){return{layers:{trf:e.traffic.isActive,trfe:e.traffic.isActive&&mi(t)}}}function Mp(e,t){var n=t.userMap;return n?{params:{um:n.id}}:{}}function Tp(e,t){var n,r,o,i,a,s,c,u,l,d=Np(e,t),p=e.content&&"data"in e.content&&e.content.data.coordinates,f=Sp(e)||"search"!==(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)?null===(r=t.mapWidget)||void 0===r||null===(o=r.activeObject)||void 0===o||null===(i=o.items[0])||void 0===i?void 0:i.coordinates:void 0,v=null===(a=t.poiPreloadedResults)||void 0===a||null===(s=a.items[0])||void 0===s?void 0:s.coordinates,m=null===(c=t.whatsherePreloadedResults)||void 0===c||null===(u=c.items[0])||void 0===u?void 0:u.coordinates,h=null===(l=t.masstransitStop)||void 0===l?void 0:l.coordinates,g=[].concat((e.placemarks||[]).map((function(e){return e.coordinates})),[f,v,m,h]).filter((function(e){return Boolean(e&&(!(null==d?void 0:d.coords)||!Object(jt.a)(null==d?void 0:d.coords,e))&&(!p||!Object(jt.a)(p,e)))}));return{params:{pt:g.length>0?g.map((function(e){return Object(lr.a)(e)})).join("~"):void 0}}}function Pp(){return{params:{source:"mapframe",utm_source:"mapframe",from:"mapframe"}}}function Np(e,t){var n;if("search"!==(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)&&!Sp(e)){var r=[];return t.poiPreloadedResults&&t.poiPreloadedResults.items.length>0&&r.push({coords:t.poiPreloadedResults.items[0].coordinates,value:t.poiPreloadedResults.items[0].title}),t.whatsherePreloadedResults&&t.whatsherePreloadedResults.items.length>0&&r.push({coords:t.whatsherePreloadedResults.items[0].coordinates,value:t.whatsherePreloadedResults.items[0].title}),t.masstransitStop&&r.push({coords:t.masstransitStop.coordinates,value:t.masstransitStop.name}),r.find((function(t){return Object(Wo.a)(e.map.location.bounds,t.coords)}))}}var Dp=function(e){var t=Object(U.c)(),n=function(e,t){var n=[Op,Cp,jp,Rp,kp,Ip,xp,Mp,Tp,Pp].reduce((function(n,o){var i=o(e,t);return{textContent:n.textContent||i.textContent,params:Object(r.a)(Object(r.a)({},n.params||{}),i.params||{}),layers:Object(r.a)(Object(r.a)({},n.layers||{}),i.layers||{})}}),{}),o=n.params,i=void 0===o?{}:o,a=n.layers,s=void 0===a?{}:a,u=n.textContent;i.l=Object.entries(s).reduce((function(e,t){var n=t[0],r=t[1];return[].concat(e.filter((function(e){return e!==n})),r?[n]:[])}),[]).join(",")||null;var l=Object.entries(i).reduce((function(e,t){var n=t[0],r=t[1];return null!==r&&(e[n]=r),e}),{});return{url:c.k(t.hosts.maps,l),textContent:u}}(e.state,t),o=n.url,a=n.textContent,s=i.createElement(Ep.a,{url:o},function(){switch(e.size){case"tiny":return null;case"small":return "Открыть в Картах";case"medium":return a||"Открыть в Яндекс.Картах"}return null}());return"tiny"===e.size?i.createElement(hr.a,{text:"Открыть в Яндекс.Картах",position:"right",isAir:!0},s):s},Lp=[50,70,72,50],zp={passive:!1},Ap=function(e){function t(t){var n,o,l;(l=e.call(this,t)||this)._getLocationAction=void 0,l._asyncRoadEventAction=void 0,l._getRoutePointAction=void 0,l._getInitialContent=function(){var e,t,n,r,o=l.props,i=null===(e=o.config.mapWidget)||void 0===e?void 0:e.activeMode,a=null===(t=l.props.config.poiPreloadedResults)||void 0===t?void 0:t.items[0];if("routes"===i&&l.props.config.routerResponse)return{type:"route",data:{}};if("poi"===i&&a){return{type:"search",data:{result:a,coordinates:a.coordinates}}}if("stop"===i&&o.config.masstransitStop)return{type:"masstransit-stop",data:{stop:o.config.masstransitStop,coordinates:o.config.masstransitStop.coordinates}};if("whatshere"===i&&(null===(n=l.props.config.whatsherePreloadedResults)||void 0===n?void 0:n.items[0])){var s=l.props.config.whatsherePreloadedResults.items[0];return{type:"search",data:{result:s,coordinates:s.coordinates}}}if("search"===i&&(l.props.config.searchPreloadedResults||(null===(r=l.props.config.mapWidget)||void 0===r?void 0:r.activeObject))){var c,u,d,p,f=null===(c=l.props.config.mapWidget)||void 0===c||null===(u=c.activeObject)||void 0===u?void 0:u.items[0],v=1===(null===(d=l.props.config.searchPreloadedResults)||void 0===d?void 0:d.items.length)?l.props.config.searchPreloadedResults.items[0]:void 0,m=f||(null===(p=l.props.config.searchPreloadedResults)||void 0===p?void 0:p.exactResult)||v;if("business"===(null==m?void 0:m.type)||"toponym"===(null==m?void 0:m.type))return{type:"search",data:{result:m,coordinates:m.coordinates}};if(!m&&o.mapSize.width>460)return{type:"search-list"}}return null},l._onRouterResponseLoad=function(e){l._deepSetState({routes:{routerResponse:e,activeRouteIndex:0}}),l._updateContentData({type:"route",data:{}})},l._getIsPoiEnabled=function(e,t){return e>=295&&t>=400},l._deepSetState=function(e,t){l.setState(S(l.state,e),t)},l._onGeolocationControlClick=function(){l._makeGeolocationRequest()},l._makeGeolocationRequest=function(){var e=l.props.config;l.setState({geolocation:{isStarted:!0}}),l._getLocationAction=p.a.create(D.getCurrentPosition(Object(O.b)(e),e,1500),{success:l._onGeolocationSuccess,fail:l._onGeolocationFail})},l._onGeolocationSuccess=function(e){l._updateLocationRequest({center:[e.longitude,e.latitude],duration:1e3,zoom:e.accuracy<=200?16:void 0}),l._deepSetState({geolocation:{isStarted:!1,accuracy:e.accuracy,currentPosition:[e.longitude,e.latitude]}})},l._onGeolocationFail=function(){var e;(null===(e=l.props.config.mapWidget)||void 0===e?void 0:e.userCoordinates)&&(l._updateLocationRequest({center:l.props.config.mapWidget.userCoordinates,duration:1e3}),l._deepSetState({geolocation:{isStarted:!1,currentPosition:l.props.config.mapWidget.userCoordinates,accuracy:1e3}}))},l._updateLocation=function(e){l._deepSetState({map:{location:e}})},l._updateLocationRequest=function(e){l.setState({map:Object(r.a)(Object(r.a)({},l.state.map),{},{locationRequest:e})})},l._onRoutesBoundsChange=function(e){var t=a.c({bounds:e},Lp,l.state.map.size);l._updateLocationRequest(t)},l._updateRuler=function(e){l._deepSetState({ruler:e})},l._onTrafficLevelChange=function(e){l._deepSetState({traffic:{level:e}})},l._onTrafficControlClick=function(){var e=l._getContentData("traffic");l._deepSetState({traffic:{isActive:!l.state.traffic.isActive},content:e?void 0:l.state.content})},l._setMapSize=function(e){l._deepSetState({map:{size:e}})},l._updateContentData=function(e){l.setState({content:e})},l._processMapObjectClick=function(e,t){var n=l._getEmptyRoutePointIndex();-1!==n?l._updateRoutePoint(e,n):t()},l._onTrafficLayerClick=function(e,t){var n,r=l.props;if(e){var o=e.properties,i=o.HotspotMetaData,a=o.vectorMetadata,s=(null==a?void 0:a.get("objectId"))||(null==i?void 0:i.id);if(s){var c=null===(n=e.geometry)||void 0===n?void 0:n.coordinates;l._processMapObjectClick({value:"",coords:c&&2===c.length?c:t.coordinates},(function(){c&&2===c.length&&(p.a.cancel(l._asyncRoadEventAction),l._asyncRoadEventAction=p.a.create(A.getRoadEvent(s,r.config),{success:function(e){e&&e.position&&l._updateContentData({type:"traffic",data:{event:e,coordinates:e.position}})},fail:function(){return l._resetContentData()}}))}))}}},l._onRouteClick=function(e,t){var n;l._updateContentData({type:"route",data:{coordinates:t}});var r=((null===(n=l.state.routes.routerResponse)||void 0===n?void 0:n.routes)||[]).indexOf(e);l._deepSetState({routes:{activeRouteIndex:-1!==r?r:0}})},l._onUserMapsFeatureClick=function(e,t){var n={coords:t,value:""};l._processMapObjectClick(n,(function(){var n,r=null===(n=l.props.config.userMap)||void 0===n?void 0:n.features[e];r&&l._updateContentData({type:"user-maps",data:{feature:r,coordinates:t}})}))},l._onPlacemarkClick=function(e){var t={coords:e.coordinates,value:e.title,uri:e.uri};l._processMapObjectClick(t,(function(){if(l.state.isPoiEnabled)l._updateContentData({type:"search",data:{result:e,coordinates:e.coordinates}});else{var t="business"===e.type?c.b({id:e.id,seoname:e.seoname},{},{baseUrl:""}):c.h(e,e.region,{baseUrl:"",skipPointCheck:!0});if(t){var n=Object(u.a)(c.a("/"+t,l.props.config));window.open(n,"_blank")}}}))},l._onMasstransitPlacemarkClick=function(e){var t,n={coords:e.coordinates,value:e.name,uri:null===(t=e.searchResult)||void 0===t?void 0:t.uri};l._processMapObjectClick(n,(function(){if(l.state.isPoiEnabled)l._updateContentData({type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}});else{var t=e.region?c.d(e,e.region,{baseUrl:""}):"";if(t){var n=Object(u.a)(c.a("/"+t,l.props.config));window.open(n,"_blank")}}}))},l._resetContentData=function(){l._deepSetState({content:null})},l._updateRoutePointDragging=function(e){var t;l._deepSetState({routes:{isPointDragging:e},content:"route"===(null===(t=l.state.content)||void 0===t?void 0:t.type)?null:l.state.content})},l._updateRoutePoint=function(e,t){if(l.state.routes.isPointDragging){var n=[].concat(l.state.routes.routePoints);n[t]=e,l._deepSetState({routes:{routePoints:n}})}else l._getRoutePointAction=p.a.create(xt(e,l.props.config,"router"),{success:function(n){e.value=(null==n?void 0:n.title)||"",e.input=(null==n?void 0:n.title)||"",e.searchResult=n;var r=[].concat(l.state.routes.routePoints);r[t]=e,l._deepSetState({routes:{routePoints:r}})},fail:function(){var n=[].concat(l.state.routes.routePoints);n[t]=e,l._deepSetState({routes:{routePoints:n}})}})},l._getEmptyRoutePointIndex=function(){return l.state.routes.routePoints.findIndex((function(e){return!e.coords}))},l._getRoutePointsDraggableIndexes=function(){var e;return(null===(e=l.props.config.routePoints)||void 0===e?void 0:e.reduce((function(e,t,n){return t.coords||e.push(n),e}),[]))||[]},l._onPoiClick=function(e,t){var n=e.properties.uri,r=e.geometry&&e.geometry.coordinates||t.coordinates;l._processMapObjectClick({coords:r,value:e.properties.name||"",uri:n},(function(){l.setState({poiData:{coordinates:r,feature:e}})}))},l._getCursor=function(){var e=l._getEmptyRoutePointIndex();if(-1!==e&&!l.state.ruler.isEnabled)return s.n(e,l.state.routes.routePoints)+"_"+e},l._getContentData=function(e){var t;if((null===(t=l.state.content)||void 0===t?void 0:t.type)===e)return l.state.content},l._preventZoomByPinching=function(e){"scale"in e&&1!==e.scale&&e.touches.length>1&&e.preventDefault()},l._renderInMapsControl=function(e){return i.createElement(Dp,{state:l.state,size:e})},l._renderGeolocationPin=function(){return l.state.geolocation.currentPosition&&l.state.geolocation.accuracy?i.createElement(Yt,{currentPosition:l.state.geolocation.currentPosition,accuracy:l.state.geolocation.accuracy}):null},l._renderTrafficLayer=function(){return l.state.traffic.isActive?i.createElement(Ui,{mapLocation:l.state.map.location,mapSize:l.state.map.size,updateLocationRequest:l._updateLocationRequest,onClick:l._onTrafficLayerClick,onTrafficLevelChange:l._onTrafficLevelChange,resetContentData:l._resetContentData,content:l._getContentData("traffic")}):null},l._renderUserMaps=function(){return l.props.config.userMap?i.createElement(ou,{userMap:l.props.config.userMap,mapLocation:l.state.map.location,mapSize:l.state.map.size,updateLocationRequest:l._updateLocationRequest,onFeatureClick:l._onUserMapsFeatureClick,cursor:l._getCursor(),resetContentData:l._resetContentData,content:l._getContentData("user-maps")}):null},l._renderSearchResult=function(){return i.createElement(Dd,{mapSize:l.state.map.size,mapLocation:l.state.map.location,isTrafficLayerEnabled:l.state.traffic.isActive,updateLocationRequest:l._updateLocationRequest,content:l.state.isPoiEnabled?l._getContentData("search"):void 0,onContentClose:l._resetContentData,onStaticPlacemarkClick:l._onPlacemarkClick})},l._renderSearchComponentWithControl=function(){return i.createElement(_p,{mapLocation:l.state.map.location,mapSize:l.state.map.size,content:l._getContentData("search")||l._getContentData("search-list"),onResultClick:l._onPlacemarkClick,setListContent:l._updateContentData})};var f=a.c(l.props.config.mapLocation,Lp,{width:t.mapSize.width,height:t.mapSize.height}),v=l._getIsPoiEnabled(t.mapSize.width,t.mapSize.height);return l.state={placemarks:t.config.query.pt?d(t.config.query.pt):void 0,map:{location:f,size:t.mapSize},geolocation:{isStarted:!1},ruler:Rt(t.config),traffic:{isActive:(null===(n=t.config.query.l)||void 0===n?void 0:n.includes("trf"))||(null===(o=t.config.userMap)||void 0===o?void 0:o.isTrafficShown),level:null},routes:{activeRouteIndex:Number(t.config.query.rtn)||0,routerResponse:t.config.routerResponse?s.e(t.config.routerResponse):null,routePoints:t.config.routePoints||[],isPointDragging:!1},content:l._getInitialContent(),isPoiEnabled:v},l}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.body.classList.add("_app_ready"),document.addEventListener("touchmove",this._preventZoomByPinching,zp)},n.componentDidUpdate=function(e,t){if(t.map.size!==this.state.map.size){var n=this._getIsPoiEnabled(this.state.map.size.width,this.state.map.size.height);this._deepSetState({isPoiEnabled:n})}},n.componentWillUnmount=function(){p.a.cancel(this._getLocationAction),p.a.cancel(this._getRoutePointAction)},n.render=function(){var e=this.state;return i.createElement(or,{location:e.map.location,locationRequest:e.map.locationRequest,margin:Lp,onLocationChange:this._updateLocation,onSizeChange:this._setMapSize,isPoiEnabled:this.state.isPoiEnabled,onPoiClick:this._onPoiClick},i.createElement(lo,{geolocation:{isStarted:e.geolocation.isStarted,onClick:this._onGeolocationControlClick},location:e.map.location,ruler:{isEnabled:e.ruler.isEnabled,updateRuler:this._updateRuler},traffic:{isActive:e.traffic.isActive,level:e.traffic.level,onClick:this._onTrafficControlClick},search:{render:this._renderSearchComponentWithControl},inMaps:{render:this._renderInMapsControl}}),this._renderUserMaps(),this._renderGeolocationPin(),i.createElement(qo,{ruler:e.ruler,updateRuler:this._updateRuler}),this._renderTrafficLayer(),i.createElement(an,{points:e.placemarks}),i.createElement(Zc,{routerResponse:e.routes.routerResponse,activeRouteIndex:e.routes.activeRouteIndex,routePoints:e.routes.routePoints,mapLocation:e.map.location,mapSize:e.map.size,emptyPointIndex:this._getEmptyRoutePointIndex(),isTrafficLayerEnabled:e.traffic.isActive,isRoutePointDragging:e.routes.isPointDragging,cursor:this._getCursor(),setDragging:this._updateRoutePointDragging,draggablePointIndexes:this._getRoutePointsDraggableIndexes(),updateRoutePoint:this._updateRoutePoint,onRouteClick:this._onRouteClick,onBoundsChange:this._onRoutesBoundsChange,resetContentData:this._resetContentData,content:this._getContentData("route")}),i.createElement(ip,{routePoints:e.routes.routePoints,onLoad:this._onRouterResponseLoad}),this._renderSearchResult(),i.createElement(Jd,{content:e.isPoiEnabled?this._getContentData("masstransit-stop"):void 0,mapSize:e.map.size,mapLocation:e.map.location,updateLocationRequest:this._updateLocationRequest,onContentClose:this._resetContentData,onStaticPlacemarkClick:this._onMasstransitPlacemarkClick}),i.createElement(np,{poiData:e.poiData,updateContent:this._updateContentData}))},t}(i.Component);t.default=Object(U.b)(Ap)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(117);function o(e,t){return Object(r.a)(e,t).distance}},function(e,t,n){"use strict";var r=n(269),o=n(38);t.a=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Object(o.a)(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Object(r.a)(e,t,{leading:i,maxWait:t,trailing:a})}},function(e,t,n){"use strict";var r=n(49),o=n(239);t.a=function(e){return Object(o.a)(Object(r.a)(e).toLowerCase())}},,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/ebe60c9063e4a91162d1366e790ea391.svg"},function(e,t,n){e.exports=n.p+"_/fd161c881e6392111418a1036fe1188e.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){},function(e,t,n){},,function(e,t,n){},,function(e,t){},function(e,t,n){},,function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.56 14.363L14.363 3.56a1.91 1.91 0 0 1 2.7 0l3.377 3.376a1.91 1.91 0 0 1 0 2.7L9.636 20.442a1.91 1.91 0 0 1-2.7 0l-3.377-3.377a1.91 1.91 0 0 1 0-2.7zm4.12-.743l1.282-1.282 1.823 1.824a.764.764 0 1 0 1.08-1.082l-1.824-1.822 1.216-1.215 1.148 1.145a.763.763 0 0 0 1.318-.534.765.765 0 0 0-.237-.545l-1.148-1.147 1.282-1.283 1.824 1.824a.764.764 0 0 0 1.08-1.082l-1.825-1.824 1.014-1.012a.478.478 0 1 0-.676-.675L4.91 15.038a.478.478 0 0 0 .675.675l1.012-1.012 1.15 1.146a.764.764 0 1 0 1.08-1.079L7.679 13.62v.001z" fill="currentColor"/></svg>'},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/ac5e1b536924f7e8a301d831df70844a.svg"},function(e,t,n){e.exports=n.p+"_/6af0c0ad591e18333f25c83b7e2e0279.svg"},function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/220b7368693f1dd6ea9cc18efe67c389.svg"},function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n(355)()},function(e,t,n){"use strict";var r=n(356);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(358)},function(e,t,n){"use strict";var r=60103,o=60106,i=60107,a=60108,s=60114,c=60109,u=60110,l=60112,d=60113,p=60120,f=60115,v=60116,m=60121,h=60122,g=60117,b=60129,y=60131;if("function"==typeof Symbol&&Symbol.for){var _=Symbol.for;r=_("react.element"),o=_("react.portal"),i=_("react.fragment"),a=_("react.strict_mode"),s=_("react.profiler"),c=_("react.provider"),u=_("react.context"),l=_("react.forward_ref"),d=_("react.suspense"),p=_("react.suspense_list"),f=_("react.memo"),v=_("react.lazy"),m=_("react.block"),h=_("react.server.block"),g=_("react.fundamental"),b=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case l:case v:case f:case c:return e;default:return t}}case o:return t}}}var w=c,S=r,O=l,C=i,j=v,R=f,k=o,I=s,x=a,M=d;t.ContextConsumer=u,t.ContextProvider=w,t.Element=S,t.ForwardRef=O,t.Fragment=C,t.Lazy=j,t.Memo=R,t.Portal=k,t.Profiler=I,t.StrictMode=x,t.Suspense=M,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return E(e)===u},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return E(e)===l},t.isFragment=function(e){return E(e)===i},t.isLazy=function(e){return E(e)===v},t.isMemo=function(e){return E(e)===f},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===s},t.isStrictMode=function(e){return E(e)===a},t.isSuspense=function(e){return E(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===s||e===b||e===a||e===d||e===p||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===f||e.$$typeof===c||e.$$typeof===u||e.$$typeof===l||e.$$typeof===g||e.$$typeof===m||e[0]===h)},t.typeOf=E},function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/88dd6621d29f63b3bcd11823a075bab8.svg"},function(e,t,n){e.exports=n.p+"_/982f21b161efbb26f879ac8dcf5bc613.svg"},function(e,t,n){e.exports=n.p+"_/6dfdf3e1f699e358e2a45696b5910bfc.svg"},function(e,t,n){e.exports=n.p+"_/d7eede432ce185c2bcdea2a81dd73d60.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/2288e6eacf3c5cc628de46cd146ffc9d.svg"},function(e,t,n){e.exports=n.p+"_/f869888cf7cada800b61fc42b9a84b32.svg"},function(e,t,n){e.exports=n.p+"_/dff25d38edaaaed43455e2838501c7d2.png"},function(e,t,n){e.exports=n.p+"_/7485047d3440076f2f17ebb52a011c9c.png"},function(e,t,n){e.exports=n.p+"_/9dae14af44a24ba50a1bf841f2d22144.png"},function(e,t,n){e.exports=n.p+"_/9c80a04cdee2564f1b348f2c942570e5.png"},function(e,t,n){e.exports=n.p+"_/db96e0b37fb683edb082b6d22cd47375.png"},function(e,t,n){e.exports=n.p+"_/9d7d9192162a766707427f0fdfad6e69.png"},function(e,t,n){e.exports=n.p+"_/30566ea95b3b85e11fdf731ad19d0cb6.png"},function(e,t,n){e.exports=n.p+"_/00dbdb577dd780ef99cebd89eabff5b0.png"},function(e,t,n){e.exports=n.p+"_/6b36feaa685efb371af0a08ebce07269.png"},function(e,t,n){e.exports=n.p+"_/74ca6ea4b76200fd171c44aa5a49f5a8.png"},function(e,t,n){e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},function(e,t,n){e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},function(e,t,n){e.exports=n.p+"_/4107b60439ecfb91bb4f01454bb365e2.png"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/3c1d6cec054d706aa818de640aaf8d0f.svg"},function(e,t,n){e.exports=n.p+"_/5ef4187e42c9c1679003eb205d6ee47f.svg"},function(e,t,n){e.exports=n.p+"_/daa6bd28a63b796fc3ac074c9a76ea1f.svg"},function(e,t,n){e.exports=n.p+"_/24a86a89035c6db4e631e33c67cf5868.svg"},function(e,t,n){e.exports=n.p+"_/ba9613feb2d5b53bf28d99592d2fdb6b.svg"},function(e,t,n){e.exports=n.p+"_/effb4da44cf0173df0c2ab989fbd63a0.svg"},function(e,t,n){e.exports=n.p+"_/129c2ce5053c06d6e2279b9202b3e275.svg"},function(e,t,n){e.exports=n.p+"_/f12ebb235eb6f3b758fa4c8cf6aae45e.svg"},function(e,t,n){e.exports=n.p+"_/5e12422ab6e91545da8a52ddc23d129e.svg"},function(e,t,n){e.exports=n.p+"_/6ee387535b2b24ab6056e0eeeffac86c.svg"},function(e,t,n){e.exports=n.p+"_/643f379f9027af326115f5252fe74a07.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/178df0f18f6025c2e764130c7d1ac463.svg"},function(e,t,n){e.exports=n.p+"_/a2db83cf4e9f182797a862b7214acbb1.svg"},function(e,t,n){e.exports=n.p+"_/ee15bab6241eec6618f0f5720fa6daa9.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/ab65d8cbf4996eb9048efd9031d9f38b.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/d1bd96c33b1fd44a7a4f0b93aef736f6.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/cbb4eab83cc1f046b092166074e47cb5.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n'},function(e,t){e.exports='<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>'},function(e,t,n){},,function(e,t){e.exports='<svg fill="none" height="40" width="34" xmlns="http://www.w3.org/2000/svg"><filter id="24609e80b326bd45d5a64be8fc7ffd36__a" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" width="32" x="1" y="2"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/></filter><g filter="url(#24609e80b326bd45d5a64be8fc7ffd36__a)"><path fill="#000" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/></g><path fill="#fff" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/><path fill="currentColor" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/><path fill="#000" class="tint" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/></svg>'},function(e,t){e.exports='<svg width="28" height="34" viewBox="0 0 28 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2247 28.9111C12.133 27.9459 11.6447 27.1349 10.8253 26.292C10.2356 25.6855 9.54841 25.1305 8.78321 24.5125C8.44143 24.2365 8.08408 23.9479 7.71292 23.6366C5.37129 21.6722 2.89999 19.1042 2.89999 14.4658C2.89999 8.35203 7.86976 3.39999 14 3.39999C20.1304 3.39999 25.1 8.35434 25.1 14.4658C25.1 19.1025 22.6402 21.6727 20.3021 23.6393C19.9262 23.9555 19.5645 24.2481 19.2186 24.5279C18.46 25.1415 17.7778 25.6935 17.1898 26.2968C16.3675 27.1407 15.8737 27.9527 15.7745 28.9181L15.765 29.0107C15.7161 29.4865 15.4554 29.874 15.1734 30.1276C14.8914 30.3813 14.4782 30.6 13.9988 30.6C13.0882 30.6 12.3249 29.9125 12.2344 29.008L12.2247 28.9111Z" fill="white" fill-opacity="0.6"/><path d="M4.00143 14.5004C4.00143 8.97615 8.47795 4.50179 14 4.50179C19.5221 4.50179 23.9986 8.9783 23.9986 14.5004C23.9986 22.8325 15.3405 23.7089 14.8332 28.6624C14.83 28.694 14.8269 28.7245 14.8239 28.7537C14.785 29.1334 14.3805 29.4982 13.9989 29.4982C13.5738 29.4982 13.218 29.1765 13.1759 28.7535C13.173 28.7243 13.1699 28.694 13.1668 28.6624C12.6965 23.6996 4.00143 22.8325 4.00143 14.5004Z" fill="currentColor"/></svg>\n'},function(e,t){e.exports='<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 14c0 5.508 3.18 10.273 7.805 12.558 3.026 1.573 4.847 3.215 5.463 4.928a.778.778 0 0 0 1.464 0c.616-1.713 2.437-3.355 5.463-4.928C24.819 24.273 28 19.508 28 14c0-7.732-6.268-14-14-14S0 6.268 0 14z" fill="currentColor"/></svg>'},function(e,t,n){"use strict";var r=n(19),o=n(4),i=n(465),a=n.n(i),s=n(2),c=n.n(s),u=n(5),l=n(264),d=n(18),p=n(33),f=n(48),v=n(34),m=n(495),h=Object(l.a)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(null,268))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 268}}),g=Object(l.a)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(null,271))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 271}}),b=Object(u.a)("search-placemark-view"),y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._onClick=function(){t.props.onClick&&t.props.onClick(t.props.result)},t._getPlacemarkData=function(){var e=t.props;return{icon:e.icon,mode:e.mode,result:e.result}},t._onMouseEnter=function(){var e,n;null===(e=(n=t.props).onMouseEnter)||void 0===e||e.call(n,t._getPlacemarkData())},t._onMouseLeave=function(){var e,n;null===(e=(n=t.props).onMouseLeave)||void 0===e||e.call(n,t._getPlacemarkData())},t._renderEntrances=function(){var e=t.props;return e.active?s.createElement(m.a,{result:e.result,analyticsName:"entrances",animated:!0}):null},t._renderEntranceStory=function(){var e=t.props,n=e.result;return e.active&&"business"===n.type&&n.hasStories?s.createElement(h,{result:n},(function(e){return s.createElement(g,Object(r.a)({result:n},e))})):null},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.result,n=e.icon,r=e.title,o=r&&r.position||"right",i=null;if(r){var a="bottom"!==o?n.centerY:void 0;i=s.createElement("div",{className:b("title"),style:{marginTop:a}},r.element)}var c=p.d(t),u="brandingId"in t&&t.brandingId||"advert"in t&&t.advert&&t.advert.pinBranding?"branding":c?"rubric":"default";return s.createElement(d.a,{name:e.analyticsName||"placemark",nodeState:{type:p.b(t),gml_id:t.analyticsId,pinPriority:"business"===t.type?t.pinPriority:void 0,logId:t.logId,permalink:"id"in t?t.id:void 0,uri:f.d(t),reqid:t.requestId,branding:"brandingId"in t?t.brandingId:void 0,active:e.active,lowRelevance:"lowRelevance"in t&&t.lowRelevance,relatedAdvertType:"relatedAdvertType"in t&&t.relatedAdvertType||void 0,mode:e.mode,iconType:u},logClick:!0},s.createElement(v.a,{coordinates:e.coordinates,zIndex:e.zIndex,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},s.createElement("div",{className:b({position:o}),"data-object":"search-placemark","data-id":e.result.id,"data-log-id":e.result.logId,"data-mode":e.mode,"data-coordinates":e.coordinates.join(","),"data-icon-type":u,style:{marginTop:-n.baseY,marginLeft:"left"===o?n.baseX:"right"===o?-n.baseX:void 0}},s.createElement("div",{className:b("icon"),style:{width:n.width,height:n.height}},n.element),i)),this._renderEntrances(),this._renderEntranceStory())},t}(s.PureComponent);t.a=y},function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/c9edbd283ea829e6005f28ff7693d042.svg"},function(e,t,n){e.exports=n.p+"_/59707365a708729679455aab659484cc.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"_/7f78fe3f36223c298be58eb812e95646.svg"},function(e,t,n){e.exports=n.p+"_/5cf17060c6672d32fb90b652cc8d17f0.svg"},function(e,t,n){e.exports=n.p+"_/2e1750eb108b5881e5577c7e08041e3f.svg"},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,,,function(e,t,n){"use strict";var r=n(95),o=n(106),i=n(50),a=n(38),s=n(59),c=n(54);var u=function(e){return Object(c.a)(e)&&"[object RegExp]"==Object(s.a)(e)},l=n(111),d=n(142),p=d.a&&d.a.isRegExp,f=p?Object(l.a)(p):u,v=n(121),m=Object(v.a)("length"),h="[\\ud800-\\udfff]",g="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",b="\\ud83c[\\udffb-\\udfff]",y="[^\\ud800-\\udfff]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",w="(?:"+g+"|"+b+")"+"?",S="[\\ufe0e\\ufe0f]?"+w+("(?:\\u200d(?:"+[y,_,E].join("|")+")[\\ufe0e\\ufe0f]?"+w+")*"),O="(?:"+[y+g+"?",g,_,E,h].join("|")+")",C=RegExp(b+"(?="+b+")|"+O+S,"g");var j=function(e){for(var t=C.lastIndex=0;C.test(e);)++t;return t};var R=function(e){return Object(i.a)(e)?j(e):m(e)},k=n(105),I=n(134),x=n(49),M=/\w*$/;t.a=function(e,t){var n=30,s="...";if(Object(a.a)(t)){var c="separator"in t?t.separator:c;n="length"in t?Object(I.a)(t.length):n,s="omission"in t?Object(r.a)(t.omission):s}var u=(e=Object(x.a)(e)).length;if(Object(i.a)(e)){var l=Object(k.a)(e);u=l.length}if(n>=u)return e;var d=n-R(s);if(d<1)return s;var p=l?Object(o.a)(l,0,d).join(""):e.slice(0,d);if(void 0===c)return p+s;if(l&&(d+=p.length-d),f(c)){if(e.slice(d).search(c)){var v,m=p;for(c.global||(c=RegExp(c.source,Object(x.a)(M.exec(c))+"g")),c.lastIndex=0;v=c.exec(m);)var h=v.index;p=p.slice(0,void 0===h?d:h)}}else if(e.indexOf(Object(r.a)(c),d)!=d){var g=p.lastIndexOf(c);g>-1&&(p=p.slice(0,g))}return p+s}},,function(e,t,n){"use strict";var r=n(86),o=n(67),i=n(236),a=n(133);var s=n(30);function c(e,t,n){e=n?[[Math.min(e[0][0],e[1][0])-n,Math.min(e[0][1],e[1][1])-n],[Math.max(e[0][0],e[1][0])+n,Math.max(e[0][1],e[1][1])+n]]:e;var c=Object(r.a)(s.g),u=Object(o.a)(t,s.g);return Object(i.a)(Object(a.a)(e,s.g),c).some((function(e){return function(e,t){return t[0]>=e[0][0]&&t[0]<=e[1][0]&&t[1]>=e[0][1]&&t[1]<=e[1][1]}(e,u)}))}n.d(t,"a",(function(){return c}))},function(e,t,n){"use strict";var r=n(4),o=(n(467),n(2)),i=n(75),a=n(498),s=n(15),c=n(5),u=n(20),l=n(41),d=n(34),p=n(18),f=n(40),v=n(44),m=n.n(v),h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._uuid=m.a.v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach((function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[0][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[1][1]}})})),n},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],o=this._getCollidingPrimitives(t.placemarks);n.forEach((function(t,n){n.startsWith(e._uuid+":")&&r.push(n)})),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(o)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(o.Component),g=Object(u.b)({shouldWait:!0})(h),b=n(469),y=n.n(b),_=n(470),E=n.n(_),w=Object(c.a)("map-entrances-view"),S=[[-5,-5],[5,5]],O=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._onMapUpdate=function(){var e=n.props,t=n.state,r=e.map.zoom,o=e.map.azimuth;r===t.mapZoom&&o===t.mapAzimuth||n.setState({mapZoom:r,mapAzimuth:o})},n._renderEntrance=function(e,t){var r=n.props,c=n.state,u=C(c.mapZoom),l=((e.azimuth||0)+Object(i.a)(c.mapAzimuth))%360;return o.createElement(p.a,{key:t,name:"entrance",nodeState:{name:e.name,coords:Object(a.a)(e.coordinates)}},o.createElement(d.a,{coordinates:e.coordinates,nonInteractive:!r.onEntranceClick,onClick:function(){var t;return null===(t=r.onEntranceClick)||void 0===t?void 0:t.call(r,e)},zIndex:f.a.search.base},o.createElement("div",{className:w({size:u,animated:r.animated})},o.createElement("div",{style:{transform:"rotate("+l+"deg)"}},void 0!==e.azimuth&&"small"!==u?o.createElement(s.a,{url:"large"===u?E.a:y.a,className:w("arrow")}):void 0,o.createElement("div",{className:w("dot")})),c.isVector&&e.name&&c.mapZoom>=18.5?o.createElement("div",{className:w("title",{position:l>45&&l<135?"left":"right"})},e.name):null)))},n._renderEntrances=function(){var e=n.props,t=n.state,r=C(t.mapZoom);return e.result.entrances&&r?o.createElement(o.Fragment,null,e.result.entrances.map(n._renderEntrance),t.mapZoom>=18.5?o.createElement(g,{placemarks:e.result.entrances.map((function(e){return{anchor:e.coordinates,id:e.coordinates.join(","),pixelSize:S}}))}):null):null},n.state={mapZoom:t.map.zoom,mapAzimuth:t.map.azimuth,isVector:"vector"===t.map.getEffectiveMode()},n}return Object(r.a)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderEntrances(),o.createElement(l.b,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.PureComponent);function C(e){return e>=18?"large":e>=17?"normal":e>=16?"small":void 0}t.a=Object(u.b)({shouldWait:!0})(O)}]]);