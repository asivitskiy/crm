$(function(){"use strict";$("a.fancybox").fancybox({helpers:{overlay:{css:{background:"rgba(39, 27, 27, 0.8)"}},title:null},width:!$("html").hasClass("bx-touch")&&"100%",height:!$("html").hasClass("bx-touch")&&"100%",margin:$("html").hasClass("bx-touch")?0:100,wrapCSS:"container",openEffect:"fade",autoSize:!0,autoResize:!0,fitToView:!0,closeBtn:!0,tpl:{closeBtn:'<a title="Close" class="icon-ic_close fancybox-item fancybox-close" href="javascript:;"></a>'}});var t=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:$("#title-search-input").closest("form").attr("action"),prepare:function(t,e){return e.type="POST",e.data={q:t,ajax_call:"y",INPUT_ID:"title-search-input"},e}}});$(".search").typeahead({minLength:1},{display:"value",source:t.ttAdapter(),templates:{header:['<div class="search-results-dropdown">'],suggestion:function(t){return'<a href="'+t.url+'">'+t.suggest+"</a>"}}}),$(".calculator form").submit(function(t){t.preventDefault()}),$(".calculator h3 a").click(function(t){t.preventDefault(),$(this).toggleClass("opened").closest(".calculator").find(".content").slideToggle()}),$(".sumo").each(function(){var e=$(this),a=$(e.data("target"));a.attr("placeholder");e.SumoSelect(),e.on("change",function(){var t=e.val();$.ajax({url:$(".calculator").find("form").attr("action"),method:"POST",dataType:"JSON",data:{section_id:t,action:"getList",ajax_call2:"y",type:a.data("type")},success:function(t){0<a.length&&(a.empty(),a.append($("<option disabled selected />")),$(t.ITEMS).each(function(t,e){a.append($("<option />",{value:e.ID,text:e.NAME,data:{price:e.PROPERTIES.PRICE,amount:e.PROPERTIES.AMOUNT}}))}),a[0].sumo.reload(),a[0].sumo.enable())}})})}),$("#materials").on("change",function(){$("#colors").empty(),$("#colors")[0].sumo.reload(),$("#colors")[0].sumo.disable(),$("#copies").empty(),$("#copies")[0].sumo.reload(),$("#copies")[0].sumo.disable()}),$("#materials, #colors").on("change",function(){$(".calculate button").attr("disabled","disabled"),$(".calculator .total-price").hide()}),$("#copies").on("change",function(){$(".calculate button").removeAttr("disabled")}),$(".calculate button").click(function(){var t,e=$("#copies option:selected"),o=parseInt(e.data("price")),a=parseInt(e.data("amount")),c=0,l=[];$('.calculator .options input[type="checkbox"]:checked').each(function(){var t=$(this),e=t.data("type"),a=parseInt(t.val());"plus"==e?c+=a:"percent"==e&&(c+=a/100*o),l.push(t.closest("label").text())}),t=a*(o+c),$(".calculator .price strong").text(t),$(".calculator .total-price").show(),$('#calc-modal input[name="material"]').val($("#materials option:selected").text()),$('#calc-modal input[name="color"]').val($("#colors option:selected").text()),$('#calc-modal input[name="copies"]').val($("#copies option:selected").text()),$('#calc-modal input[name="options"]').val(l.join()),$('#calc-modal input[name="price"]').val(t)}),$(".styler").styler({selectSearch:!0}),$(".scrollTo").click(function(t){t.preventDefault(),function(t){t=t.replace("-link",""),$("html,body").animate({scrollTop:$("#"+t).offset().top},"slow")}(this.id)})});